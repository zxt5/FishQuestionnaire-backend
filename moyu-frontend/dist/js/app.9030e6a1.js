(function(t){function e(e){for(var n,a,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)a=r[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},s=[];function a(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"e4a72986","chunk-2d216214":"28e94c12","chunk-955649ba":"777cedff"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],i=o[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,n){i=o[t]=[e,n]}));e.push(i[2]=n);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=a(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(u);var i=o[t];if(0!==i){if(i){var n=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+n+": "+s+")",c.name="ChunkLoadError",c.type=n,c.request=s,i[1](c)}o[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"014b":function(t,e,i){"use strict";i("d0ef")},"0319":function(t,e,i){"use strict";i("9cf1")},"034f":function(t,e,i){"use strict";i("85ec")},"0427":function(t,e,i){"use strict";i("8a64")},"0e40":function(t,e,i){"use strict";i("5ad3")},"0f97":function(t,e,i){"use strict";i("c9d3")},"128d":function(t,e,i){"use strict";i("5fd3")},1582:function(t,e,i){},1682:function(t,e,i){"use strict";i("7da1")},"1ef6":function(t,e,i){"use strict";i("8906")},2627:function(t,e,i){"use strict";i("cbdb")},2941:function(t,e,i){"use strict";i("bab9")},3729:function(t,e,i){"use strict";i("1582")},"393d":function(t,e,i){"use strict";i("3ae5")},"3ae5":function(t,e,i){},"3cb1":function(t,e,i){},"3e28":function(t,e,i){},"3fc4":function(t,e,i){},"47ad":function(t,e,i){},"4c5c":function(t,e,i){"use strict";i("a6de")},"4ec6":function(t,e,i){},"50d7":function(t,e,i){"use strict";i("630e")},"534f":function(t,e,i){t.exports=i.p+"img/logo1.7c329b7e.png"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Header"),i("div",{directives:[{name:"show",rawName:"v-show",value:"/"!==this.$route.path,expression:"this.$route.path !== '/'"}],staticClass:"index_swiper"},[i("Swiper")],1),i("transition",[t.isRouterAlive?i("router-view"):t._e()],1),i("el-backtop")],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"main-swiper"},t._l(t.bannerList,(function(e,n){return i("li",{key:e.id,staticClass:"swiper-item",class:{isShow:n===t.isShowBg}},[i("img",{staticClass:"bg-item",attrs:{src:e.url,alt:""}})])})),0)},r=[],l={name:"Swiper",data:function(){return{bannerList:[{id:1,url:"https://z3.ax1x.com/2021/06/17/2juuz6.jpg"},{id:3,url:"https://z3.ax1x.com/2021/06/17/2juLSx.jpg"},{id:4,url:"https://z3.ax1x.com/2021/06/17/2juHYR.jpg"}],isShowBg:0,count:.01,timeId:null}},mounted:function(){this.bgSwiper()},methods:{bgSwiper:function(){var t=this;this.timeId=setInterval((function(){t.isShowBg<t.bannerList.length-1?t.isShowBg++:t.isShowBg=0}),1e4)}},beforeDestroy:function(){clearInterval(this.timeId),this.timeId=null}},c=l,u=(i("ab04"),i("2877")),d=Object(u["a"])(c,a,r,!1,null,"1bb5a5ea",null),p=d.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("el-menu",{staticClass:"el-menu-demo",attrs:{router:"","default-active":t.$route.path,mode:"horizontal","background-color":"#fff","text-color":"#333","active-text-color":"#3F87DA"},on:{select:t.handleSelect}},[i("h1",[i("a",{staticClass:"logo",style:{backgroundImage:"url("+t.bg+")"},on:{click:function(e){return t.$router.push({path:"/"})}}})]),i("el-menu-item",{attrs:{index:"/index"}},[t._v("我的问卷")]),i("div",{staticClass:"user"},[t.hasLogin?i("el-dropdown",{on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("el-avatar",[t._v(t._s(t.username))])],1),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"logout"}},[t._v("注销登录")])],1)],1):i("span",{staticClass:"el-dropdown-link",on:{click:t.goLogin}},[i("el-avatar",[t._v("登录")])],1)],1),"/index"===t.$route.path||"/questionnaires"===t.$route.path?i("div",{staticClass:"search"},[i("div",[i("el-input",{attrs:{placeholder:"请输入问卷名进行搜索~",maxLength:"100"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.toSearch(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.toSearch},slot:"append"})],1)],1)]):t._e()],1)],1)},f=[],h=(i("ac1f"),i("841c"),i("b0c0"),i("bc3a")),_=i.n(h),g=i("1da1");i("96cf"),i("a9e3");function v(){return y.apply(this,arguments)}function y(){return y=Object(g["a"])(regeneratorRuntime.mark((function t(){var e,i,n,o,s,a,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage,i=!1,n=e.getItem("username.myblog"),o=Number(e.getItem("expiredTime.myblog")),s=(new Date).getTime(),a=e.getItem("refresh.myblog"),!(o>s)){t.next=11;break}i=!0,console.log("authorization access"),t.next=34;break;case 11:if(null===a){t.next=31;break}return t.prev=12,t.next=15,_.a.post("/api/token/refresh/",{refresh:a});case 15:r=t.sent,l=Date.parse(r.headers.date)+6e6,e.setItem("access.myblog",r.data.access),e.setItem("expiredTime.myblog",l),e.removeItem("refresh.myblog"),i=!0,console.log("authorization refresh"),t.next=29;break;case 24:t.prev=24,t.t0=t["catch"](12),e.clear(),i=!1,console.log("authorization err");case 29:t.next=34;break;case 31:e.clear(),i=!1,console.log("authorization exp");case 34:return console.log("authorization done"),t.abrupt("return",[i,n]);case 36:case"end":return t.stop()}}),t,null,[[12,24]])}))),y.apply(this,arguments)}var w=v,b=i("e762"),x={name:"Header",data:function(){return{bg:i("5fbe"),activeIndex:1,hasLogin:!1,search:"",avatar:"",username:"",username1:"",id:""}},methods:{handleSelect:function(t,e){console.log(t,e)},handleCommand:function(t){"logout"===t?this.logout():"createBlog"===t?this.$router.push({path:"/edit/blog"}):"toCenter"===t?this.$router.push({path:"/center/"+this.username}):"messageList"===t?this.$router.push({path:"/messageList"}):this.$message("click on item "+t)},goLogin:function(){this.$router.push({path:"/login",query:{from:this.$route.path}})},logout:function(){localStorage.clear(),this.$router.push({path:"/login"}),this.$notify.success({title:"登出成功",message:"欢迎下次光临"})},toIndex:function(){this.$router.push({path:"/index"})},toSearch:function(){if(""===this.search)this.$notify.warning({title:"别搞",message:"搜索不能为空哦"});else{var t=b["Base64"].encode("wen"+this.search+"juan");this.$router.push({path:"/search/"+t})}},myPre:function(){var t=this;w().then((function(e){t.hasLogin=e[0],e[0]&&_.a.get("/api/user/"+e[1]+"/").then((function(e){var i=e.data;t.username=i.username.substr(0,2).toUpperCase(),t.username1=i.username})).catch((function(e){t.$notify.error({title:"好像发生什么错误",message:e.message})}))}))}},mounted:function(){this.myPre()},watch:{$route:function(t,e){"Home"!==t.name&&"Index"!==t.name&&"Login"!==t.name&&"index"!==t.name||this.myPre()}}},q=x,S=(i("5743"),i("e8c8"),Object(u["a"])(q,m,f,!1,null,"2f3c9a30",null)),k=S.exports,$={name:"App",components:{Header:k,Swiper:p},provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},C=$,F=(i("034f"),Object(u["a"])(C,o,s,!1,null,null,null)),I=F.exports,B=(i("d3b7"),i("3ca3"),i("ddb0"),i("8c4f")),O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("LoginBlock")],1)},D=[],T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"card"},[i("div",[i("h2",[i("figure",{style:{backgroundImage:"url("+t.bg+")"}})]),i("el-form",{ref:"form",staticClass:"demo-form",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-width":"0"}},[i("el-form-item",{attrs:{prop:"user"}},[i("el-input",{attrs:{type:"text",placeholder:"请输入用户名",clearable:""},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}},[i("i",{staticClass:"el-input__icon iconfont el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),i("el-form-item",{attrs:{prop:"pass"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入密码",clearable:""},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitForm("form")}},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}},[i("i",{staticClass:"el-input__icon iconfont el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("登录")])],1)],1),i("div",{staticClass:"msg"},[t._v(" 没有账号？"),i("a",{on:{click:function(e){return t.$router.push({path:"/register"})}}},[t._v("立即注册>")])])])},z=[],E={name:"Login_Block",inject:["reload"],data:function(){var t=this,e=function(e,i,n){""===i?n(new Error("密码不能为空")):(""!==t.form.checkPass&&t.$refs.form.validateField("checkPass"),n())},n=function(t,e,i){""===e?i(new Error("用户名不能为空")):i()};return{bg:i("534f"),form:{user:"",pass:""},rules:{pass:[{validator:e,trigger:"blur"}],user:[{validator:n,trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$alert("请再仔细看一下","存在错误",{confirmButtonText:"确认"}).then((function(){e.$message({type:"info",message:"重新尝试"})})),console.log("error submit!!"),!1;e.signIn()}))},resetForm:function(t){this.$refs[t].resetFields()},signIn:function(){var t=this;_.a.post("/api/token/",{username:t.form.user,password:t.form.pass}).then((function(e){var i=localStorage,n=Date.parse(e.headers.date)+6e6;i.setItem("access.myblog",e.data.access),i.setItem("refresh.myblog",e.data.refresh),i.setItem("expiredTime.myblog",n),i.setItem("username.myblog",t.form.user),!0===t.$store.state.flag?(t.$store.commit("flag_false"),t.$router.push({path:"/fill/"+t.$store.state.url})):t.$router.push({path:"/index"}),location.reload()})).catch((function(e){console.log(e.response),t.$notify.error({title:"用户名不存在或密码错误！"})}))}}},j=E,A=(i("e408"),Object(u["a"])(j,T,z,!1,null,"e6137374",null)),L=A.exports,N={name:"Login",components:{LoginBlock:L,Header:k},methods:{}},V=N,Q=Object(u["a"])(V,O,D,!1,null,"1027f6ac",null),R=Q.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("RegisterBlock")],1)},M=[],U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"card"},[i("div",[i("h2",[i("figure",{style:{backgroundImage:"url("+t.bg+")"}})]),i("el-form",{ref:"form",staticClass:"demo-form",attrs:{model:t.form,"status-icon":"",rules:t.rules,"label-width":"0"}},[i("el-form-item",{attrs:{prop:"user"}},[i("el-input",{attrs:{type:"text",placeholder:"请输入用户名",clearable:""},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}},[i("i",{staticClass:"el-input__icon iconfont el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),i("el-form-item",{attrs:{prop:"pass"}},[i("el-input",{attrs:{type:"password",placeholder:"请输入密码",clearable:""},model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}},[i("i",{staticClass:"el-input__icon iconfont el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),i("el-form-item",{attrs:{prop:"checkPass"}},[i("el-input",{attrs:{type:"password",placeholder:"请再次输入密码"},model:{value:t.form.checkPass,callback:function(e){t.$set(t.form,"checkPass",e)},expression:"form.checkPass"}},[i("i",{staticClass:"el-input__icon iconfont el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("注册")])],1)],1),i("div",{staticClass:"msg"},[t._v(" 已有账号？"),i("a",{on:{click:function(e){return t.$router.push({path:"/login"})}}},[t._v("立即登录>")])])])},H=[],G={name:"Register_Block",data:function(){var t=this,e=function(t,e,i){""===e?i(new Error("你的用户名呢")):i()},n=function(e,i,n){""===i?n(new Error("你的密码呢")):(""!==t.form.checkPass&&t.$refs.form.validateField("checkPass"),n())},o=function(e,i,n){""===i?n(new Error("再输一次密码呗")):i!==t.form.pass?n(new Error("两次输入密码不一致!")):n()};return{bg:i("534f"),form:{user:"",pass:"",checkPass:""},Response:null,rules:{user:[{validator:e,trigger:"blur"}],pass:[{validator:n,trigger:"blur"}],checkPass:[{validator:o,trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$alert("宝批龙大不同，再仔细看一哈","存在错误",{confirmButtonText:"我错了"}).then((function(){e.$message({type:"info",message:"再给你一次机会"})})),console.log("error submit!!"),!1;e.signup()}))},resetForm:function(t){this.$refs[t].resetFields()},signup:function(){var t=this;_.a.post("/api/user/",{username:this.form.user,password:this.form.pass}).then((function(e){t.Response=e.data,alert("用户注册成功，快去登录吧！"),t.$router.push({path:"/login"})})).catch((function(e){console.log(e.response);var i="";if(void 0!==e.response.data.username&&e.response.data.username.length>0){var n=1;i=e.response.data.username[0];while(n<e.response.data.username.length)i=i+"\r\n"+e.response.data.username[n],n++}if(void 0!==e.response.data.password&&e.response.data.password.length>0){n=1;i=e.response.data.password[0];while(n<e.response.data.password.length)i=i+"\r\n"+e.response.data.password[n],n++}t.$notify.error({title:"好像发生什么错误",message:i})}))}}},K=G,J=(i("0427"),Object(u["a"])(K,U,H,!1,null,"326d59e2",null)),W=J.exports,Z={name:"Register",components:{RegisterBlock:W,Header:k},methods:{}},Y=Z,X=Object(u["a"])(Y,P,M,!1,null,"3861441a",null),tt=X.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",{staticClass:"main"},[i("el-container",[i("el-aside",{staticStyle:{height:"fit-content"},attrs:{width:"23%"}},[i("el-container",{staticClass:"class"},[i("div",{staticStyle:{"margin-left":"0px"},on:{click:function(e){return t.$router.push({path:"/create"})}}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-edit"})]),i("h4",[t._v("创建问卷")])],1)]),i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":t.$route.path}},[i("el-menu-item",{attrs:{index:"/questionnaires"},on:{click:function(e){return t.toQuestionnaire()}}},[i("i",{staticClass:"el-icon-document"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人问卷")])]),i("el-menu-item",{attrs:{index:"/recycle"},on:{click:function(e){return t.toRecycleBin()}}},[i("i",{staticClass:"el-icon-delete"}),i("span",{attrs:{slot:"title"},slot:"title"},[t._v("回收站")])])],1)],1),i("el-main",[i("router-view")],1)],1)],1),i("el-dialog",{staticClass:"dialog",attrs:{title:"创建问卷",visible:t.dialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialog=e}}},[i("el-form",{ref:"form",attrs:{model:t.initQ,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷标题",required:""}},[i("el-input",{attrs:{placeholder:"请输入问卷标题"},model:{value:t.initQ.title,callback:function(e){t.$set(t.initQ,"title",e)},expression:"initQ.title"}})],1),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷描述"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入问卷描述",rows:"5"},model:{value:t.initQ.content,callback:function(e){t.$set(t.initQ,"content",e)},expression:"initQ.content"}})],1)],1),i("div",{staticStyle:{width:"100%","text-align":"right"}},[i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.addQ()}}},[t._v("确定")])],1)],1)],1)},it=[],nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"questionnaire",attrs:{direction:"vertical"}},[i("div",[i("el-dropdown",{staticStyle:{float:"right","margin-right":"7px","margin-top":"7px"},on:{command:t.sort}},[i("span",{staticClass:"el-dropdown-link",staticStyle:{color:"grey",float:"left","font-size":"17px"}},[t._v(" 选择排序方式"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"-create_date"}},[t._v("创建时间")]),i("el-dropdown-item",{attrs:{command:"-answer_num"}},[t._v("答卷数量")]),i("el-dropdown-item",{attrs:{command:"-last_shared_date"}},[t._v("最后分享时间")])],1)],1),t._m(0),t.info.length?t._e():i("div",{staticClass:"not_found"},[t._v(" 快去创建一个新的问卷吧 摸鱼仔~ "),i("i",{staticClass:"el-icon-cold-drink"})]),t._l(t.info.slice(4*(t.page-1),4*t.page),(function(e,n){return i("div",{key:n,staticClass:"a_block"},[i("h1",{on:{click:function(i){return t.toCheck(e.id)}}},["closed"===e.status?i("el-tag",{staticClass:"label"},[t._v("未发布")]):t._e(),"shared"===e.status?i("el-tag",{staticClass:"label",attrs:{type:"success"}},[t._v("已发布")]):t._e(),i("span",{staticStyle:{display:"inline-block",width:"3px"}}),i("a",[t._v(t._s(e.title))])],1),i("div",{staticStyle:{float:"right !important"}},[i("v-icon",{staticStyle:{"vertical-align":"center"},attrs:{small:""}},[t._v("mdi-file-document-multiple-outline")]),t._v(" "+t._s(e.answer_num)+" ")],1),i("div",{staticClass:"intro"},[t._v(" "+t._s(e.content)+" ")]),i("div",{staticClass:"footer"},[i("div",{staticClass:"op cur_def"},[i("ul",["closed"===e.status?i("li",{on:{click:function(i){return t.Start(e)}}},[i("v-icon",[t._v("mdi-motion-play-outline")]),t._v(" 发布")],1):t._e(),"shared"===e.status?i("li",{on:{click:function(i){return t.Close(e.id)}}},[i("v-icon",[t._v("mdi-stop-circle-outline")]),t._v(" 停止")],1):t._e(),i("li",{on:{click:function(i){return t.toEdit(e)}}},[i("v-icon",[t._v("mdi-square-edit-outline")]),t._v(" 编辑")],1),i("li",{on:{click:function(i){return t.Copy(e.id)}}},[i("v-icon",[t._v("mdi-content-copy")]),t._v(" 复制")],1),i("li",{on:{click:function(i){return t.showSharePage(e)}}},[i("v-icon",[t._v("mdi-share-variant-outline")]),t._v(" 分享")],1),i("li",{on:{click:function(i){return t.toChart(e)}}},[i("v-icon",[t._v("mdi-list-status")]),t._v(" 统计")],1),i("li",{on:{click:function(i){return t.Delete(e.id,e.status)}}},[i("v-icon",[t._v("mdi-delete-variant")]),t._v(" 删除")],1)]),i("div",{staticClass:"created"},[t._v(" "+t._s(t.formatted_time(e.create_date))+" ")])])]),i("div",{staticClass:"clear_both"})])})),0!==t.pageLength?i("div",{staticClass:"text-center"},[i("v-app",[i("v-container",[i("v-row",{staticStyle:{"justify-content":"center"},attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"8"}},[i("v-container",{staticClass:"max-width"},[i("v-pagination",{attrs:{length:t.pageLength,"total-visible":t.pageVisible},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)],1)],1):t._e(),i("el-dialog",{staticClass:"share_window",attrs:{title:"分享问卷",visible:t.is_show,"close-on-click-modal":!0,"append-to-body":""},on:{"update:visible":function(e){t.is_show=e},opened:t.makeQrcode}},[i("el-form",{ref:"form",attrs:{model:t.shareInfo,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷链接"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{attrs:{readonly:""},model:{value:t.shareInfo.url,callback:function(e){t.$set(t.shareInfo,"url",e)},expression:"shareInfo.url"}})],1),i("el-col",{attrs:{span:8}},[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shareInfo.url,expression:"shareInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.copyError,expression:"copyError",arg:"error"}],staticStyle:{"margin-left":"5px"}},[t._v("复制")]),i("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.openShareUrl}},[t._v("打开")])],1)],1)],1),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"二维码"}},[i("canvas",{staticStyle:{width:"150px",height:"150px","margin-left":"35%"},attrs:{id:"canvas"}})])],1)],1)],2)])},ot=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h2",{staticClass:"title",staticStyle:{"min-width":"800px"}},[t._v("问卷列表")])])}],st=i("d055"),at=i.n(st),rt={inject:["reload"],components:{QRCode:at.a},data:function(){return{search:"",info:[],page:1,itemPerpage:4,pageLength:0,pageVisible:7,is_show:!1,shareInfo:{url:""},sort_way:"hh"}},methods:{sort:function(t){var e=this;_.a.put("api/questionnaire/sort/",{keyword:t},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){e.info=t.data,e.pageLength=parseInt((e.info.length+e.itemPerpage-1)/e.itemPerpage)})).catch((function(t){e.$notify.error({title:"出错啦",message:"排序失败"})}))},formatted_time:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},toEdit:function(t){if(0===t.answer_num){var e=b["Base64"].encode("moyu"+t.id+"wenjuan");this.$router.push({path:"/edit/"+e})}else{var i=this;this.$confirm("请先选择清空答卷或者复制问卷","此问卷已存在答卷",{confirmButtonText:"清空答卷",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(t.id),_.a.put("/api/questionnaire/delete-all-answer/",{id:t.id},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){i.reload(),i.$notify.success({title:"芜湖",message:"已清空答卷"})})).catch((function(t){i.$notify.error({title:"出错啦",message:"清空失败"})}))}))}},toChart:function(t){if(0===t.answer_num)this.$notify.warning({title:"此问卷暂无答卷",message:"请先回收问卷"});else{var e=b["Base64"].encode("moyu"+t.id+"wenjuan"),i=window.location.origin+"/charts/"+e;window.open(i)}},showSharePage:function(t){if("shared"===t.status){this.is_show=!0;var e=b["Base64"].encode("moyu"+t.id+"wenjuan"),i=window.location.origin+"/fill/"+e;this.shareInfo.url=i}else this.$notify.warning({title:"问卷关闭",message:"请先发布问卷"})},makeQrcode:function(){var t=document.getElementById("canvas");at.a.toCanvas(t,this.shareInfo.url)},copySuccess:function(){this.$message({type:"success",message:"已复制链接到剪切板"})},copyError:function(){this.$message({type:"error",message:"复制失败"})},openShareUrl:function(){window.open(this.shareInfo.url)},toCheck:function(t){var e=b["Base64"].encode("moyu"+t+"wenjuan"),i=window.location.origin+"/check/"+e;window.open(i)},handleCommand:function(t){"b"===t&&this.showSharePage()},Start:function(t){var e=this;0===t.question_num?this.$notify.warning({title:"无法发布",message:"问卷为空，请先编辑"}):_.a.put("api/questionnaire/"+t.id+"/status/",{status:"shared"}).then((function(i){e.$notify.success({title:"问卷成功发布!",message:"您可以进行分享"}),t.status="shared",e.showSharePage(t)})).catch((function(t){e.$notify.error({title:"出错啦",message:"发布问卷失败"})}))},Close:function(t){var e=this;_.a.put("api/questionnaire/"+t+"/status/",{status:"closed"}).then((function(t){e.$notify.success({title:"问卷已关闭!",message:""}),e.reload()})).catch((function(t){e.$notify.error({title:"出错啦",message:"关闭问卷失败"})}))},Copy:function(t){var e=this;_.a.post("/api/questionnaire/copy/",{id:t}).then((function(t){e.reload(),e.$notify.success({title:"芜湖",message:"复制成功"})})).catch((function(t){e.$notify.error({title:"出错啦",message:"复制失败"})}))},Delete:function(t,e){if("shared"===e)this.$notify.warning({title:"桥豆麻袋",message:"请先关闭问卷"});else{var i=this;this.$confirm("您确定要删除该问卷吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){_.a.put("api/questionnaire/"+t+"/status/",{status:"deleted"}).then((function(t){i.$notify.success({title:"问卷成功删除!",message:"您可以到回收站中恢复问卷"}),i.reload()})).catch((function(t){i.$notify.error({title:"出错啦",message:"删除问卷失败"})}))}))}}},mounted:function(){var t=this;w().then((function(e){e[0]&&_.a.get("/api/user/"+e[1]+"/questionnaire/").then((function(e){t.info=e.data,t.pageLength=parseInt((t.info.length+t.itemPerpage-1)/t.itemPerpage)})).catch((function(e){t.$notify.error({title:"好像发生了什么错误",message:e.message})}))}))}},lt=rt,ct=(i("afb8"),i("0f97"),i("6544")),ut=i.n(ct),dt=i("7496"),pt=i("62ad"),mt=i("a523"),ft=i("132d"),ht=i("891e"),_t=i("0fd9"),gt=Object(u["a"])(lt,nt,ot,!1,null,"edb72e6a",null),vt=gt.exports;ut()(gt,{VApp:dt["a"],VCol:pt["a"],VContainer:mt["a"],VIcon:ft["a"],VPagination:ht["a"],VRow:_t["a"]});var yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"questionnaire",attrs:{direction:"vertical"}},[i("div",[i("h2",{staticClass:"title",staticStyle:{"min-width":"800px"}},[t._v("回收站")]),t.info.length?t._e():i("div",{staticClass:"not_found"},[t._v(" 别看啦 这里啥也没有 "),i("i",{staticClass:"el-icon-cold-drink"})]),t._l(t.info.slice(4*(t.page-1),4*t.page),(function(e,n){return i("div",{key:n,staticClass:"a_block"},[i("h1",{on:{click:function(i){return t.toDiscuss(e.id)}}},[i("el-tag",{staticClass:"label",attrs:{type:"danger"}},[t._v("已删除")]),i("span",{staticStyle:{display:"inline-block",width:"3px"}}),i("a",[t._v(t._s(e.title))])],1),i("div",{staticStyle:{float:"right !important"}},[i("v-icon",{staticStyle:{"vertical-align":"center"},attrs:{small:""}},[t._v("mdi-file-document-multiple-outline")]),t._v(" "+t._s(e.answer_num)+" ")],1),i("div",{staticClass:"intro"},[t._v(t._s(e.content))]),i("div",{staticClass:"footer"},[i("div",{staticClass:"op cur_def"},[i("ul",[i("li",{on:{click:function(i){return t.Return(e.id)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-autorenew")]),t._v(" 恢复")],1),i("li",{on:{click:function(i){return t.Delete4ever(e.id)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-delete-off-outline")]),t._v(" 彻底删除")],1)]),i("div",{staticClass:"created"},[t._v(" "+t._s(t.formatted_time(e.create_date))+" ")])])]),i("div",{staticClass:"clear_both"})])})),0!==t.pageLength?i("div",{staticClass:"text-center"},[i("v-app",[i("v-container",[i("v-row",{staticStyle:{"justify-content":"center"},attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"8"}},[i("v-container",{staticClass:"max-width"},[i("v-pagination",{attrs:{length:t.pageLength,"total-visible":t.pageVisible},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)],1)],1):t._e()],2)])},wt=[],bt={inject:["reload"],data:function(){return{info:[],page:1,itemPerpage:4,pageLength:0,pageVisible:7}},methods:{formatted_time:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},toDiscuss:function(t){this.$router.push({path:"/discuss/"+t})},toCenter:function(t){this.$router.push({path:"/center/"+t})},handleCommand:function(t){this.$message("click on item "+t)},Return:function(t){var e=this;_.a.put("api/questionnaire/"+t+"/status/",{status:"closed"}).then((function(t){e.$notify.success({title:"问卷成功恢复!",message:"您可以进行查看"}),e.reload()})).catch((function(t){e.$notify.error({title:"出错啦",message:"恢复问卷失败"})}))},Delete4ever:function(t){var e=this;this.$confirm("此操作将永久删除该问卷, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){_.a.delete("api/questionnaire/"+t+"/").then((function(t){e.$notify.success({title:"删除成功!",message:"问卷已彻底删除"}),e.reload()})).catch((function(t){e.$notify.error({title:"出错啦",message:"删除问卷失败"})}))}))}},mounted:function(){var t=this;w().then((function(e){e[0]&&_.a.get("/api/user/"+e[1]+"/recycle/").then((function(e){t.info=e.data,t.pageLength=parseInt((t.info.length+t.itemPerpage-1)/t.itemPerpage),console.log(t.info)})).catch((function(e){t.$notify.error({title:"好像发生了什么错误",message:e.message})}))}))}},xt=bt,qt=(i("e830"),i("db03"),Object(u["a"])(xt,yt,wt,!1,null,"550b9fd2",null)),St=qt.exports;ut()(qt,{VApp:dt["a"],VCol:pt["a"],VContainer:mt["a"],VIcon:ft["a"],VPagination:ht["a"],VRow:_t["a"]});var kt={name:"Index",components:{Questionnaire:vt,Header:k},data:function(){return{info:{},avatar:null,name:"",content:"",uid:0,identity:localStorage.getItem("identity.myblog"),dialog:!1,initQ:{id:0,title:"",flag:0,content:"求求各位姥爷填一下小的问卷吧"}}},methods:{toBook:function(){this.$router.push({path:"/book"})},editQues:function(){this.$router.push({path:"/edit"})},toGroupIndex:function(){this.$router.push({path:"/group/index"})},toDiscuss:function(){this.$router.push({path:"/group/discuss"})},toQuestionnaire:function(){this.$router.push({path:"/questionnaires"}),console.log(this.$route.path)},toRecycleBin:function(){this.$router.push({path:"/recycle"})},add:function(){this.dialog=!0,this.initQ={id:0,title:"",flag:0,content:"求求各位姥爷填一下小的问卷吧"}},addQ:function(){if(""!==this.initQ.title){var t=this;w().then((function(e){e[0]?_.a.post("api/questionnaire/",{title:t.initQ.title,content:t.initQ.content},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){console.log(e.data),t.dialog=!1;var i=b["Base64"].encode("moyu"+e.data.id+"wenjuan");t.$router.push({path:"/edit/"+i})})).catch((function(e){t.dialog=!1,t.$notify.error({title:"出错啦",message:"创建问卷失败"})})):(t.dialog=!1,t.$notify.error({title:"创建问卷失败",message:"请先登录！"}))}))}else this.$message({type:"error",message:"标题不能为空"})}},mounted:function(){var t=this;w().then((function(e){e[0]||t.$router.push({path:"/login"})}))}},$t=kt,Ct=(i("b85e"),Object(u["a"])($t,et,it,!1,null,"7edb1fcf",null)),Ft=Ct.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("div",{staticClass:"button-header"},[i("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.getPdf()}}},[t._v("导出pdf")])],1),i("div",{staticClass:"questionnaire",attrs:{id:"pdfDom"}},[i("h1",{staticClass:"title"},[t._v(t._s(t.info.title))]),i("div",{staticClass:"content"},[t._v(" "+t._s(t.info.content))]),i("el-divider"),t._l(t.info.question_list,(function(e,n){return t.Show[n]?i("div",{key:n,staticClass:"question_block"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[t.info.is_show_question_num?i("span",[t._v(t._s(n+1+". "))]):t._e(),t._v(" "+t._s(e.title)+" "),i("span",{staticStyle:{color:"#F56C6C"}},[e.is_must_answer?i("span",[t._v("*")]):t._e()]),"single-choice"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v(" [单选题]")]):t._e(),"multiple-choice"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v(" [多选题]")]):t._e(),"completion"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v(" [填空题]")]):t._e(),"scoring"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v(" [评分题]")]):t._e(),"position"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v("[定位题]")]):t._e(),e.is_scoring?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("（"+t._s(e.question_score)+"分）")]):t._e()])]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"5px"}},[t._v(" "+t._s(e.content)+" ")]),"single-choice"===e.type?i("v-app",{staticClass:"choice"},[i("v-container",{staticClass:"px-0",attrs:{fluid:""}},[i("div",{staticStyle:{float:"left"}},[i("v-radio-group",{on:{change:function(i){return t.solveSin(n,e.answer)}},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}},t._l(e.option_list,(function(n){return i("div",[i("div",{staticStyle:{float:"left","min-width":"460px","max-width":"560px"}},[i("v-radio",{key:n.id,staticStyle:{float:"left","margin-bottom":"8px"},attrs:{label:n.title,disabled:n.limit_answer_number-n.answer_num<=0&&n.is_limit_answer}}),n.is_limit_answer?i("span",{staticStyle:{"margin-left":"10%"}},[t._v("剩余 "+t._s(n.limit_answer_number-n.answer_num<=0?0:n.limit_answer_number-n.answer_num))]):t._e()],1),e.is_show_result?i("div",{staticStyle:{float:"right","padding-left":"30px"}},[i("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v(t._s(n.answer_num)+"票("+t._s(n.percent_string)+")")])]):t._e()])})),0)],1)])],1):t._e(),"multiple-choice"===e.type?i("v-app",{staticClass:"choice"},[i("v-container",{attrs:{fluid:""}},t._l(e.option_list,(function(o){return i("div",{staticStyle:{float:"left"}},[i("div",{staticStyle:{float:"left","min-width":"460px","max-width":"560px"}},[i("v-checkbox",{key:o.id,attrs:{label:o.title,"hide-details":""},on:{change:function(i){return t.solveMul(n,e.option_list)}},model:{value:o.is_attr_limit,callback:function(e){t.$set(o,"is_attr_limit",e)},expression:"optionItem.is_attr_limit"}})],1),e.is_show_result?i("div",{staticStyle:{float:"right","padding-left":"30px"}},[i("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v(t._s(o.answer_num)+"票("+t._s(o.percent_string)+")")])]):t._e()])})),0)],1):t._e(),"completion"===e.type?i("v-app",{staticClass:"choice"},[i("v-text-field",{attrs:{label:"请在此输入答案~","single-line":""},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}})],1):t._e(),"scoring"===e.type?i("v-app",{staticClass:"choice",staticStyle:{"margin-top":"20px"}},[i("div",{staticStyle:{display:"inline-block"}},[i("v-rating",{staticStyle:{float:"left !important"},attrs:{color:"primary","empty-icon":"mdi-star-outline","full-icon":"mdi-star","half-icon":"mdi-star-half-full",hover:"",length:e.option_list.length,size:"30"},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}}),i("div",{staticStyle:{margin:"6px 20px",float:"left !important","font-size":"22px"}},[t._v(t._s(e.answer))])],1)]):t._e(),"position"===e.type?i("v-app",{staticClass:"choice"},[i("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:t.getLocation}},[t.location&&!t.positioning?i("span",[t._v(t._s(t.location["省份"]+" "+t.location["城市"]))]):t._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.location&&!t.positioning,expression:"!location && !positioning"}]},[t._v("点击获取位置")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.positioning,expression:"positioning"}]},[i("i",{staticClass:"el-icon-loading"}),t._v(" 等待获取中 "+t._s(t.countDown)+" 秒")])])],1):t._e()],1):t._e()})),i("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:t.click}},[t._v("提交")])],2)])},Bt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"reminder"},[i("h4",[t._v("摸小鱼温馨提示：只能预览，不能提交哦~")])])}],Ot=i("b85c");function Dt(t){var e=document.createElement("script");e.src="http://api.map.baidu.com/api?v=2.0&ak=cTsGIgzbOe4eeNykwqYy6m0lVHvWTtnF&callback="+t,document.body.appendChild(e)}var Tt={name:"check",components:{},data:function(){return{htmlTitle:"",single:0,multiple:[],questionnaire_id:1,content:"",info:"",answer_list:[],userLogin:localStorage.getItem("username.myblog"),BMap:null,geolocation:null,positioning:!1,positioningInterval:null,countDown:30,location:null,Show:[],sTmp:[],mTmp:[],f:[],rep:[]}},mounted:function(){var t=this;window.initBaiduMapScript=function(){t.BMap=window.BMap},Dt("initBaiduMapScript");var e=this,i=e.$route.params.text;i=b["Base64"].decode(i),i=i.substring(4,i.length-7),_.a.get("/api/questionnaire/"+parseInt(i)+"/fill_or_preview/",{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){e.info=t.data,e.init(),console.log(e.Show),e.htmlTitle=t.data.title,""+e.info.author.username!==""+e.userLogin&&(e.$router.push({path:"/index"}),e.$notify.error({title:"您无权预览此问卷"}))})).catch((function(t){e.$notify.error({title:"好像发生了什么错误",message:t.message})}))},methods:{init:function(){var t,e=this,i=Object(Ot["a"])(e.info.question_list);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.sTmp.push({last:null}),this.rep.push(n.relate_logic_option),0!==n.relate_logic_option.length?this.Show.push(!1):this.Show.push(!0);var o,s=[],a=[],r=Object(Ot["a"])(n.option_list);try{for(r.s();!(o=r.n()).done;){var l=o.value;s.push({rlq:l.related_logic_question,select:!1}),a.push({select:!1})}}catch(c){r.e(c)}finally{r.f()}this.f.push(s),this.mTmp.push(a)}}catch(c){i.e(c)}finally{i.f()}console.log(this.f),console.log(this.rep)},cancelOption:function(t,e){var i=[];i.push({x:t,y:e}),this.f[t][e].select=!1;while(i.length>0){var n=i.shift();if(0!==this.f[n.x][n.y].rlq.length){var o,s=Object(Ot["a"])(this.f[n.x][n.y].rlq);try{for(s.s();!(o=s.n()).done;){var a=o.value,r=this.Show[a.ordering-1];if(this.rep[a.ordering-1].length<=1)this.Show[a.ordering-1]=!1;else{var l,c=!1,u=Object(Ot["a"])(this.rep[a.ordering-1]);try{for(u.s();!(l=u.n()).done;){var d=l.value;this.f[d.question_ordering-1][d.ordering-1].select&&(c=!0)}}catch(m){u.e(m)}finally{u.f()}c||(this.Show[a.ordering-1]=!1)}if(r&&!this.Show[a.ordering-1])for(var p=0;p<this.info.question_list[a.ordering-1].option_list.length;p++)this.f[a.ordering-1][p].select&&(this.f[a.ordering-1][p].select=!1,i.push({x:a.ordering-1,y:p}))}}catch(m){s.e(m)}finally{s.f()}}}},reSetF:function(){var t,e=0,i=Object(Ot["a"])(this.info.question_list);try{for(i.s();!(t=i.n()).done;){var n=t.value;if("single-choice"===n.type)""===n.answer&&void 0===n.answer||void 0!==this.f[e][n.answer]&&(this.f[e][n.answer].select=!0);else if("multiple-choice"===n.type){var o,s=0,a=Object(Ot["a"])(n.option_list);try{for(a.s();!(o=a.n()).done;){var r=o.value;r.is_attr_limit&&void 0!==this.f[e][s]&&(this.f[e][s].select=!0),s++}}catch(l){a.e(l)}finally{a.f()}}e++}}catch(l){i.e(l)}finally{i.f()}},addOption:function(t,e){this.reSetF();var i=[];i.push({x:t,y:e}),this.f[t][e].select=!0;while(i.length>0){var n=i.shift();if(console.log("!!!"),console.log(n.x,n.y),0!==this.f[n.x][n.y].rlq.length){var o,s=Object(Ot["a"])(this.f[n.x][n.y].rlq);try{for(s.s();!(o=s.n()).done;){var a=o.value;console.log(a.ordering-1);var r=this.Show[a.ordering-1];if(console.log("f1",r),!r){this.Show[a.ordering-1]=!0;for(var l=0;l<this.info.question_list[a.ordering-1].option_list.length;l++)console.log("pp",l),console.log(a.ordering-1,l),console.log("this.f[q.ordering - 1][pp].select",this.f[a.ordering-1][l].select),this.f[a.ordering-1][l].select&&i.push({x:a.ordering-1,y:l})}}}catch(c){s.e(c)}finally{s.f()}}}},solveSin:function(t,e){console.log(t,e),null!==this.sTmp[t].last&&this.cancelOption(t,this.sTmp[t].last),this.sTmp[t].last=e,this.f[t][e].select=!0,this.addOption(t,e)},solveMul:function(t,e){var i=0;for(i=0;i<e.length;i++)if(e[i].is_attr_limit!==this.mTmp[t][i].select){this.f[t][i].select=e[i].is_attr_limit,this.mTmp[t][i].select=e[i].is_attr_limit;break}console.log(t,i,this.mTmp[t][i].select),this.mTmp[t][i].select?this.addOption(t,i):this.cancelOption(t,i)},click:function(){this.$notify.warning({title:"当前为预览",message:"无法提交"})},resetPositioning:function(){this.positioning=!1,this.location=null,this.countDown=30,clearInterval(this.positioningInterval)},getLocation:function(){var t=this;this.location||this.positioning||this.$confirm("请选择是否同意获取定位","该题需要获取您的地理位置",{confirmButtonText:"同意",cancelButtonText:"取消",type:"warning"}).then((function(){t._getLocation()}))},_getLocation:function(){var t=this,e=this;if(e.geolocation=new e.BMap.Geolocation,e.geolocation){e.geolocation.enableSDKLocation(),this.positioning=!0,this.positioningInterval=setInterval((function(){0===t.countDown?(t.countDown=30,clearInterval(t.positioningInterval)):t.countDown--}),1e3);var i={enableHighAccuracy:!0,timeout:30,maximumAge:0};e.geolocation.getCurrentPosition((function(t){e.resetPositioning();var i=e.geolocation.getStatus(),n="由于未知错误而无法检索设备的位置",o="error";switch(i){case 0:if(o="success",n="获取地理位置定位请求成功",t){var s=0,a=0,r="未知",l="未知";t.point&&(s=t.point.lat,a=t.point.lng),t.address&&(r=t.address.province,l=t.address.city),e.location={"省份":r,"城市":l,"经度":s,"纬度":a}}else n="由于未知错误而无法检索设备的位置";break;case 2:n="由于未知错误而无法检索设备的位置";break;case 4:case 5:n="位置服务请求非法";break;case 6:n="应用程序没有使用位置服务的权限";break;case 7:n="网络不可用或者无法连接到获取位置信息的卫星";break;case 8:n="无法在指定的最大超时间隔内检索位置信息";break;default:n="由于未知错误而无法检索设备的位置";break}e.$$notify[o]({key:NotificationKey,message:"提示",description:n})}),i)}else e.$$notify.error({key:NotificationKey,message:"提示",description:"您的浏览器不支持地理位置服务"})}}},zt=Tt,Et=(i("a50e"),i("ec0c"),i("8336")),jt=i("ac7c"),At=i("67b6"),Lt=i("43a6"),Nt=i("1d4d"),Vt=i("8654"),Qt=Object(u["a"])(zt,It,Bt,!1,null,"4a0818e9",null),Rt=Qt.exports;ut()(Qt,{VApp:dt["a"],VBtn:Et["a"],VCheckbox:jt["a"],VContainer:mt["a"],VRadio:At["a"],VRadioGroup:Lt["a"],VRating:Nt["a"],VTextField:Vt["a"]});var Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[!1===t.finish&&t.is_open&&!1===t.info.is_locked&&1===t.timeStamp&&t.info.is_end_time?i("a-affix",{staticStyle:{"text-align":"center"}},[i("div",{staticStyle:{padding:"20px","background-color":"#fdf1f1","font-size":"22px",color:"#ff0000"}},[i("h3",[t._v("考试剩余时间："+t._s(t.count_down))])])]):t._e(),!1===t.finish?i("div",[!1===t.info.is_locked?i("div",{staticClass:"questionnaire"},[i("h1",{staticClass:"title"},[t._v(t._s(t.info.title))]),2===t.timeStamp?i("div",{staticClass:"content"},[t._v(" 很抱歉，此问卷将于 "+t._s(t.startTime)+" 开放！")]):t._e(),3===t.timeStamp?i("div",{staticClass:"content"},[t._v(" 很抱歉，此问卷已于 "+t._s(t.endTime)+" 结束！")]):t._e(),4===t.timeStamp?i("div",{staticClass:"content"},[t._v(" 恭喜，您已成功提交此问卷！")]):t._e(),5===t.timeStamp?i("div",{staticClass:"content"},[t._v(" 报歉，此问卷限额已满无法填写！")]):t._e(),t.canSubmit?t._e():i("div",{staticClass:"content",staticStyle:{color:"#ea0a1a"}},[t._v(" 报歉，此问卷限额已满，无法提交！")]),1!==t.timeStamp?i("div",{staticClass:"line"}):t._e(),1!==t.timeStamp?i("el-button",{attrs:{type:"primary"},on:{click:t.toIndex}},[t._v("确定")]):t._e(),1===t.timeStamp?i("div",{staticClass:"content"},[t._v(" "+t._s(t.info.content))]):t._e(),1===t.timeStamp?i("el-divider"):t._e(),t._l(t.info.question_list,(function(e,n){return 1===t.timeStamp&&t.Show[n]?i("div",{key:n,staticClass:"question_block"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[t.info.is_show_question_num?i("span",[t._v(t._s(n+1+". "))]):t._e(),t._v(" "+t._s(e.title)+" "),i("span",{staticStyle:{color:"#F56C6C"}},[e.is_must_answer?i("span",[t._v("*")]):t._e()]),"single-choice"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v("[单选题]")]):t._e(),"multiple-choice"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v("[多选题]")]):t._e(),"completion"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v("[填空题]")]):t._e(),"scoring"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v("[评分题]")]):t._e(),"position"===e.type?i("span",{staticStyle:{color:"lightgrey"}},[t._v("[定位题]")]):t._e(),e.is_scoring?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("（"+t._s(e.question_score)+"分）")]):t._e()])]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"5px"}},[t._v(" "+t._s(e.content)+" ")]),"single-choice"===e.type?i("v-app",{staticClass:"choice"},[i("v-container",{staticClass:"px-0",attrs:{fluid:""}},[i("div",{staticStyle:{float:"left"}},[i("v-radio-group",{on:{change:function(i){return t.solveSin(n,e.answer)}},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}},t._l(e.option_list,(function(n){return i("div",[i("div",{staticStyle:{float:"left","min-width":"460px","max-width":"560px"}},[i("v-radio",{key:n.id,staticStyle:{float:"left","margin-bottom":"8px"},attrs:{label:n.title,disabled:n.limit_answer_number-n.answer_num<=0&&n.is_limit_answer}}),n.is_limit_answer?i("span",{staticStyle:{"margin-left":"10%"}},[t._v("剩余 "+t._s(n.limit_answer_number-n.answer_num<=0?0:n.limit_answer_number-n.answer_num))]):t._e()],1),e.is_show_result?i("div",{staticStyle:{float:"right","padding-left":"30px"}},[i("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v(t._s(n.answer_num)+"票("+t._s(n.percent_string)+")")])]):t._e()])})),0)],1)])],1):t._e(),"multiple-choice"===e.type?i("v-app",{staticClass:"choice"},[i("v-container",{attrs:{fluid:""}},t._l(e.option_list,(function(o){return i("div",{staticStyle:{float:"left"}},[i("div",{staticStyle:{float:"left","min-width":"460px","max-width":"560px"}},[o.is_limit_answer?i("span",{staticStyle:{"margin-right":"70%",float:"right"}},[t._v("剩余 "+t._s(o.limit_answer_number-o.answer_num<=0?0:o.limit_answer_number-o.answer_num))]):t._e(),i("v-checkbox",{key:o.id,attrs:{label:o.title,disabled:o.limit_answer_number-o.answer_num<=0&&o.is_limit_answer,"hide-details":""},on:{change:function(i){return t.solveMul(n,e.option_list)}},model:{value:o.is_attr_limit,callback:function(e){t.$set(o,"is_attr_limit",e)},expression:"optionItem.is_attr_limit"}})],1),e.is_show_result?i("div",{staticStyle:{float:"right","padding-left":"30px"}},[i("span",{staticStyle:{color:"red","font-size":"18px"}},[t._v(t._s(o.answer_num)+"票("+t._s(o.percent_string)+")")])]):t._e()])})),0)],1):t._e(),"completion"===e.type?i("v-app",{staticClass:"choice"},[i("v-text-field",{attrs:{label:"请在此输入答案~","single-line":""},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}})],1):t._e(),"scoring"===e.type?i("v-app",{staticClass:"choice",staticStyle:{"margin-top":"20px"}},[i("div",{staticStyle:{display:"inline-block"}},[i("v-rating",{staticStyle:{float:"left !important"},attrs:{color:"primary","empty-icon":"mdi-star-outline","full-icon":"mdi-star","half-icon":"mdi-star-half-full",hover:"",length:e.option_list.length,size:"30"},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}}),i("div",{staticStyle:{margin:"6px 20px",float:"left !important","font-size":"22px"}},[t._v(t._s(e.answer))])],1)]):t._e(),"position"===e.type?i("v-app",{staticClass:"choice"},[i("v-btn",{staticClass:"ma-2",attrs:{outlined:"",color:"indigo"},on:{click:t.getLocation}},[t.location&&!t.positioning?i("span",[t._v(t._s(t.location["省份"]+" "+t.location["城市"]))]):t._e(),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.location&&!t.positioning,expression:"!location && !positioning"}]},[t._v("点击获取位置")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.positioning,expression:"positioning"}]},[i("i",{staticClass:"el-icon-loading"}),t._v(" 等待获取中 "+t._s(t.countDown)+" 秒")])])],1):t._e()],1):t._e()})),1===t.timeStamp?i("el-button",{attrs:{disabled:!t.canSubmit,type:"primary"},on:{click:function(e){return t.click(t.info.id)}}},[t._v("提 交")]):t._e()],2):t._e()]):t._e(),!0===t.finish?i("div",{staticClass:"questionnaire",attrs:{id:"pdfDom"}},[i("div",{staticStyle:{padding:"10px"}},[i("h1",{staticStyle:{"text-align":"center","padding-top":"30px"}},[t._v(t._s(t.info.title))]),i("el-row",{staticStyle:{"margin-top":"35px"}},[i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[i("div",{staticStyle:{"text-align":"center",padding:"10px 10px 10px 10px"}},[i("h3",[t._v("试卷得分")]),i("p",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.result.user_get_score)+"分/"+t._s(t.result.total_score)+"分")])])])]),i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[i("div",{staticStyle:{"text-align":"center",padding:"10px 10px 10px 10px"}},[i("h3",[t._v("做对题数")]),i("p",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.result.user_get_score_question_cnt)+"道/"+t._s(t.result.total_score_question_cnt)+"道")])])])]),i("el-col",{attrs:{span:8}},[i("div",{staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04)"}},[i("div",{staticStyle:{"text-align":"center",padding:"10px 10px 10px 10px"}},[i("h3",[t._v("正确率")]),i("p",{staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.result.correct_rate))])])])])],1),i("div",{staticClass:"content"},[t._v(" 问卷到此结束，感谢您的参与！")]),i("div",{staticStyle:{"margin-top":"20px","margin-left":"20px"}},[i("div",{staticStyle:{"font-size":"16px"}},[i("div",[i("h3",{staticStyle:{"margin-bottom":"15px",color:"midnightblue",cursor:"pointer"},on:{click:function(e){t.isShow=!t.isShow}}},[t._v("答案解析 "),t.isShow?i("el-icon",{staticClass:"el-icon-arrow-up"}):i("el-icon",{staticClass:"el-icon-arrow-down"})],1),t.isShow?i("div",{staticStyle:{"margin-top":"20px"}},[i("span",[t._v("仅显示错题 ")]),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.only_show_wrong_question,callback:function(e){t.only_show_wrong_question=e},expression:"only_show_wrong_question"}})],1):t._e()]),t._l(t.result.question_list,(function(e,n){return t.isShow?i("div",{key:n,staticStyle:{"margin-bottom":"20px"}},[!0!==e.is_scoring||e.is_user_answer_right&&t.only_show_wrong_question?t._e():i("div",[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[t.info.is_show_question_num?i("span",[t._v(t._s(n+1+". "))]):t._e(),t._v(" "+t._s(e.title)+" "),i("span",{staticStyle:{color:"#F56C6C"}},[e.is_must_answer?i("span",[t._v("*")]):t._e()]),i("span",{staticStyle:{color:"gray"}},[t._v(" （"+t._s(e.question_score)+"分） ")])])]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"5px"}},[t._v(" "+t._s(e.content)+" ")]),"single-choice"===e.type?i("v-app",{staticClass:"choice"},[i("v-container",{staticClass:"px-0",attrs:{fluid:""}},[i("div",{staticStyle:{float:"left"}},[i("v-radio-group",{attrs:{disabled:""},model:{value:e.answer_ordering-1,callback:function(i){t.$set(e,"answer_ordering-1",i)},expression:"item.answer_ordering-1"}},t._l(e.option_list,(function(t){return i("div",[i("div",{staticStyle:{float:"left","min-width":"460px","max-width":"560px"}},[i("v-radio",{key:t.id,staticStyle:{float:"left","margin-bottom":"8px"},attrs:{label:t.title}})],1)])})),0)],1)])],1):t._e(),"multiple-choice"===e.type?i("v-app",{staticClass:"choice"},[i("v-container",{attrs:{fluid:""}},t._l(e.option_list,(function(e){return i("div",{staticStyle:{float:"left"}},[i("div",{staticStyle:{float:"left","min-width":"460px","max-width":"560px"}},[i("v-checkbox",{key:e.id,attrs:{disabled:"",label:e.title,"hide-details":""},model:{value:e.is_user_answer,callback:function(i){t.$set(e,"is_user_answer",i)},expression:"optionItem.is_user_answer"}})],1)])})),0)],1):t._e(),"completion"===e.type?i("v-app",{staticClass:"choice",staticStyle:{"margin-bottom":"10px"}},t._l(e.option_list,(function(e){return i("div",[t._v(" 你的答案："+t._s(e.user_answer_content)+" ")])})),0):t._e(),i("div",{staticStyle:{"background-color":"whitesmoke","border-radius":"10px"}},[i("div",{staticStyle:{padding:"8px"}},[e.is_user_answer_right?i("span",{staticStyle:{color:"green"}},[t._v("回答正确")]):i("span",{staticStyle:{color:"darkred"}},[t._v("回答错误")]),e.is_user_answer_right?i("i",{staticClass:"el-icon-success",staticStyle:{color:"green"}}):i("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}}),e.is_user_answer_right?i("span",{staticStyle:{float:"right","padding-right":"5px",color:"green"}},[t._v("+"+t._s(e.user_get_score)+"分")]):i("span",{staticStyle:{float:"right","padding-right":"5px",color:"red"}},[t._v("+"+t._s(e.user_get_score)+"分")])])]),!1===e.is_user_answer_right?i("div",{staticStyle:{"background-color":"whitesmoke","border-radius":"10px","margin-top":"10px",padding:"8px"}},[i("div",{staticStyle:{color:"green"}},[t._v("正确答案：")]),"single-choice"===e.type||"multiple-choice"===e.type?i("div",t._l(e.option_list,(function(e,n){return i("span",[e.is_answer_choice?i("span",[t._v(t._s(e.title)+", ")]):t._e()])})),0):i("div",t._l(e.option_list,(function(e){return i("span",[t._v(t._s(e.answer))])})),0)]):t._e()],1)]):t._e()}))],2)])],1),i("div",{staticClass:"line"}),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({path:"/"})}}},[t._v("确定")])],1):t._e(),i("el-dialog",{attrs:{title:"问卷已加密！",visible:t.info.is_locked,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%",center:""},on:{"update:visible":function(e){return t.$set(t.info,"is_locked",e)}}},[i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.check_password(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("div",{staticStyle:{margin:"40px auto 0"}},[i("el-button",{staticStyle:{"margin-bottom":"0 !important"},attrs:{type:"primary"},on:{click:t.check_password}},[t._v("确 定")])],1)])],1)},Mt=[],Ut=(i("bf19"),i("5319"),i("a434"),{name:"FillQuestionnaire",components:{},data:function(){return{canSubmit:!0,single:0,multiple:[],questionnaire_id:1,content:"",info:"",submit_list:[],flag:!0,timeStamp:1,startTime:"",endTime:"",password:"",BMap:null,geolocation:null,positioning:!1,positioningInterval:null,countDown:30,location:null,result:"",finish:!1,only_show_wrong_question:!1,isShow:!1,is_start:!1,is_end:!1,count_down:"",is_open:!0,rightTime:"",Show:[],sTmp:[],mTmp:[],f:[],rep:[]}},mounted:function(){var t=this;window.initBaiduMapScript=function(){t.BMap=window.BMap},Dt("initBaiduMapScript");var e=this,i=e.$route.params.text;i=b["Base64"].decode(i),i=i.substring(4,i.length-7),w().then((function(n){n[0]?_.a.get("/api/questionnaire/"+parseInt(i)+"/fill_or_preview/",{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(i){if(e.info=i.data,e.info.is_start_time){var n=e.info.start_time,o=new Date(n).toJSON(),s=new Date(+new Date(o)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/," ");e.startTime=s,Date.parse(e.info.start_time)>Date.now()&&(e.timeStamp=2)}if(e.info.is_end_time){n=e.info.end_time,o=new Date(n).toJSON(),s=new Date(+new Date(o)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/," ");e.endTime=s,Date.parse(e.info.end_time)<Date.now()&&(e.timeStamp=3)}if(e.info.is_only_answer_once){var a=e;_.a.put("/api/answer/check_answer/",{id:a.info.id},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){console.log(t.data),!0===t.data.has_answer&&(a.timeStamp=4)})).catch((function(t){a.$notify.error({title:"出错啦",message:"限制失败"})}))}if(e.info.is_limit_answer){var r=e.info.limit_answer_number,l=e.info.answer_num;l>=r&&4!==e.timeStamp&&(e.timeStamp=5)}if(1===e.timeStamp){var c,u=!0,d=Object(Ot["a"])(e.info.question_list);try{for(d.s();!(c=d.n()).done;){var p=c.value;if(p.is_limit_answer&&p.is_must_answer){var m,f=!1,h=Object(Ot["a"])(p.option_list);try{for(h.s();!(m=h.n()).done;){var g=m.value;g.limit_answer_number-g.answer_num>0&&(f=!0)}}catch(v){h.e(v)}finally{h.f()}!1===f&&(u=!1)}!1===u&&(e.canSubmit=!1)}}catch(v){d.e(v)}finally{d.f()}}console.log(e.info.is_only_answer_once),console.log(e.timeStamp),1===e.timeStamp&&t.Djs_time(),e.init()})).catch((function(t){console.log(t.response)})):_.a.get("/api/questionnaire/"+parseInt(i)+"/fill_or_preview/").then((function(i){if(e.info=i.data,e.init(),e.info.is_required_login&&(e.$store.commit("flag_true"),e.$store.commit("toUrl",e.$route.params.text),e.$notify.warning({title:"请先登录",message:"发布者设置了登陆验证"}),e.$router.push({path:"/login"})),e.info.is_start_time){var n=e.info.start_time,o=new Date(n).toJSON(),s=new Date(+new Date(o)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/," ");e.startTime=s,Date.parse(e.info.start_time)>Date.now()&&(e.timeStamp=2)}if(e.info.is_end_time){n=e.info.end_time,o=new Date(n).toJSON(),s=new Date(+new Date(o)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/," ");e.endTime=s,Date.parse(e.info.end_time)<Date.now()&&(e.timeStamp=3)}if(e.info.is_limit_answer){var a=e.info.limit_answer_number,r=e.info.answer_num;r>=a&&4!==e.timeStamp&&(e.timeStamp=5)}if(1===e.timeStamp){var l,c=!0,u=Object(Ot["a"])(e.info.question_list);try{for(u.s();!(l=u.n()).done;){var d=l.value;if(d.is_limit_answer&&d.is_must_answer){var p,m=!1,f=Object(Ot["a"])(d.option_list);try{for(f.s();!(p=f.n()).done;){var h=p.value;h.limit_answer_number-h.answer_num>0&&(m=!0)}}catch(_){f.e(_)}finally{f.f()}!1===m&&(c=!1)}!1===c&&(e.canSubmit=!1)}}catch(_){u.e(_)}finally{u.f()}}1===e.timeStamp&&t.Djs_time()})).catch((function(t){console.log(t.response)}))}))},methods:{init:function(){var t,e=this,i=Object(Ot["a"])(e.info.question_list);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.sTmp.push({last:null}),this.rep.push(n.relate_logic_option),0!==n.relate_logic_option.length?this.Show.push(!1):this.Show.push(!0);var o,s=[],a=[],r=Object(Ot["a"])(n.option_list);try{for(r.s();!(o=r.n()).done;){var l=o.value;s.push({rlq:l.related_logic_question,select:!1}),a.push({select:!1})}}catch(c){r.e(c)}finally{r.f()}this.f.push(s),this.mTmp.push(a)}}catch(c){i.e(c)}finally{i.f()}console.log(this.f),console.log(this.rep)},cancelOption:function(t,e){var i=[];i.push({x:t,y:e}),this.f[t][e].select=!1;while(i.length>0){var n=i.shift();if(0!==this.f[n.x][n.y].rlq.length){var o,s=Object(Ot["a"])(this.f[n.x][n.y].rlq);try{for(s.s();!(o=s.n()).done;){var a=o.value,r=this.Show[a.ordering-1];if(this.rep[a.ordering-1].length<=1)this.Show[a.ordering-1]=!1;else{var l,c=!1,u=Object(Ot["a"])(this.rep[a.ordering-1]);try{for(u.s();!(l=u.n()).done;){var d=l.value;this.f[d.question_ordering-1][d.ordering-1].select&&(c=!0)}}catch(m){u.e(m)}finally{u.f()}c||(this.Show[a.ordering-1]=!1)}if(r&&!this.Show[a.ordering-1])for(var p=0;p<this.info.question_list[a.ordering-1].option_list.length;p++)this.f[a.ordering-1][p].select&&(this.f[a.ordering-1][p].select=!1,i.push({x:a.ordering-1,y:p}))}}catch(m){s.e(m)}finally{s.f()}}}},reSetF:function(){var t,e=0,i=Object(Ot["a"])(this.info.question_list);try{for(i.s();!(t=i.n()).done;){var n=t.value;if("single-choice"===n.type)""===n.answer&&void 0===n.answer||void 0!==this.f[e][n.answer]&&(this.f[e][n.answer].select=!0);else if("multiple-choice"===n.type){var o,s=0,a=Object(Ot["a"])(n.option_list);try{for(a.s();!(o=a.n()).done;){var r=o.value;r.is_attr_limit&&void 0!==this.f[e][s]&&(this.f[e][s].select=!0),s++}}catch(l){a.e(l)}finally{a.f()}}e++}}catch(l){i.e(l)}finally{i.f()}},addOption:function(t,e){this.reSetF();var i=[];i.push({x:t,y:e}),this.f[t][e].select=!0;while(i.length>0){var n=i.shift();if(console.log("!!!"),console.log(n.x,n.y),0!==this.f[n.x][n.y].rlq.length){var o,s=Object(Ot["a"])(this.f[n.x][n.y].rlq);try{for(s.s();!(o=s.n()).done;){var a=o.value;console.log(a.ordering-1);var r=this.Show[a.ordering-1];if(console.log("f1",r),!r){this.Show[a.ordering-1]=!0;for(var l=0;l<this.info.question_list[a.ordering-1].option_list.length;l++)console.log("pp",l),console.log(a.ordering-1,l),console.log("this.f[q.ordering - 1][pp].select",this.f[a.ordering-1][l].select),this.f[a.ordering-1][l].select&&i.push({x:a.ordering-1,y:l})}}}catch(c){s.e(c)}finally{s.f()}}}},solveSin:function(t,e){console.log(t,e),null!==this.sTmp[t].last&&this.cancelOption(t,this.sTmp[t].last),this.sTmp[t].last=e,this.f[t][e].select=!0,this.addOption(t,e)},solveMul:function(t,e){var i=0;for(i=0;i<e.length;i++)if(e[i].is_attr_limit!==this.mTmp[t][i].select){this.f[t][i].select=e[i].is_attr_limit,this.mTmp[t][i].select=e[i].is_attr_limit;break}console.log(t,i,this.mTmp[t][i].select),this.mTmp[t][i].select?this.addOption(t,i):this.cancelOption(t,i)},Djs_time:function(){var t=this;if(this.info.is_end_time)var e=setInterval((function(){var i=new Date(t.info.start_time).getTime(),n=new Date(t.info.end_time).getTime(),o=(new Date).getTime();if(t.rightTime=n-o,t.info.is_start_time&&o-i<0)t.count_down="问卷还未开始！";else if(t.rightTime>0){var s=Math.floor(t.rightTime/1e3/60/60/24),a=Math.floor(t.rightTime/1e3/60/60%24),r=Math.floor(t.rightTime/1e3/60%60),l=Math.floor(t.rightTime/1e3%60);t.count_down=s+"天"+a+"小时"+r+"分"+l+"秒",t.is_open=!0}else 0===t.rightTime?t.is_open=!1:(t.click(t.info.id),clearInterval(e))}),1e3)},resetPositioning:function(){this.positioning=!1,this.location=null,this.countDown=30,clearInterval(this.positioningInterval)},getLocation:function(){var t=this;this.location||this.positioning||this.$confirm("请选择是否同意获取定位","该题需要获取您的地理位置",{confirmButtonText:"同意",cancelButtonText:"取消",type:"warning"}).then((function(){t._getLocation()}))},_getLocation:function(){var t=this,e=this;if(e.geolocation=new e.BMap.Geolocation,e.geolocation){e.geolocation.enableSDKLocation(),this.positioning=!0,this.positioningInterval=setInterval((function(){0===t.countDown?(t.countDown=30,clearInterval(t.positioningInterval)):t.countDown--}),1e3);var i={enableHighAccuracy:!0,timeout:30,maximumAge:0};e.geolocation.getCurrentPosition((function(t){e.resetPositioning();var i=e.geolocation.getStatus(),n="由于未知错误而无法检索设备的位置",o="error";switch(i){case 0:if(o="success",n="获取地理位置定位请求成功",t){var s=0,a=0,r="未知",l="未知";t.point&&(s=t.point.lat,a=t.point.lng),t.address&&(r=t.address.province,l=t.address.city),e.location={"省份":r,"城市":l,"经度":s,"纬度":a}}else n="由于未知错误而无法检索设备的位置";break;case 2:n="由于未知错误而无法检索设备的位置";break;case 4:case 5:n="位置服务请求非法";break;case 6:n="应用程序没有使用位置服务的权限";break;case 7:n="网络不可用或者无法连接到获取位置信息的卫星";break;case 8:n="无法在指定的最大超时间隔内检索位置信息";break;default:n="由于未知错误而无法检索设备的位置";break}e.$$notify[o]({key:NotificationKey,message:"提示",description:n})}),i)}else e.$$notify.error({key:NotificationKey,message:"提示",description:"您的浏览器不支持地理位置服务"})},toIndex:function(){this.$router.push({path:"/"})},check_password:function(){this.password===this.info.password?(this.$notify.success({title:"通过验证！",message:"开始填写问卷吧~"}),this.info.is_locked=!1):this.$notify.error({title:"密码错误!",message:"请重新输入~"})},click:function(t){var e,i=this;if("closed"===this.info.status)this.$notify.error({title:"问卷已关闭",message:"无法提交"});else if("deleted"===this.info.status)this.$notify.error({title:"问卷已删除",message:"无法提交"});else{this.submit_list.splice(0,this.submit_list.length),this.flag=!0;var n,o=Object(Ot["a"])(this.info.question_list);try{for(o.s();!(n=o.n()).done;){var s=n.value;if("multiple-choice"===s.type){e=!1;var a,r=Object(Ot["a"])(s.option_list);try{for(r.s();!(a=r.n()).done;){var l=a.value;if(!0===l.is_attr_limit){var c={question:s.id,option:l.id};i.submit_list.push(c),e=!0}}}catch(q){r.e(q)}finally{r.f()}!1===e&&s.is_must_answer&&(i.flag=!1,console.log("多选"))}else if("single-choice"===s.type){e=!1;var u,d=Object(Ot["a"])(s.option_list);try{for(d.s();!(u=d.n()).done;){var p=u.value;if(s.option_list.indexOf(p)===s.answer){var m={question:s.id,option:p.id};e=!0,i.submit_list.push(m)}}}catch(q){d.e(q)}finally{d.f()}!1===e&&s.is_must_answer&&(i.flag=!1,console.log("单选 | 评分"))}else if("scoring"===s.type){e=!1;var f,h=Object(Ot["a"])(s.option_list);try{for(h.s();!(f=h.n()).done;){var g=f.value;if(s.option_list.indexOf(g)+1===s.answer){var v={question:s.id,option:g.id};e=!0,i.submit_list.push(v)}}}catch(q){h.e(q)}finally{h.f()}!1===e&&s.is_must_answer&&(i.flag=!1,console.log("单选 | 评分"))}else if("completion"===s.type)if(""===s.answer&&s.is_must_answer)i.flag=!1,console.log("填空");else{var y={question:s.id,option:s.option_list[0].id,content:s.answer};i.submit_list.push(y)}else if("position"===s.type)if(null===i.location&&s.is_must_answer)i.flag=!1,console.log("定位");else{var w=void 0;w=null===i.location?{question:s.id,option:s.option_list[0].id,content:""}:{question:s.id,option:s.option_list[0].id,content:i.location["城市"]},i.submit_list.push(w)}}}catch(q){o.e(q)}finally{o.f()}if(console.log(i.submit_list),console.log(i.rightTime),!0===i.flag||i.rightTime<0){var x=this;_.a.post("/api/answer/",{questionnaire:x.info.id,answer_list:x.submit_list},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){if(x.result=e.data,console.log(x.result.answer_number),"exam"===x.info.type&&!0===x.result.is_show_answer_detail)x.finish=!0;else{var i=b["Base64"].encode("moyu"+t+"wenjuan");x.$router.push({path:"/thank/"+i})}})).catch((function(t){400===t.response.status?(x.$notify.warning({title:"问卷限额已满，提交失败！"}),x.$router.push({path:"/"})):x.$notify.error({title:"好像发生了什么错误",message:t.message})}))}else i.$notify.warning({title:"请完成所有的必选项题目!"})}},click_1:function(t){var e=this;_.a.post("/api/answer/",{questionnaire:e.info.id,answer_list:e.submit_list},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(i){if(e.result=i.data,console.log(e.result.answer_number),"exam"===e.info.type&&!0===e.result.is_show_answer_detail)e.finish=!0;else{var n=b["Base64"].encode("moyu"+t+"wenjuan");e.$router.push({path:"/thank/"+n})}})).catch((function(t){e.$notify.error({title:"好像发生了什么错误",message:t.message})}))}}}),Ht=Ut,Gt=(i("5f87"),i("ed39"),Object(u["a"])(Ht,Pt,Mt,!1,null,"9039f7fe",null)),Kt=Gt.exports;ut()(Gt,{VApp:dt["a"],VBtn:Et["a"],VCheckbox:jt["a"],VContainer:mt["a"],VRadio:At["a"],VRadioGroup:Lt["a"],VRating:Nt["a"],VTextField:Vt["a"]});var Jt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",{staticClass:"main"},[i("el-container",[i("a-affix",{staticStyle:{width:"23%"},attrs:{"offset-top":4}},[i("el-aside",{staticStyle:{height:"fit-content"}},[i("el-container",{staticClass:"class"},[i("div",{staticStyle:{"margin-left":"0px"},on:{click:t.check}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-document-checked"})]),i("h4",[t._v("预览问卷")])],1),i("div",{staticStyle:{"margin-left":"50px"},on:{click:t.Finish}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-finished"})]),i("h4",[t._v("完成编辑")])],1)]),i("el-menu",{staticClass:"aside-mid"},[i("div",{staticClass:"aside-top"},[i("span",[t._v(" 题型选择 ")])]),t._l(t.menuList,(function(e){return i("el-submenu",{key:e.type,attrs:{index:e.type}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.name))])]),t._l(e.children,(function(e){return i("el-menu-item",{key:e.type,attrs:{index:e.type},on:{click:function(i){return t.addQuestion(e.type)}}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.name))])])],2)}))],2)}))],2),i("el-menu",{staticClass:"aside-mid",staticStyle:{padding:"20px 25px",overflow:"auto","max-height":"400px"}},[i("div",{staticClass:"aside-top"},[i("span",[t._v(" 问卷设置 ")])]),i("div",{staticClass:"time_control",staticStyle:{"margin-top":"20px"}},[i("span",[t._v("设定答卷起止时间")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.delete_time_control},model:{value:t.control_time,callback:function(e){t.control_time=e},expression:"control_time"}}),t.control_time?i("div",{staticStyle:{"padding-left":"15px"}},[i("div",[i("div",[i("el-checkbox",{model:{value:t.info.is_start_time,callback:function(e){t.$set(t.info,"is_start_time",e)},expression:"info.is_start_time"}},[t._v("开始时间")])],1),i("div",{staticStyle:{"padding-left":"20px"}},[t.info.is_start_time?i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.info.start_time,callback:function(e){t.$set(t.info,"start_time",e)},expression:"info.start_time"}}):t._e()],1)]),i("div",[i("div",[i("el-checkbox",{model:{value:t.info.is_end_time,callback:function(e){t.$set(t.info,"is_end_time",e)},expression:"info.is_end_time"}},[t._v("结束时间")])],1),i("div",{staticStyle:{"padding-left":"20px"}},[t.info.is_end_time?i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.info.end_time,callback:function(e){t.$set(t.info,"end_time",e)},expression:"info.end_time"}}):t._e()],1)]),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save_time_control}},[t._v(" 保存更改 ")])],1)]):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("问卷显示问题编号")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.is_show_num},model:{value:t.info.is_show_question_num,callback:function(e){t.$set(t.info,"is_show_question_num",e)},expression:"info.is_show_question_num"}})],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("设定答卷密码")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.set_islocked},model:{value:t.info.is_locked,callback:function(e){t.$set(t.info,"is_locked",e)},expression:"info.is_locked"}}),t.info.is_locked?i("div",{staticStyle:{"margin-top":"15px","padding-left":"15px"}},[i("span",{staticStyle:{"font-size":"15px"}},[t._v("设置密码:")]),i("el-input",{staticStyle:{"min-width":"180px","max-width":"180px","margin-left":"10px"},attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.set_password(e)}},model:{value:t.info.password,callback:function(e){t.$set(t.info,"password",e)},expression:"info.password"}}),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.set_password}},[t._v(" 保存更改 ")])],1)],1):t._e()],1),"signup"===t.type?i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("设定答卷限额")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.set_is_limit_answer},model:{value:t.info.is_limit_answer,callback:function(e){t.$set(t.info,"is_limit_answer",e)},expression:"info.is_limit_answer"}}),t.info.is_limit_answer?i("div",{staticStyle:{"margin-top":"15px","padding-left":"15px"}},[i("span",{staticStyle:{"font-size":"15px"}},[t._v("设置限额数量:")]),i("el-input",{staticStyle:{"min-width":"180px","max-width":"180px","margin-left":"10px"},attrs:{placeholder:"请输入限额数量"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.set_limit_answer_number(e)}},model:{value:t.info.limit_answer_number,callback:function(e){t.$set(t.info,"limit_answer_number",e)},expression:"info.limit_answer_number"}}),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.set_limit_answer_number}},[t._v(" 保存更改 ")])],1)],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("答题需要登陆验证")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6",disabled:t.info.is_only_answer_once},on:{change:t.is_login_required},model:{value:t.info.is_required_login,callback:function(e){t.$set(t.info,"is_required_login",e)},expression:"info.is_required_login"}}),t.info.is_only_answer_once||this.order_type?i("div",{staticStyle:{"margin-top":"15px","padding-left":"15px"}},[i("span",{staticStyle:{color:"#a1a1a1","font-size":"15px"}},[t._v("设置限答或乱序后，必须打开登录验证")])]):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("每个用户仅答一次")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.is_answer_once},model:{value:t.info.is_only_answer_once,callback:function(e){t.$set(t.info,"is_only_answer_once",e)},expression:"info.is_only_answer_once"}})],1),"exam"===t.type?i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("是否开启问题乱序")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.is_disorder},model:{value:t.order_type,callback:function(e){t.order_type=e},expression:"order_type"}})],1):t._e()])],1)],1),i("el-main",{staticClass:"questionnaire",staticStyle:{height:"fit-content"}},[i("div",{staticClass:"question-title"},[i("h2",[t._v(t._s(t.info.title))])]),i("div",{staticClass:"intro"},[t._v(" "+t._s(t.info.content))]),i("el-container",{staticStyle:{display:"inline"}},[i("el-collapse",{staticClass:"question-container",on:{change:function(e){return t.editTitle(t.info)}},model:{value:t.info.isShow,callback:function(e){t.$set(t.info,"isShow",e)},expression:"info.isShow"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("span",{staticStyle:{"margin-left":"85%"}},[t._v(" 编辑标题和简介 ")])]),i("title-content-dialog",{ref:"title-content-dialog"})],2)],1)],1),i("draggable",{attrs:{list:t.info.question_list,animation:"500","chosen-class":"chosen",disabled:t.disabled},on:{start:t.onStart,end:t.onEnd}},[i("transition-group",t._l(t.info.question_list,(function(e,n){return i("div",{key:e.id?e.id:e.key,staticClass:"card",attrs:{id:e.type+e.id}},[i("div",{staticStyle:{padding:"20px"}},[i("div",{staticClass:"op"},[i("ul",[i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit||t.editID===e.id,expression:"!isEdit||editID === item.id"}],on:{click:function(i){return t.cardDelete(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-delete-variant")]),t._v(" 删除")],1),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],on:{click:function(i){return t.cardCopy(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-content-copy")]),t._v(" 复制")],1),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit&&"exam"!==t.type,expression:"!isEdit && type !== 'exam'"}],on:{click:function(e){return t.cardLogical(t.info.question_list,n)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-link-variant-plus")]),t._v(" 逻辑")],1),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],on:{click:function(i){return t.cardDown(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down-circle-outline")]),t._v(" 下移")],1),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isEdit,expression:"!isEdit"}],on:{click:function(i){return t.cardUp(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up-circle-outline")]),t._v(" 上移")],1)])]),"single-choice"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[单选题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-radio-group",{model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}},t._l(e.option_list,(function(n,o){return i("el-radio",{key:n.id?n.id:n.key,attrs:{label:o,disabled:e.is_scoring}},[t._v(" "+t._s(n.title)+" "),e.is_scoring&&o===e.answer?i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("[正确答案]")]):t._e(),n.related_logic_question.length?i("div",{staticStyle:{"margin-top":"15px","font-size":"16px"}},[i("span",[t._v("选择后显示:")]),t._l(n.related_logic_question,(function(e,n){return i("span",{key:e.id},[t._v(" 题目"),i("b",{on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,click:function(i){return t.ToPosition(e)}}},[t._v(" "+t._s(t.getContent(e))+" ")])])}))],2):t._e()])})),1)]:t._e(),"multiple-choice"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[多选题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),t._l(e.option_list,(function(n,o){return i("div",{key:o},[i("el-checkbox",{attrs:{label:o,disabled:e.is_scoring},model:{value:n.is_answer_choice,callback:function(e){t.$set(n,"is_answer_choice",e)},expression:"subItem.is_answer_choice"}},[t._v(" "+t._s(n.title)+" "),e.is_scoring&&n.is_answer_choice?i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("[正确答案]")]):t._e()]),n.related_logic_question.length?i("div",{staticStyle:{"margin-top":"0px","margin-left":"10px"}},[i("span",[t._v("选择后显示:")]),t._l(n.related_logic_question,(function(e,n){return i("span",{key:e.id},[t._v(" 题目"),i("b",{on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave,click:function(i){return t.ToPosition(e)}}},[t._v(" "+t._s(t.getContent(e))+" ")])])}))],2):t._e()],1)}))]:t._e(),"completion"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[填空题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-input",{staticClass:"single-completion-input",attrs:{autosize:!0,type:"textarea",clearable:!0,resize:"none",disabled:e.is_scoring},model:{value:e.option_list[0].answer,callback:function(i){t.$set(e.option_list[0],"answer",i)},expression:"item.option_list[0].answer"}}),e.is_scoring?i("div",{staticStyle:{color:"#F56C6C","margin-top":"20px"}},[t._v("正确答案: "+t._s(e.option_list[0].answer))]):t._e()]:t._e(),"position"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[定位题]")]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("br"),i("el-button",{staticStyle:{"margin-left":"17px",width:"25%"},attrs:{icon:t.positioning?"el-icon-loading":t.none},on:{click:t.getLocation}},[t.location?i("span",[t._v(t._s(t.location["省份"]+" "+t.location["城市"]))]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.location&&!t.positioning,expression:"!location && !positioning"}]},[t._v("点击获取位置")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.positioning,expression:"positioning"}]},[t._v(" 等待获取中 "),i("span",{staticClass:"red"},[t._v(t._s(t.countDown))]),t._v(" 秒 ")])])],1)]:t._e(),"scoring"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[评分题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-rate",{staticClass:"scoring-input",attrs:{max:e.option_list.length,"show-score":""},model:{value:e.limit_answer_number,callback:function(i){t.$set(e,"limit_answer_number",i)},expression:"item.limit_answer_number"}})]:t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.is_scoring,expression:"item.is_scoring"}],staticStyle:{"margin-top":"20px",color:"#F56C6C"}},[t._v("本题分值: "+t._s(e.question_score))])],2),i("el-container",{staticStyle:{display:"inline"}},[i("div",{staticClass:"question-container"},[i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}]},["single-choice"===e.type?i("single-choice-add-card",{ref:"single-choice"+n,refInFor:!0,attrs:{type:t.info.type}}):t._e(),"multiple-choice"===e.type?i("multiple-choice-add-card",{ref:"multiple-choice"+n,refInFor:!0,attrs:{type:t.info.type}}):t._e(),"completion"===e.type?i("single-completion-add-card",{ref:"completion"+n,refInFor:!0,attrs:{type:t.info.type}}):t._e(),"scoring"===e.type?i("scoring-add-card",{ref:"scoring"+n,refInFor:!0,attrs:{type:t.info.type}}):t._e(),"position"===e.type?i("position-add-card",{ref:"position"+n,refInFor:!0,attrs:{type:t.info.type}}):t._e()],1)])],1)]),i("el-divider"),i("el-button",{staticClass:"edit-button",attrs:{icon:!0===e.isShow?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(i){return t.editQuestion(e,n)}},nativeOn:{mouseenter:function(e){return t.mouseEnter(e)},mouseleave:function(e){return t.mouseLeave(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isShow,expression:"item.isShow === true"}]},[t._v("完成编辑")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.isShow,expression:"item.isShow === false"}]},[t._v("进入编辑")])])],1)})),0)],1),i("div",{staticClass:"not_found",staticStyle:{"line-height":"100px"}},[t._v(" 快去侧边栏选择题型创建新的问题o(*￣▽￣*)ブ "),i("i",{staticClass:"el-icon-cold-drink"})]),i("el-button",{staticClass:"main-footer",attrs:{type:"danger"},on:{click:t.Finish}},[t._v("完成编辑")])],1)],1)],1),i("logical-dialog",{ref:"logical-dialog"}),i("el-backtop")],1)},Wt=[],Zt=(i("4d63"),i("25f0"),i("fb6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question-card"},[i("el-divider"),i("div",[t._v("单选题")]),i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入题目标题",maxlength:"30","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入题目备注",maxlength:"60","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1),i("el-form-item",{attrs:{label:"设置"}},[i("el-checkbox",{attrs:{label:"是否必填"},model:{value:t.questionForm.is_must_answer,callback:function(e){t.$set(t.questionForm,"is_must_answer",e)},expression:"questionForm.is_must_answer"}}),"vote"===t.type?i("el-checkbox",{attrs:{label:"是否显示结果"},model:{value:t.questionForm.is_show_result,callback:function(e){t.$set(t.questionForm,"is_show_result",e)},expression:"questionForm.is_show_result"}}):t._e(),"exam"===t.type?i("el-checkbox",{attrs:{label:"是否考试题"},model:{value:t.questionForm.is_scoring,callback:function(e){t.$set(t.questionForm,"is_scoring",e)},expression:"questionForm.is_scoring"}}):t._e(),"signup"===t.type?i("el-checkbox",{attrs:{label:"是否设置限额"},model:{value:t.questionForm.is_limit_answer,callback:function(e){t.$set(t.questionForm,"is_limit_answer",e)},expression:"questionForm.is_limit_answer"}}):t._e()],1),i("el-divider"),i("el-radio-group",{staticStyle:{width:"100%"},nativeOn:{click:function(e){return t.debugShow(e)}},model:{value:t.questionForm.answer,callback:function(e){t.$set(t.questionForm,"answer",e)},expression:"questionForm.answer"}},t._l(t.questionForm.option_list,(function(e,n){return i("el-form-item",{key:n,attrs:{label:"选项 "+(n+1),prop:"option_list."+n+".title",rules:{required:!0,message:"内容不能为空",trigger:"blur"}}},[i("el-input",{staticClass:"choiceinput",model:{value:e.title,callback:function(i){t.$set(e,"title",i)},expression:"option.title"}}),i("el-radio",{directives:[{name:"show",rawName:"v-show",value:t.questionForm.is_scoring,expression:"questionForm.is_scoring"}],attrs:{label:n}},[t._v("设为正确答案")]),"signup"===t.type?i("span",[t._v("限额数量：")]):t._e(),"signup"===t.type?i("el-input",{staticStyle:{width:"10%","margin-right":"20px","margin-left":"10px"},attrs:{disabled:!t.questionForm.is_limit_answer,label:n},model:{value:e.limit_answer_number,callback:function(i){t.$set(e,"limit_answer_number",i)},expression:"option.limit_answer_number"}},[i("span")]):t._e(),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return i.preventDefault(),t.removeChoice(e)}}},[t._v("删除")])],1)})),1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.questionForm.is_scoring,expression:"questionForm.is_scoring"}],attrs:{label:"题目分数",prop:"question_score"}},[i("el-input-number",{attrs:{step:1},model:{value:t.questionForm.question_score,callback:function(e){t.$set(t.questionForm,"question_score",e)},expression:"questionForm.question_score"}})],1)],1),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{icon:"el-icon-edit",type:"primary"},on:{click:t.addChoice}},[t._v("新增选项")]),t._m(0)],1)],1)}),Yt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span")])}],Xt=i("ade3"),te={name:"single-choice-addcard",props:{type:{type:String,default:"normal"}},data:function(){return{temp:"",editSuccess:!0,flag:0,questionForm:{title:"",content:"",type:"",ordering:0,questionnaire:0,is_must_answer:!1,is_limit_answer:!1,option_list:[],answer:"",is_show_result:!1,is_scoring:!1},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}]}}},methods:{resetForm:function(t){this.questionForm={type:t,title:"",is_must_answer:!1,option_list:[],answer:""}},addQuestion:function(t){this.resetForm(t),this.flag=0},editQuestion:function(t){if(console.log("single-choice",t.type),t.isShow)return this.editSuccess=!0,void this.finishQuestion(t);this.questionForm=t,this.flag=t.id},addChoice:function(){this.questionForm.option_list.push(Object(Xt["a"])({title:"",content:"",ordering:this.questionForm.option_list.length+1,key:Date.now(),is_answer_choice:!1,related_logic_question:[]},"key",Date.now()))},removeChoice:function(t){var e=this.questionForm.option_list.indexOf(t);-1!==e&&this.questionForm.option_list.splice(e,1)},finishQuestion:function(t){var e=this;this.$refs.questionFormRef.validate((function(i){if(!i)return e.editSuccess=!1,e.$notify.error({title:"表单有错误"});if(0===e.questionForm.option_list.length)return e.editSuccess=!1,e.$notify.error({title:"请至少添加一个选项噢~"});var n=e;if(n.questionForm.is_scoring){for(var o in n.questionForm.option_list)n.questionForm.option_list[o].is_answer_choice=!1;var s=n.questionForm.answer;n.questionForm.option_list[s].is_answer_choice=!0}var a=!0;if(n.questionForm.is_limit_answer){var r=/^[0-9]*$/,l=new RegExp(r);for(var o in n.questionForm.option_list)if(n.questionForm.option_list[o].is_limit_answer=!0,l.test(n.questionForm.option_list[o].limit_answer_number)){var c=parseInt(n.questionForm.option_list[o].limit_answer_number);c<0&&(a=!1)}else a=!1}else for(var o in n.questionForm.option_list)n.questionForm.option_list[o].is_limit_answer=!1;if(!1===a)return n.$notify.error({title:"限额必须为非负整数！",message:"编辑失败"}),n.questionForm.isShow=!0,void console.log(error);if(e.flag){var u=n.$route.params.text;u=b["Base64"].decode(u),u=u.substring(4,u.length-7),_.a.patch("/api/question/"+n.flag+"/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(u),is_must_answer:n.questionForm.is_must_answer,is_show_result:n.questionForm.is_show_result,is_scoring:n.questionForm.is_scoring,is_limit_answer:n.questionForm.is_limit_answer,question_score:n.questionForm.question_score},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){n.editSuccess=!0,n.$notify.success({title:"保存成功"})})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"}),n.questionForm.isShow=!0}))}else{var d=n.$route.params.text;d=b["Base64"].decode(d),d=d.substring(4,d.length-7),_.a.post("/api/question/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,questionnaire:parseInt(d),is_must_answer:n.questionForm.is_must_answer,is_show_result:n.questionForm.is_show_result,is_scoring:n.questionForm.is_scoring,is_limit_answer:n.questionForm.is_limit_answer,question_score:n.questionForm.question_score},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){n.editSuccess=!0,n.$notify.success({title:"保存成功"});var i=e.data;for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);for(var s=0;s<t.option_list.length;s++)t.option_list[s].is_answer_choice&&(t.answer=s)})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"}),n.questionForm.isShow=!0,console.log(t)}))}}))},debugShow:function(){console.log("debug",this.questionForm)}}},ee=te,ie=(i("bc9d"),i("c48b"),Object(u["a"])(ee,Zt,Yt,!1,null,"6efec0c7",null)),ne=ie.exports,oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question-card"},[i("el-divider"),i("div",[t._v("多选题")]),i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入题目标题",maxlength:"30","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入题目备注",maxlength:"60","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1),i("el-form-item",{attrs:{label:"设置"}},[i("el-checkbox",{attrs:{label:"是否必填"},model:{value:t.questionForm.is_must_answer,callback:function(e){t.$set(t.questionForm,"is_must_answer",e)},expression:"questionForm.is_must_answer"}}),"vote"===t.type?i("el-checkbox",{attrs:{label:"是否显示结果"},model:{value:t.questionForm.is_show_result,callback:function(e){t.$set(t.questionForm,"is_show_result",e)},expression:"questionForm.is_show_result"}}):t._e(),"exam"===t.type?i("el-checkbox",{attrs:{label:"是否考试题"},model:{value:t.questionForm.is_scoring,callback:function(e){t.$set(t.questionForm,"is_scoring",e)},expression:"questionForm.is_scoring"}}):t._e(),"signup"===t.type?i("el-checkbox",{attrs:{label:"是否设置限额"},model:{value:t.questionForm.is_limit_answer,callback:function(e){t.$set(t.questionForm,"is_limit_answer",e)},expression:"questionForm.is_limit_answer"}}):t._e()],1),i("el-divider"),t._l(t.questionForm.option_list,(function(e,n){return i("el-form-item",{key:n,attrs:{label:"选项 "+(n+1),prop:"option_list."+n+".title",rules:{required:!0,message:"内容不能为空",trigger:"blur"}}},[i("el-input",{staticClass:"choiceinput",model:{value:e.title,callback:function(i){t.$set(e,"title",i)},expression:"option.title"}}),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:t.questionForm.is_scoring,expression:"questionForm.is_scoring"}],attrs:{label:n},model:{value:e.is_answer_choice,callback:function(i){t.$set(e,"is_answer_choice",i)},expression:"option.is_answer_choice"}},[t._v(" 设为正确答案 ")]),"signup"===t.type?i("span",[t._v("限额数量：")]):t._e(),"signup"===t.type?i("el-input",{staticStyle:{width:"10%","margin-right":"20px","margin-left":"10px"},attrs:{disabled:!t.questionForm.is_limit_answer,label:n},model:{value:e.limit_answer_number,callback:function(i){t.$set(e,"limit_answer_number",i)},expression:"option.limit_answer_number"}},[i("span")]):t._e(),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger"},on:{click:function(i){return i.preventDefault(),t.removeChoice(e)}}},[t._v("删除")])],1)})),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.questionForm.is_scoring,expression:"questionForm.is_scoring"}],attrs:{label:"题目分数"}},[i("el-input-number",{attrs:{step:1},model:{value:t.questionForm.question_score,callback:function(e){t.$set(t.questionForm,"question_score",e)},expression:"questionForm.question_score"}})],1)],2),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{icon:"el-icon-edit",type:"primary"},on:{click:t.addChoice}},[t._v("新增选项")])],1)],1)},se=[],ae={inject:["reload"],name:"multiple-choice-addcard",props:{type:{type:String,default:"normal"}},data:function(){return{temp:"",editSuccess:!0,flag:0,questionForm:{title:"",content:"",type:"",ordering:0,questionnaire:0,is_must_answer:!1,is_limit_answer:!1,option_list:[],answer:""},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}]}}},methods:{resetForm:function(t){this.questionForm={type:t,title:"",is_must_answer:!1,option_list:[],answer:""}},addQuestion:function(t){this.resetForm(t),this.flag=0},editQuestion:function(t){if(console.log(11111),t.isShow)return this.editSuccess=!0,void this.finishQuestion(t);this.questionForm=t,this.flag=t.id},addChoice:function(){this.questionForm.option_list.push({title:"",content:"",ordering:this.questionForm.option_list.length+1,is_answer_choice:!1,related_logic_question:[],key:Date.now()}),console.log("addChoice",this.questionForm.option_list)},removeChoice:function(t){var e=this.questionForm.option_list.indexOf(t);-1!==e&&this.questionForm.option_list.splice(e,1)},finishQuestion:function(t){var e=this;this.$refs.questionFormRef.validate((function(i){if(!i)return e.editSuccess=!1,e.$notify.error({title:"表单有错误"});if(0===e.questionForm.option_list.length)return e.editSuccess=!1,e.$notify.error({title:"请至少添加一个选项噢~"});if(e.questionForm.is_scoring){var n,o=!1,s=Object(Ot["a"])(e.questionForm.option_list);try{for(s.s();!(n=s.n()).done;){var a=n.value;if(a.is_answer_choice){o=!0;break}}}catch(f){s.e(f)}finally{s.f()}if(!o)return e.editSuccess=!1,e.$notify.error({title:"请设置正确答案"})}var r=e,l=!0;if(r.questionForm.is_limit_answer){var c=/^[0-9]*$/,u=new RegExp(c);for(var a in r.questionForm.option_list)if(r.questionForm.option_list[a].is_limit_answer=!0,u.test(r.questionForm.option_list[a].limit_answer_number)){var d=parseInt(r.questionForm.option_list[a].limit_answer_number);d<0&&(l=!1)}else l=!1}else for(var a in r.questionForm.option_list)r.questionForm.option_list[a].is_limit_answer=!1;if(!1===l)return r.$notify.error({title:"限额必须为非负整数！",message:"编辑失败"}),r.questionForm.isShow=!0,void console.log(error);if(e.flag){var p=r.$route.params.text;p=b["Base64"].decode(p),p=p.substring(4,p.length-7),_.a.patch("/api/question/"+r.flag+"/",{option_list:r.questionForm.option_list,title:r.questionForm.title,content:r.questionForm.content,type:r.questionForm.type,ordering:r.questionForm.ordering,questionnaire:parseInt(p),is_must_answer:r.questionForm.is_must_answer,is_show_result:r.questionForm.is_show_result,is_scoring:r.questionForm.is_scoring,is_limit_answer:r.questionForm.is_limit_answer,question_score:r.questionForm.question_score},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){r.editSuccess=!0,r.$notify.success({title:"保存成功"})})).catch((function(t){r.$notify.error({title:"出错啦",message:"编辑失败"}),r.questionForm.isShow=!0}))}else{var m=r.$route.params.text;m=b["Base64"].decode(m),m=m.substring(4,m.length-7),_.a.post("/api/question/",{option_list:r.questionForm.option_list,title:r.questionForm.title,content:r.questionForm.content,type:r.questionForm.type,ordering:r.questionForm.ordering,questionnaire:parseInt(m),is_must_answer:r.questionForm.is_must_answer,is_show_result:r.questionForm.is_show_result,is_limit_answer:r.questionForm.is_limit_answer,is_scoring:r.questionForm.is_scoring,question_score:r.questionForm.question_score}).then((function(e){r.editSuccess=!0,r.$notify.success({title:"保存成功"});var i=e.data;for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})).catch((function(t){r.$notify.error({title:"出错啦",message:"编辑失败"}),r.questionForm.isShow=!0}))}}))},debugShow:function(t){console.log("item",t)}}},re=ae,le=(i("6eec"),Object(u["a"])(re,oe,se,!1,null,"09b7e65a",null)),ce=le.exports,ue=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("footer",{staticClass:"wavefooter"},[i("svg",{staticClass:"waves",attrs:{viewBox:"0 24 150 28",preserveAspectRatio:"none","shape-rendering":"auto"}},[i("defs",[i("path",{attrs:{id:"gentle-wave",d:"M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"}})]),i("g",{staticClass:"parallax"},[i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"0",fill:"rgba(118, 218, 255, 1)"}}),i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"3",fill:"rgba(118, 218, 255, 0.5)"}}),i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"5",fill:"rgba(118, 218, 255, 0.3)"}}),i("use",{attrs:{"xlink:href":"#gentle-wave",x:"48",y:"7",fill:"rgba(118, 218, 255, 0.1)"}})])])])])},de=[],pe={name:"wave"},me=pe,fe=(i("50d7"),Object(u["a"])(me,ue,de,!1,null,"82b12a44",null)),he=fe.exports,_e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question-card"},[i("el-divider"),i("div",[t._v("填空题")]),i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入题目标题",maxlength:"30","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入题目备注",maxlength:"60","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1),i("el-form-item",{attrs:{label:"设置"}},[i("el-checkbox",{attrs:{label:"是否必填"},model:{value:t.questionForm.is_must_answer,callback:function(e){t.$set(t.questionForm,"is_must_answer",e)},expression:"questionForm.is_must_answer"}}),"exam"===t.type?i("el-checkbox",{attrs:{label:"是否考试题"},model:{value:t.questionForm.is_scoring,callback:function(e){t.$set(t.questionForm,"is_scoring",e)},expression:"questionForm.is_scoring"}}):t._e()],1),t.questionForm.is_scoring?i("el-form-item",{attrs:{label:"正确答案",prop:"answer"}},[i("el-input",{model:{value:t.questionForm.answer,callback:function(e){t.$set(t.questionForm,"answer",e)},expression:"questionForm.answer"}})],1):t._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.questionForm.is_scoring,expression:"questionForm.is_scoring"}],attrs:{label:"题目分数"}},[i("el-input-number",{attrs:{step:1},model:{value:t.questionForm.question_score,callback:function(e){t.$set(t.questionForm,"question_score",e)},expression:"questionForm.question_score"}})],1)],1),t._m(0)],1)},ge=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-footer"},[i("span")])}],ve={name:"single-completion-addcard",props:{type:{type:String,default:"normal"}},data:function(){return{temp:"",editSuccess:!0,flag:0,questionForm:{title:"",content:"",type:"",ordering:0,questionnaire:0,is_must_answer:!1,option_list:[],answer:""},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}],answer:[{required:!0,message:"你的答案呢",trigger:"blur"}]}}},methods:{resetForm:function(t){this.questionForm={type:t,title:"",is_must_answer:!1,option_list:[],answer:""}},addQuestion:function(t){this.resetForm(t),this.flag=0,this.addDialogVisible=!0},reloadQuestion:function(t){this.questionForm=t},editQuestion:function(t){if(console.log("single-choice",t.type),t.isShow)return this.editSuccess=!0,void this.finishQuestion(t);this.questionForm=t,this.flag=t.id},addChoice:function(){this.questionForm.option_list.push({title:"",content:"",ordering:this.questionForm.option_list.length+1})},removeChoice:function(t){var e=this.questionForm.option_list.indexOf(t);-1!==e&&this.questionForm.option_list.splice(e,1)},finishQuestion:function(t){var e=this;this.$refs.questionFormRef.validate((function(i){if(!i)return e.editSuccess=!1,e.$notify.error({title:"表单有错误"});var n=e;if(e.questionForm.option_list[0].title="正确答案",e.questionForm.option_list[0].answer=e.questionForm.answer,e.flag){var o=n.$route.params.text;o=b["Base64"].decode(o),o=o.substring(4,o.length-7),_.a.patch("/api/question/"+n.flag+"/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(o),is_must_answer:n.questionForm.is_must_answer,is_show_result:n.questionForm.is_show_result,is_scoring:n.questionForm.is_scoring,question_score:n.questionForm.question_score}).then((function(t){console.log(t),n.editSuccess=!0,n.$notify.success({title:"保存成功"})})).catch((function(t){n.questionForm.isShow=!0,console.log(t.data),n.$notify.error({title:"出错啦",message:"编辑失败"})}))}else{var s=n.$route.params.text;s=b["Base64"].decode(s),s=s.substring(4,s.length-7),_.a.post("/api/question/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(s),is_must_answer:n.questionForm.is_must_answer,is_show_result:n.questionForm.is_show_result,is_scoring:n.questionForm.is_scoring,question_score:n.questionForm.question_score}).then((function(e){n.editSuccess=!0,n.$notify.success({title:"保存成功"});var i=e.data;for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})).catch((function(t){n.questionForm.isShow=!0,n.$notify.error({title:"出错啦",message:t.message}),console.log(t)}))}}))},cancelQuestion:function(){this.$refs.questionFormRef.resetFields(),this.addDialogVisible=!1}}},ye=ve,we=(i("0319"),Object(u["a"])(ye,_e,ge,!1,null,"089a3840",null)),be=we.exports,xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"添加题目(多项填空题)",width:"50%",visible:t.addDialogVisible},on:{"update:visible":function(e){t.addDialogVisible=e}}},[i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入题目标题",maxlength:"30","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入题目备注",maxlength:"60","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1),i("el-form-item",{attrs:{label:"是否必选",prop:"ismust"}},[i("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},model:{value:t.questionForm.ismust,callback:function(e){t.$set(t.questionForm,"ismust",e)},expression:"questionForm.ismust"}})],1),t._l(t.questionForm.groups,(function(e,n){return i("el-form-item",{key:e.key,attrs:{label:"填空 "+(n+1),prop:"groups."+n+".content",rules:{required:!0,message:"内容不能为空",trigger:"blur"}}},[i("el-input",{staticClass:"choiceinput",model:{value:e.content,callback:function(i){t.$set(e,"content",i)},expression:"choice.content"}}),i("el-button",{attrs:{type:"danger"},on:{click:function(i){return i.preventDefault(),t.removeChoice(e)}}},[t._v("删除")])],1)}))],2),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{icon:"el-icon-edit",type:"primary"},on:{click:t.addChoice}},[t._v("新增选项")]),i("div",[i("el-button",{attrs:{icon:"el-icon-check",type:"success"},on:{click:t.finishQuestion}},[t._v("完成")]),i("el-button",{attrs:{icon:"el-icon-close",type:"danger"},on:{click:t.cancelQuestion}},[t._v(" 取消")])],1)],1)],1)},qe=[],Se={name:"multiple-completion-addcard",data:function(){return{addDialogVisible:!1,questionForm:{content:"",ismust:!1,groups:[],answer:""},questionFormRules:{content:[{required:!0,message:"请填写题目描述",tragger:"blur"}]}}},methods:{resetForm:function(t){this.questionForm={key:Date.now(),type:t,content:"",ismust:!1,groups:[],answer:[]}},addQuestion:function(t){this.resetForm(t),this.addDialogVisible=!0},editQuestion:function(t){console.log(t),this.questionForm=t,this.addDialogVisible=!0},addChoice:function(){this.questionForm.groups.push({content:"",key:Date.now()}),this.questionForm.answer.push("")},removeChoice:function(t){var e=this.questionForm.groups.indexOf(t);-1!==e&&this.questionForm.groups.splice(e,1)},finishQuestion:function(){var t=this;this.$refs.questionFormRef.validate((function(e){if(!e)return t.$notify.error("表单有错误");if(0===t.questionForm.groups.length)return t.$notify.error("请至少添加一个选项哦");t.addDialogVisible=!1;var i=t.$parent.questionnair.questions.indexOf(t.questionForm);-1===i?t.$parent.questionnair.questions.push(t.questionForm):(t.$parent.questionnair.questions[i]=t.questionForm,t.$parent.$forceUpdate())}))},cancelQuestion:function(){console.log(111),this.$refs.questionFormRef.resetFields(),this.addDialogVisible=!1}}},ke=Se,$e=(i("ecaa"),Object(u["a"])(ke,xe,qe,!1,null,"f09ff4e4",null)),Ce=$e.exports,Fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question-card"},[i("el-divider"),i("div",[t._v("评分题")]),i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入题目标题",maxlength:"30","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入题目备注",maxlength:"60","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1),i("el-form-item",{attrs:{label:"是否必选",prop:"is_must_answer"}},[i("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},model:{value:t.questionForm.is_must_answer,callback:function(e){t.$set(t.questionForm,"is_must_answer",e)},expression:"questionForm.is_must_answer"}})],1),i("el-form-item",{attrs:{label:"最大分值",prop:"answer"}},[i("el-input-number",{attrs:{"controls-position":"right",min:1,max:10},on:{change:t.handleChange},model:{value:t.questionForm.answer,callback:function(e){t.$set(t.questionForm,"answer",e)},expression:"questionForm.answer"}})],1)],1)],1)},Ie=[],Be={inject:["reload"],name:"scoring-addcard",props:{type:{type:String,default:"normal"}},data:function(){return{editSuccess:!0,flag:0,questionForm:{title:"",content:"",type:"",ordering:0,questionnaire:0,is_must_answer:!1,option_list:[],answer:0},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}]}}},methods:{handleChange:function(t){console.log(t)},resetForm:function(t){this.questionForm={type:t,title:"",is_must_answer:!1,option_list:[],answer:""}},addQuestion:function(t){this.resetForm(t),this.flag=0},editQuestion:function(t){if(t.isShow)return this.editSuccess=!0,void this.finishQuestion(t);t.option_list=[],this.questionForm=t,console.log("answer",t.answer),this.flag=t.id},addChoice:function(t){this.questionForm.option_list.push({title:t,content:"",ordering:this.questionForm.option_list.length+1})},removeChoice:function(t){var e=this.questionForm.option_list.indexOf(t);-1!==e&&this.questionForm.option_list.splice(e,1)},finishQuestion:function(t){var e=this;this.$refs.questionFormRef.validate((function(i){if(!i)return e.editSuccess=!1,e.$notify.error({title:"表单有错误"});var n=e;if(e.flag){for(s=1;s<=n.questionForm.answer;++s)n.addChoice(s);var o=n.$route.params.text;o=b["Base64"].decode(o),o=o.substring(4,o.length-7),_.a.patch("/api/question/"+n.flag+"/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(o),is_must_answer:n.questionForm.is_must_answer,is_show_result:n.questionForm.is_show_result}).then((function(t){n.editSuccess=!0,n.$notify.success({title:"保存成功"})})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"}),n.questionForm.isShow=!0}))}else{for(var s=1;s<=n.questionForm.answer;++s)n.addChoice(s);var a=n.$route.params.text;a=b["Base64"].decode(a),a=a.substring(4,a.length-7),_.a.post("/api/question/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(a),is_must_answer:n.questionForm.is_must_answer,is_show_result:n.questionForm.is_show_result}).then((function(e){n.editSuccess=!0,n.$notify.success({title:"保存成功"});var i=e.data;for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"}),n.questionForm.isShow=!0}))}}))},cancelQuestion:function(){this.$refs.questionFormRef.resetFields()}}},Oe=Be,De=(i("014b"),Object(u["a"])(Oe,Fe,Ie,!1,null,"b0be4c62",null)),Te=De.exports,ze=i("b76a"),Ee=i.n(ze),je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question-card"},[i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"问卷标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入标题",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"问卷描述",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入问卷描述",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1)],1)],1)},Ae=[],Le={inject:["reload"],name:"title-content-dialog",data:function(){return{temp:"",addDialogVisible:!1,flag:0,questionForm:{},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}]}}},methods:{resetForm:function(t){this.questionForm={type:t,title:"",is_must_answer:!1,option_list:[],answer:""}},edit:function(t){if(this.flag=1,this.addDialogVisible)return this.finishQuestion(),void(this.addDialogVisible=!1);this.questionForm=t,this.addDialogVisible=!0},removeChoice:function(t){var e=this.questionForm.option_list.indexOf(t);-1!==e&&this.questionForm.option_list.splice(e,1)},finishQuestion:function(){var t=this;this.$refs.questionFormRef.validate((function(e){if(!e)return t.$notify.error({title:"表单有错误"});t.addDialogVisible=!1;var i=t,n=i.$route.params.text;n=b["Base64"].decode(n),n=n.substring(4,n.length-7),_.a.patch("/api/questionnaire/"+parseInt(n)+"/",{title:i.questionForm.title,content:i.questionForm.content}).then((function(t){i.$notify.success({title:"保存成功"})})).catch((function(t){i.$notify.error({title:"出错啦",message:"编辑失败"})}))}))},cancelQuestion:function(){this.$refs.questionFormRef.resetFields(),this.addDialogVisible=!1}}},Ne=Le,Ve=(i("0e40"),Object(u["a"])(Ne,je,Ae,!1,null,"21e0f6dd",null)),Qe=Ve.exports,Re=(i("450d"),i("5488")),Pe=i.n(Re),Me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-question-card"},[i("el-divider"),i("div",[t._v("定位题")]),i("el-form",{ref:"questionFormRef",attrs:{model:t.questionForm,rules:t.questionFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"题目标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入题目标题",maxlength:"30","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.title,callback:function(e){t.$set(t.questionForm,"title",e)},expression:"questionForm.title"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"content"}},[i("el-input",{attrs:{placeholder:"请输入题目备注",maxlength:"60","show-word-limit":"",autosize:!0,type:"textarea",clearable:!0,resize:"none"},model:{value:t.questionForm.content,callback:function(e){t.$set(t.questionForm,"content",e)},expression:"questionForm.content"}})],1),i("el-form-item",{attrs:{label:"是否必选",prop:"is_must_answer"}},[i("el-switch",{attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},model:{value:t.questionForm.is_must_answer,callback:function(e){t.$set(t.questionForm,"is_must_answer",e)},expression:"questionForm.is_must_answer"}})],1)],1),t._m(0)],1)},Ue=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-footer"},[i("span")])}],He={name:"position-addcard",props:{type:{type:String,default:"normal"}},data:function(){return{temp:"",editSuccess:!0,flag:0,questionForm:{title:"",content:"",type:"",ordering:0,questionnaire:0,is_must_answer:!1,option_list:[],answer:""},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}]}}},methods:{resetForm:function(t){this.questionForm={type:t,title:"",is_must_answer:!1,option_list:[],answer:""}},addQuestion:function(t){this.resetForm(t),this.flag=0,this.addDialogVisible=!0},reloadQuestion:function(t){this.questionForm=t},editQuestion:function(t){if(console.log("single-choice",t.type),t.isShow)return this.editSuccess=!0,void this.finishQuestion(t);this.questionForm=t,this.flag=t.id},addChoice:function(){this.questionForm.option_list.push({title:"",content:"",ordering:this.questionForm.option_list.length+1})},removeChoice:function(t){var e=this.questionForm.option_list.indexOf(t);-1!==e&&this.questionForm.option_list.splice(e,1)},finishQuestion:function(t){var e=this;this.$refs.questionFormRef.validate((function(i){if(!i)return e.editSuccess=!1,e.$notify.error({title:"表单有错误"});var n=e;if(e.questionForm.option_list[0].title="正确答案",e.flag){var o=n.$route.params.text;o=b["Base64"].decode(o),o=o.substring(4,o.length-7),_.a.patch("/api/question/"+n.flag+"/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(o),is_must_answer:n.questionForm.is_must_answer}).then((function(t){n.editSuccess=!0,n.$notify.success({title:"保存成功"})})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"}),n.questionForm.isShow=!0}))}else{var s=n.$route.params.text;s=b["Base64"].decode(s),s=s.substring(4,s.length-7),_.a.post("/api/question/",{option_list:n.questionForm.option_list,title:n.questionForm.title,content:n.questionForm.content,type:n.questionForm.type,ordering:n.questionForm.ordering,questionnaire:parseInt(s),is_must_answer:n.questionForm.is_must_answer}).then((function(e){n.editSuccess=!0,n.$notify.success({title:"保存成功"});var i=e.data;for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"}),n.questionForm.isShow=!0}))}}))},cancelQuestion:function(){this.$refs.questionFormRef.resetFields(),this.addDialogVisible=!1}}},Ge=He,Ke=(i("f59f"),Object(u["a"])(Ge,Me,Ue,!1,null,"d19bedd8",null)),Je=Ke.exports,We=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.dialogVisible,title:"逻辑跳转设置"},on:{"update:visible":function(e){t.dialogVisible=e}}},["single-choice"!=t.questionForm.type&&"multiple-choice"!=t.questionForm.type?i("div",{staticClass:"logical-dialog-false"},[t._v(" 暂且没有关联问题设置 ")]):t._e(),"single-choice"==t.questionForm.type||"multiple-choice"==t.questionForm.type?i("div",{staticClass:"logical-dialog"},[i("div",{staticClass:"logical-dialog-left"},[i("ul",t._l(t.questionForm.option_list,(function(e,n){return i("div",{key:e.id?e.id:e.key},[t._v(" 选项名称 "),i("a",[i("li",{staticClass:"item-li",class:{"item-li-active":e.id==t.selectOptionID},on:{click:function(i){return t.setLeft(e.id,n)}}},[t._v(" "+t._s(e.title)+" ")])])])})),0)]),i("el-divider",{attrs:{direction:"vertical"}}),i("div",{staticClass:"logical-dialog-right"},[i("ul",t._l(t.questionList,(function(e,n){return i("div",{key:e.id?e.id:e.key},[t._v(" 题目名称 "),i("li",{staticClass:"item-li",class:{"item-li-active":!!t.questionForm.option_list&&t.checkQuestion(e),"item-li-self":n<=t._index},on:{click:function(i){return t.setRight(e)}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isShowNum,expression:"isShowNum"}]},[t._v(" "+t._s(n+1)+".")]),t._v(" "+t._s(e.title)+" ")])])})),0)])],1):t._e(),i("div",{staticClass:"dialog-footer"},[i("span"),"single-choice"==t.questionForm.type||"multiple-choice"==t.questionForm.type?i("div",[i("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:t.finish}},[t._v(" 提交")]),i("el-button",{attrs:{icon:"el-icon-close",type:"danger"},on:{click:t.cancel}},[t._v(" 取消")])],1):t._e()])])],1)},Ze=[],Ye={data:function(){return{dialogVisible:!1,questionForm:{},_index:0,questionList:{},selectOptionID:0,selectOptionIndex:0,isShowNum:!0}},methods:{edit:function(t,e,i){this.questionList=t,this.questionForm=t[e],this.selectOptionID=this.questionForm.option_list[0].id,this.dialogVisible=!0,this._index=e,this.isShowNum=i},checkQuestion:function(t){var e,i=this.questionForm.option_list[this.selectOptionIndex].related_logic_question,n=Object(Ot["a"])(i);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(t.id==o.id)return!0}}catch(s){n.e(s)}finally{n.f()}return!1},setLeft:function(t,e){this.selectOptionID=t,this.selectOptionIndex=e,this.$forceUpdate()},setRight:function(t){console.log("option",this.questionForm.option_list[this.selectOptionIndex]);var e=this.questionForm.option_list[this.selectOptionIndex].related_logic_question;for(var i in e)if(t.id==e[i].id)return void e.splice(i,1);e.push(t)},finish:function(){var t,e={question_id:this.questionForm.id,relation_list:[]},i=Object(Ot["a"])(this.questionForm.option_list);try{for(i.s();!(t=i.n()).done;){var n=t.value;console.log("option",n.related_logic_question);var o,s=Object(Ot["a"])(n.related_logic_question);try{for(s.s();!(o=s.n()).done;){var a=o.value;e.relation_list.push({option:n.id,question:a.id})}}catch(l){s.e(l)}finally{s.f()}}}catch(l){i.e(l)}finally{i.f()}var r=this;_.a.put("/api/question_option_logic_relation/edit/",e).then((function(t){r.$notify.success({title:"保存成功"})})).catch((function(t){r.$notify.error({title:"出错啦",message:"编辑失败"}),r.dialogVisible=!0})),this.dialogVisible=!1},cancel:function(){this.dialogVisible=!1}}},Xe=Ye,ti=(i("1ef6"),Object(u["a"])(Xe,We,Ze,!1,null,"18f0d0e0",null)),ei=ti.exports;n["default"].component(Pe.a.name,Pe.a);var ii={components:{PositionAddCard:Je,SingleChoiceAddCard:ne,Wave:he,MultipleChoiceAddCard:ce,SingleCompletionAddCard:be,MultipleCompletionAddCard:Ce,ScoringAddCard:Te,draggable:Ee.a,TitleContentDialog:Qe,LogicalDialog:ei},data:function(){return{isEdit:!1,editItem:"",editID:0,myID:null,BMap:null,geolocation:null,positioning:!1,positioningInterval:null,countDown:30,location:null,disabled:!0,menuList:[{name:"选择题",type:"choice",children:[{name:"单选题",type:"single-choice"},{name:"多选题",type:"multiple-choice"}]},{name:"填空题",type:"completion",children:[{name:"单项填空",type:"completion"}]}],userLogin:localStorage.getItem("username.myblog"),info:null,answer:[],control_time:"",show_num:"",order_type:!1,type:""}},methods:{ToPosition:function(t){this.$nextTick((function(e){var i=document.getElementById(t.type+t.id);window.scrollTo({behavior:"smooth",top:i.offsetTop})}))},set_limit_answer_number:function(){var t=this,e=/^[0-9]*$/,i=new RegExp(e),n=!1;if(console.log(this.info.limit_answer_number),i.test(this.info.limit_answer_number)){var o=parseInt(this.info.limit_answer_number);o>=1&&(n=!0),console.log(o)}!1===n?t.$notify.error({title:"限额必须为正整数！"}):_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_limit_answer:!0,limit_answer_number:parseInt(this.info.limit_answer_number)},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"设置成功",message:"设置限额成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置限额失败！"})}))},set_password:function(){var t=this;""===this.info.password?t.$notify.error({title:"密码不能为空！",message:"请输入密码！"}):_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_locked:!0,password:this.info.password},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"设置成功",message:"设置密码成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置密码失败！"})}))},set_is_limit_answer:function(){var t=this;!1===this.info.is_limit_answer&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_limit_answer:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"问卷限额已取消！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"问卷限额取消失败！"})}))},set_islocked:function(){var t=this;!1===this.info.is_locked&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_locked:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"问卷已解锁！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"解锁问卷失败"})}))},resetPositioning:function(){this.positioning=!1,this.location=null,this.countDown=30,clearInterval(this.positioningInterval)},getLocation:function(){var t=this,e=this;if(e.geolocation=new e.BMap.Geolocation,e.geolocation){e.geolocation.enableSDKLocation(),this.positioning=!0,this.positioningInterval=setInterval((function(){0===t.countDown?(t.countDown=30,clearInterval(t.positioningInterval)):t.countDown--}),1e3);var i={enableHighAccuracy:!0,timeout:30,maximumAge:0};e.geolocation.getCurrentPosition((function(t){e.resetPositioning();var i=e.geolocation.getStatus(),n="由于未知错误而无法检索设备的位置",o="error";switch(i){case 0:if(o="success",n="获取地理位置定位请求成功",t){var s=0,a=0,r="未知",l="未知";t.point&&(s=t.point.lat,a=t.point.lng),t.address&&(r=t.address.province,l=t.address.city),e.location={"省份":r,"城市":l,"经度":s,"纬度":a}}else n="由于未知错误而无法检索设备的位置";break;case 2:n="由于未知错误而无法检索设备的位置";break;case 4:case 5:n="位置服务请求非法";break;case 6:n="应用程序没有使用位置服务的权限";break;case 7:n="网络不可用或者无法连接到获取位置信息的卫星";break;case 8:n="无法在指定的最大超时间隔内检索位置信息";break;default:n="由于未知错误而无法检索设备的位置";break}e.$notify[o]({key:NotificationKey,message:"提示",description:n})}),i)}else e.$notify.error({key:NotificationKey,message:"提示",description:"您的浏览器不支持地理位置服务"})},delete_time_control:function(){var t=this;!1===this.control_time&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_start_time:!1,is_end_time:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"已关闭时间控制！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置时间失败"})}))},save_time_control:function(){new Date;var t=this;if(!1===this.info.is_start_time&&!1===this.info.is_end_time)this.$notify.warning({title:"设置失败",message:"请至少选择一项时间限制！"});else if(this.info.is_start_time&&null===this.info.start_time)this.$notify.warning({title:"设置失败",message:"请设置开始时间！"});else if(this.info.is_end_time&&null===this.info.end_time)this.$notify.warning({title:"设置失败",message:"请设置结束时间！"});else{var e=1;this.info.is_start_time&&this.info.is_end_time&&Date.parse(this.info.start_time)>Date.parse(this.info.end_time)&&(e=0),1===e?_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_start_time:this.info.is_start_time,start_time:this.info.start_time,is_end_time:this.info.is_end_time,end_time:this.info.end_time},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"设置时间控制成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置时间失败"})})):this.$notify.warning({title:"设置失败",message:"结束时间不能早于开始时间，请检查并修改！"})}},is_show_num:function(){var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_show_question_num:this.info.is_show_question_num},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},is_login_required:function(){var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_required_login:this.info.is_required_login},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"好耶",message:"设置成功"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},is_answer_once:function(){this.info.is_only_answer_once&&!this.info.is_required_login&&(this.info.is_required_login=!0);var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_only_answer_once:this.info.is_only_answer_once,is_required_login:this.info.is_required_login},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"好耶",message:"设置成功"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},is_disorder:function(){this.order_type&&!this.info.is_required_login&&(this.info.is_required_login=!0);var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{order_type:this.order_type?"disorder":"order",is_required_login:this.info.is_required_login},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"好耶",message:"设置成功"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},check:function(){var t=window.location.origin+"/check/"+this.$route.params.text;window.open(t)},Finish:function(){var t=this;if(this.isEdit)return this.$notify.warning({title:"请完成当前题目编辑"}),void this.$nextTick((function(e){window.scrollTo({behavior:"smooth",top:t.editItem.$el.offsetTop-300})}));0===this.info.question_list.length?this.$notify.warning({title:"请至少创建一个问题哦"}):(this.$router.push({path:"/index"}),this.$notify.success({title:"问卷编辑完成",message:"快去发布吧"}))},addQuestion:function(t){var e=this;if(this.isEdit)return this.$notify.error({title:"请完成当前题目的编辑!"}),void this.$nextTick((function(t){console.log("add",e.editItem.$el.offsetTop),window.scrollTo({behavior:"smooth",top:e.editItem.$el.offsetTop-300})}));this.info.question_list.push({key:Date.now(),option_list:[{title:"",content:"",ordering:1,is_answer_choice:!0,key:Date.now(),related_logic_question:[]}],title:"",content:"",type:t,questionnaire:this.myID,is_must_answer:!1,is_show_result:!1,isShow:!1,is_scoring:!1,question_score:5});var i=this.info.question_list.length-1;this.$nextTick((function(t){e.editQuestion(e.info.question_list[i],i),e.$nextTick((function(t){var e=document.getElementById("app");window.scrollTo({behavior:"smooth",top:e.offsetHeight})}))}))},updateOrdering:function(){var t=this;this.$nextTick((function(e){for(var i in t.info.question_list)t.info.question_list.ordering=i+1}))},editQuestion:function(t,e){var i=this,n=t.type,o=this.$refs[n+e][0];return console.log("question",this.info.question_list[e]),console.log("ref",o),this.editItem&&this.editItem!=o?(this.$notify.error({title:"请完成当前题目的编辑!"}),void this.$nextTick((function(t){window.scrollTo({behavior:"smooth",top:i.editItem.$el.offsetTop-300})}))):this.isEdit&&!t.isShow?(this.$notify.error({title:"请完成当前题目的编辑!"}),void this.$nextTick((function(t){var e=document.getElementById("app");window.scrollTo({behavior:"smooth",top:e.offsetHeight})}))):(o.editQuestion(this.info.question_list[e]),o.editSuccess&&(t.isShow=!t.isShow,this.$forceUpdate()),void(t.isShow?(this.disabled=!0,this.isEdit=!0,this.editItem=o,this.editID=t.id):(this.disabled=!1,this.isEdit=!1,this.editItem="",this.editID=0,console.log("edit",this.$refs))))},cardUp:function(t,e){if(this.isEdit)return this.$notify.error({title:"请完成当前题目的编辑!"});if(0===t)return this.$notify.error("已经到顶了啊");var i,n=this,o=t,s=this.info.question_list[o-1],a=[],r=Object(Ot["a"])(s.option_list);try{for(r.s();!(i=r.n()).done;){var l=i.value;for(var t in l.related_logic_question)e.id==l.related_logic_question[t].id&&(l.related_logic_question.splice(t,1),a.push({option:l.id,question:e.id}))}}catch(c){r.e(c)}finally{r.f()}a.length&&_.a.put("/api/question_option_logic_relation/delete_list/",{delete_list:a}).then((function(t){n.$notify.success({title:"自动删除冲突逻辑"})})).catch((function(t){n.$notify.error({title:"出错啦",message:"编辑失败"})})),_.a.patch("/api/question/"+e.id+"/",{ordering:o},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){var e=n.info.question_list[o];n.info.question_list[o]=n.info.question_list[o-1],n.info.question_list[o-1]=e,n.updateOrdering(),n.$notify.success({title:"上移成功"})})).catch((function(t){console.log(t),n.$notify.error({title:"出错啦",message:"更换顺序失败"})}))},cardDown:function(t,e){if(this.isEdit)return this.$notify.error({title:"请完成当前题目的编辑!"});if(t===this.info.question_list.length-1)return this.$notify.error("不能继续往下了");var i=this,n=t;_.a.patch("/api/question/"+e.id+"/",{ordering:n+2},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){var o=i.info.question_list[n];i.info.question_list[n]=i.info.question_list[n+1],i.info.question_list[n+1]=o,i.updateOrdering();var s,a=[],r=i.info.question_list[n],l=Object(Ot["a"])(e.option_list);try{for(l.s();!(s=l.n()).done;){var c=s.value;for(var u in c.related_logic_question)c.related_logic_question[u].id==r.id&&(c.related_logic_question.splice(u,1),a.push({option:c.id,question:r.id}))}}catch(d){l.e(d)}finally{l.f()}a.length&&_.a.put("/api/question_option_logic_relation/delete_list/",{delete_list:a}).then((function(t){i.$notify.success({title:"自动删除冲突逻辑"}),i.$forceUpdate()})).catch((function(t){i.$notify.error({title:"出错啦",message:"编辑失败"})})),i.$notify.success({title:"下移成功"})})).catch((function(t){console.log(t),i.$notify.error({title:"出错啦",message:"更换顺序失败"})}))},cardDelete:function(t,e){if(!e.hasOwnProperty("id"))return this.info.question_list.splice(t,1),this.isEdit=!1,void(this.editItem="");e.isShow&&(this.isEdit=!1,this.editItem="");var i=this,n=t,o=e.id;_.a.delete("/api/question/"+e.id+"/",{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){i.info.question_list.splice(n,1),i.updateOrdering();var e,s=Object(Ot["a"])(i.info.question_list);try{for(s.s();!(e=s.n()).done;){var a,r=e.value,l=Object(Ot["a"])(r.option_list);try{for(l.s();!(a=l.n()).done;){var c=a.value;for(var u in c.related_logic_question){var d=c.related_logic_question[u];d.id==o&&c.related_logic_question.splice(u,1)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){s.e(p)}finally{s.f()}i.$notify.success({title:"删除成功"})})).catch((function(t){console.log(t),i.$notify.error({title:"出错啦",message:"删除失败"})}))},cardCopy:function(t,e){if(this.isEdit)return this.$notify.error({title:"请完成当前题目的编辑!"});var i=this;_.a.post("/api/question/copy/",{id:e.id},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){i.info.question_list.splice(t+1,0,e.data),i.$notify.success({title:"复制成功"})})).catch((function(t){i.$notify.error({title:"出错啦",message:"复制失败"})}))},cardLogical:function(t,e){console.log(this.$refs),this.$refs["logical-dialog"].edit(t,e,this.info.is_show_question_num)},editTitle:function(t){this.$refs["title-content-dialog"].edit(t)},onStart:function(){this.drag=!0,console.log("start"),console.log(this.info.question_list)},onEnd:function(t){if(this.drag=!1,t.oldIndex!==t.newIndex){var e=Math.min(t.oldIndex,t.newIndex),i=Math.max(t.oldIndex,t.newIndex),n=this.info.question_list[t.newIndex].id,o=this.info.question_list[t.newIndex].option_list,s=[];if(t.newIndex==e)for(var a=e+1;a<=i;a++){var r,l=this.info.question_list[a],c=Object(Ot["a"])(l.option_list);try{for(c.s();!(r=c.n()).done;){var u=r.value;for(var d in u.related_logic_question)n==u.related_logic_question[d].id&&(u.related_logic_question.splice(d,1),s.push({option:u.id,question:n}))}}catch(g){c.e(g)}finally{c.f()}}if(t.newIndex==i){var p,m=Object(Ot["a"])(o);try{for(m.s();!(p=m.n()).done;){u=p.value;for(var d in console.log("option",u),u.related_logic_question)for(var f=e;f<i;f++){l=this.info.question_list[f];u.related_logic_question[d].id==l.id&&(u.related_logic_question.splice(d,1),s.push({option:u.id,question:l.id}))}}}catch(g){m.e(g)}finally{m.f()}}var h=this;s.length&&_.a.put("/api/question_option_logic_relation/delete_list/",{delete_list:s}).then((function(t){h.$notify.success({title:"自动删除冲突逻辑"})})).catch((function(t){h.$notify.error({title:"出错啦",message:"编辑失败"})})),_.a.patch("/api/question/"+n+"/",{ordering:t.newIndex+1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){h.$notify.success({title:"交换成功"})})).catch((function(t){h.$notify.error({title:"出错啦",message:"更换顺序失败"})}))}},mouseEnter:function(){this.disabled=!0},mouseLeave:function(){this.isEdit||(this.disabled=!1)},mouseChange:function(){this.isEdit?this.disabled=!0:this.disabled=!1},getContent:function(t){return t.title.length<=3?t.title:t.title.slice(0,3)+"..."}},created:function(){var t=this;window.initBaiduMapScript=function(){t.BMap=window.BMap},Dt("initBaiduMapScript");var e=this;w().then((function(t){if(t[0]){var i=e.$route.params.text;i=b["Base64"].decode(i),i=i.substring(4,i.length-7),_.a.get("/api/questionnaire/"+parseInt(i),{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){e.info=t.data,e.myID=parseInt(i),e.control_time=t.data.is_end_time||t.data.is_start_time,e.info.isShow=[],e.type=e.info.type,e.order_type="disorder"===t.data.order_type,console.log(e.info),""+e.info.author.username!==""+e.userLogin&&(e.$router.push({path:"/index"}),e.$notify.error({title:"您无权编辑此问卷"})),"epidemic-check-in"===e.type?e.menuList.push({name:"打卡题",type:"function",children:[{name:"定位",type:"position"}]}):"normal"===e.type&&e.menuList.push({name:"评分题",type:"function",children:[{name:"星级",type:"scoring"}]}),e.type;var n,o=Object(Ot["a"])(e.info.question_list);try{for(o.s();!(n=o.n()).done;){var s=n.value;"completion"===s.type?s.answer="":s.answer=[]}}catch(u){o.e(u)}finally{o.f()}var a,r=Object(Ot["a"])(e.info.question_list);try{for(r.s();!(a=r.n()).done;){var l=a.value;l["isShow"]=!1;for(var c=0;c<l.option_list.length;c++)l.is_scoring?"single-choice"===l.type&&l.option_list[c].is_answer_choice&&(l.answer=c):l.option_list[c].is_answer_choice=!1}}catch(u){r.e(u)}finally{r.f()}})).catch((function(t){e.$notify.error({title:"好像发生了什么错误",message:""})}))}else e.$notify.error({title:"请先登录！",message:""})}))}},ni=ii,oi=(i("1682"),i("f46d"),Object(u["a"])(ni,Jt,Wt,!1,null,"4ef76acc",null)),si=oi.exports;ut()(oi,{VIcon:ft["a"]});var ai,ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"button-header"},[i("el-button",{attrs:{type:"primary"},on:{click:t.downloadExcel}},[t._v("导出excel")]),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger"},on:{click:function(e){return t.getPdf()}}},[t._v("导出pdf")])],1),i("el-container",{staticClass:"main",attrs:{id:"pdfDom"}},[i("el-main",{staticClass:"questionnaire",staticStyle:{height:"fit-content","padding-top":"20px !important"}},[i("el-tabs",{staticStyle:{"margin-bottom":"20px","font-size":"20px","margin-left":"2%"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticStyle:{"font-size":"larger"},attrs:{label:"统计分析",name:"first"}}),i("el-tab-pane",{staticStyle:{"font-size":"larger"},attrs:{label:"交叉分析",name:"second"}})],1),t._l(t.info.question_list,(function(e,n){return"first"===t.activeName?i("div",{key:n},[i("span",{staticStyle:{"margin-left":"30px","font-weight":"bolder"}},[t._v("第"+t._s(n+1)+"题： ")]),i("span",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[t._v(" "+t._s(e.title)+" ")]),"single-choice"===e.type?i("span",{staticStyle:{"margin-top":"20px","margin-left":"6px",color:"darkgray"}},[t._v("[单选题]")]):t._e(),"multiple-choice"===e.type?i("span",{staticStyle:{"margin-top":"20px","margin-left":"6px",color:"darkgray"}},[t._v("[多选题]")]):t._e(),"completion"===e.type?i("span",{staticStyle:{"margin-top":"20px","margin-left":"6px",color:"darkgray"}},[t._v("[填空题]")]):t._e(),"scoring"===e.type?i("span",{staticStyle:{"margin-top":"20px","margin-left":"6px",color:"darkgray"}},[t._v("[评分题]")]):t._e(),"position"===e.type?i("span",{staticStyle:{"margin-top":"20px","margin-left":"6px",color:"darkgray"}},[t._v("[定位题]")]):t._e(),i("el-collapse",{staticStyle:{"margin-top":"10px"},on:{change:function(e){return t.handleChange(n)}},model:{value:t.tmp[n].activeNames,callback:function(e){t.$set(t.tmp[n],"activeNames",e)},expression:"tmp[index].activeNames"}},[i("el-collapse-item",{staticStyle:{"margin-left":"10px"},attrs:{name:"2"}},["single-choice"===e.type||"multiple-choice"===e.type?i("template",{slot:"title"},[t._v(" 选项结果 "),i("i",{staticClass:"header-icon el-icon-info"})]):t._e(),"completion"===e.type?i("template",{slot:"title"},[t._v(" 填空结果 "),i("i",{staticClass:"header-icon el-icon-info"})]):t._e(),"position"===e.type?i("template",{slot:"title"},[t._v(" 定位结果 "),i("i",{staticClass:"header-icon el-icon-info"})]):t._e(),"scoring"===e.type?i("template",{slot:"title"},[t._v(" 评分结果 "),i("i",{staticClass:"header-icon el-icon-info"})]):t._e(),"single-choice"===e.type||"multiple-choice"===e.type?i("el-table",{staticStyle:{"margin-left":"20px"},attrs:{data:e.option_list,stripe:""}},[i("el-table-column",{attrs:{prop:"title",label:"选项"}}),i("el-table-column",{attrs:{prop:"number",label:"数量"}}),i("el-table-column",{attrs:{prop:"percent_string",label:"占比"}})],1):t._e(),"scoring"===e.type?i("el-table",{staticStyle:{"margin-left":"20px"},attrs:{data:e.option_list,stripe:""}},[i("el-table-column",{attrs:{prop:"title",label:"评分"}}),i("el-table-column",{attrs:{prop:"number",label:"数量"}}),i("el-table-column",{attrs:{prop:"percent_string",label:"占比"}})],1):t._e(),"completion"===e.type?i("el-table",{staticStyle:{"margin-left":"20px"},attrs:{data:e.option_list[0].answer_list,stripe:""}},[i("el-table-column",{attrs:{prop:"ordering",label:"序号"}}),i("el-table-column",{attrs:{prop:"modified_time",label:"提交答卷时间"}}),i("el-table-column",{attrs:{prop:"content",label:"答案文本"}})],1):t._e(),"position"===e.type?i("el-table",{staticStyle:{"margin-left":"20px"},attrs:{data:e.option_list[0].answer_list,stripe:""}},[i("el-table-column",{attrs:{prop:"ordering",label:"序号"}}),i("el-table-column",{attrs:{prop:"modified_time",label:"提交答卷时间"}}),i("el-table-column",{attrs:{prop:"content",label:"答案文本"}})],1):t._e()],2),"completion"!==e.type&&"position"!==e.type?i("el-collapse-item",{staticStyle:{"margin-left":"10px"},attrs:{name:"3"}},[i("template",{slot:"title"},[t._v(" 图表分析"),i("i",{staticClass:"header-icon el-icon-info"})]),i("el-tabs",{staticStyle:{"margin-left":"30px"},on:{"tab-click":function(e){return t.handleChartClick(n)}},model:{value:t.tmp[n].activeChart,callback:function(e){t.$set(t.tmp[n],"activeChart",e)},expression:"tmp[index].activeChart"}},t._l(t.tab_panes,(function(t,e){return i("el-tab-pane",{key:e,attrs:{label:t.name}},[i("div",{ref:n+"-"+e,refInFor:!0,staticClass:"image-div",attrs:{id:n+"-"+e}})])})),1)],2):t._e()],1)],1):t._e()})),"second"===t.activeName?i("div",{staticStyle:{display:"flex"}},[i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"},[t._v("定义行 [一般为需要分析的题目，如爱好，意愿等，限10题。]")]),t._l(t.cross1,(function(e,n){return i("div",{key:n},[i("el-select",{staticStyle:{"margin-bottom":"20px",width:"400px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"i.value"}},t._l(t.info.question_list,(function(e){return"completion"!==e.type?i("el-option",{key:e.id,attrs:{label:e.ordering+". "+e.title,value:e.id}}):t._e()})),1),t.cross1.length>1?i("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-left":"10px",color:"grey",cursor:"pointer"},on:{click:function(e){return t.remove1(n)}}}):t._e()],1)})),t.cross1.length<10?i("el-button",{staticClass:"button",attrs:{plain:""},on:{click:t.add1}},[t._v("新增题目")]):t._e()],2),i("div",{staticClass:"block"},[i("span",{staticClass:"demonstration"},[t._v("定义列 [一般为样本属性，如性别，年龄等，限10题。]")]),t._l(t.cross2,(function(e,n){return i("div",{key:n},[i("el-select",{staticStyle:{"margin-bottom":"20px",width:"400px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"i.value"}},t._l(t.info.question_list,(function(e){return"completion"!==e.type?i("el-option",{key:e.id,attrs:{label:e.ordering+". "+e.title,value:e.id}}):t._e()})),1),t.cross2.length>1?i("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-left":"10px",color:"grey",cursor:"pointer"},on:{click:function(e){return t.remove2(n)}}}):t._e()],1)})),t.cross2.length<10?i("el-button",{staticClass:"button",attrs:{plain:""},on:{click:t.add2}},[t._v("新增题目")]):t._e()],2)]):t._e(),i("el-divider",{staticStyle:{"margin-top":"3%"}}),"second"===t.activeName?i("div",{staticStyle:{"margin-top":"3%","margin-bottom":"3%"}},[i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.crossGen()}}},[t._v("开始分析")])],1),t.haveGend?i("el-collapse",t._l(t.table_list,(function(e,n){return i("div",[i("el-collapse-item",[i("template",{slot:"title"},[i("div",["single-choice"===t.table_list[n].question_x.type?i("span",{staticStyle:{margin:"0 6px 0",color:"darkgray"}},[t._v(" [单选题] ")]):t._e(),"multiple-choice"===t.table_list[n].question_x.type?i("span",{staticStyle:{margin:"0 6px 0",color:"darkgray"}},[t._v(" [多选题] ")]):t._e(),i("span",{staticStyle:{margin:"0 6px 0"}},[t._v(t._s(t.table_list[n].question_x.ordering+". "+t.table_list[n].question_x.title))]),i("v-icon",[t._v("mdi-arrow-left-right-bold")]),"single-choice"===t.table_list[n].question_y.type?i("span",{staticStyle:{margin:"0 6px 0",color:"darkgray"}},[t._v(" [单选题] ")]):t._e(),"multiple-choice"===t.table_list[n].question_y.type?i("span",{staticStyle:{margin:"0 6px 0",color:"darkgray"}},[t._v(" [多选题] ")]):t._e(),i("span",{staticStyle:{margin:"0 6px 0"}},[t._v(t._s(t.table_list[n].question_y.ordering+". "+t.table_list[n].question_y.title))])],1)]),i("div",{ref:"1-1-"+n,refInFor:!0,staticClass:"image-div",attrs:{id:"1-1-"+n}})],2)],1)})),0):t._e()],1):t._e()],2)],1)],1)},li=[],ci={components:{Wave:he},data:function(){return{haveGend:!1,placeHoledStyle:{normal:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},dataStyle:{normal:{label:{show:!0,position:"insideLeft",formatter:"{c}%"}}},crossShow:!1,cross1:[{value:""}],cross2:[{value:""}],questionForm:{title:"",content:"",type:"",ordering:0,questionnaire:0,is_must_answer:!1,option_list:[{title:"",content:"",ordering:1}],answer:""},questionFormRules:{title:[{required:!0,message:"你的题目呢",trigger:"blur"}]},activeName:"first",htmlTitle:"",userLogin:localStorage.getItem("username.myblog"),info:null,tab_panes:[{name:"柱状图",type:0},{name:"饼状图",type:1},{name:"圆环图",type:2}],tmp:[],nums:[],myChart:[],crossName_x:[],crossName_y:[],crossMat:[],pre_list:[{title:"111",num:[85,50]},{title:"2222",num:[15,50]}],name:["111","222"],table_list:[]}},mounted:function(){var t=this;w().then((function(e){if(e[0]){var i=t.$route.params.text;i=b["Base64"].decode(i),i=i.substring(4,i.length-7),_.a.get("/api/questionnaire/"+parseInt(i)+"/report/",{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.info=e.data,t.htmlTitle=e.data.title+"_数据分析",""+t.info.author.username!==""+t.userLogin&&(t.$router.push({path:"/index"}),t.$notify.error({title:"您无权查看此问卷"}));var i,n=Object(Ot["a"])(t.info.question_list);try{for(n.s();!(i=n.n()).done;){var o=i.value;if("completion"===o.type||"position"===o.type){t.tmp.push({activeChart:"0",activeNames:[]});var s,a=1,r=Object(Ot["a"])(o.option_list[0].answer_list);try{for(r.s();!(s=r.n()).done;){var l=s.value,c=l.modified_time,u=new Date(c).toJSON(),d=new Date(+new Date(u)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/," ");l.modified_time=d,l.ordering=a++}}catch(y){r.e(y)}finally{r.f()}}else t.tmp.push({activeChart:"0",activeNames:["2"]});var p,m=[],f=[],h=[],_=[],g=Object(Ot["a"])(o.option_list);try{for(g.s();!(p=g.n()).done;){var v=p.value;m.push(v.title),f.push(v.number),h.push(v.percent),_.push({value:v.number,name:v.title})}}catch(y){g.e(y)}finally{g.f()}t.nums.push({data:m,num:f,percent:h,pair:_})}}catch(y){n.e(y)}finally{n.f()}})).catch((function(e){console.log(e),t.$notify.error({title:"好像发生了什么错误"})}))}else t.$notify.error({title:"请先登录！",message:""})}))},methods:{crossGen:function(){var t=this;this.crossName_x.splice(0,this.crossName_x.length),this.crossName_y.splice(0,this.crossName_y.length),this.crossMat.splice(0,this.crossMat.length),this.myChart.splice(0,this.myChart.length);var e,i=[],n=[],o=Object(Ot["a"])(this.cross1);try{for(o.s();!(e=o.n()).done;){var s=e.value;""!==s.value&&i.push(s.value)}}catch(u){o.e(u)}finally{o.f()}var a,r=Object(Ot["a"])(this.cross2);try{for(r.s();!(a=r.n()).done;){var l=a.value;""!==l.value&&n.push(l.value)}}catch(u){r.e(u)}finally{r.f()}if(0!==i.length&&0!==n.length){this.haveGend=!0;var c=this;_.a.put("/api/questionnaire/"+this.info.id+"/cross-analysis/",{question_x_list:i,question_y_list:n},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){console.log(t.data.table_list),c.table_list=t.data.table_list})),setTimeout((function(){t.genData();for(var e=0;e<c.table_list.length;e++)t.myChart.push(""),t.genrateCross(e,"1-1-"+e)}),500)}},add1:function(){this.cross1.push({value:""})},add2:function(){this.cross2.push({value:""})},remove1:function(t){this.cross1.splice(t,1)},remove2:function(t){this.cross2.splice(t,1)},handleClick:function(t,e){"first"===this.activeName&&(this.haveGend=!1)},downloadExcel:function(){var t=document.createElement("a");t.href="http://49.233.52.139:8000/api/questionnaire/"+this.info.id+"/export-xls/",t.click()},handleChange:function(t){for(var e=0;e<3;e++)this.generateChart(t,t+"-"+e,e)},handleChartClick:function(t){for(var e=0;e<3;e++)this.generateChart(t,t+"-"+e,e)},genData:function(){var t,e=Object(Ot["a"])(this.table_list);try{for(e.s();!(t=e.n()).done;){var i,n=t.value,o=[],s=[],a=[],r=Object(Ot["a"])(n.option_x_list);try{for(r.s();!(i=r.n()).done;){var l=i.value;o.push(l.title);var c,u=[],d=Object(Ot["a"])(l.option_y_list);try{for(d.s();!(c=d.n()).done;){var p=c.value;u.push(p.percent)}}catch(_){d.e(_)}finally{d.f()}a.push({name:l.title,type:"bar",stack:"total",label:{show:!1,position:"top"},emphasis:{focus:"series"},data:u})}}catch(_){r.e(_)}finally{r.f()}this.crossMat.push(a);var m,f=Object(Ot["a"])(n.option_x_list[0].option_y_list);try{for(f.s();!(m=f.n()).done;){var h=m.value;s.push(h.title)}}catch(_){f.e(_)}finally{f.f()}this.crossName_x.push(o),this.crossName_y.push(s)}}catch(_){e.e(_)}finally{e.f()}},genrateCross:function(t,e){console.log(e),null!=this.myChart[t]&&""!==this.myChart[t]&&void 0!==this.myChart[t]&&this.myChart[t].dispose(),this.myChart[t]=this.$echarts.init(document.getElementById(e)),ai={title:{text:"单位：%",textStyle:{fontSize:15}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.crossName_x[t]},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:this.crossName_y[t]},series:this.crossMat[t]},this.myChart[t].setOption(ai)},generateChart:function(t,e,i){console.log(e);var n=this.$echarts.init(document.getElementById(e));0===i?ai={tooltip:{},legend:{data:["数量"]},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},xAxis:{type:"category",data:this.nums[t].data,axisLabel:{interval:0}},yAxis:{type:"value"},series:[{type:"bar",data:this.nums[t].num,showBackground:!0,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}]}:1===i?ai={tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},series:[{type:"pie",radius:"50%",data:this.nums[t].pair,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}:2===i?ai={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:this.nums[t].pair}]}:3===i&&(ai={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.crossName_x[t]},toolbox:{show:!0,feature:{mark:{show:!0},saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:this.crossName_y[t]},series:this.crossMat[t]}),n.setOption(ai)}}},ui=ci,di=(i("393d"),Object(u["a"])(ui,ri,li,!1,null,"2efa76f2",null)),pi=di.exports;ut()(di,{VIcon:ft["a"]});var mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-main"},[i("div",{staticClass:"questionnaire",attrs:{direction:"vertical"}},[i("div",[i("v-app",{staticStyle:{width:"10%",float:"right"}},[i("v-btn",{staticClass:"white-space",attrs:{color:"primary",depressed:"",elevation:"2"},on:{click:function(e){return t.back()}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-left")]),t._v(" 返回")],1)],1),i("h2",{staticClass:"title",staticStyle:{"min-width":"800px"}},[t._v("搜索结果")]),t.info.length?t._e():i("div",{staticClass:"not_found"},[t._v(" 无搜索结果~ "),i("i",{staticClass:"el-icon-cold-drink"})]),t._l(t.info.slice(4*(t.page-1),4*t.page),(function(e,n){return i("div",{key:n,staticClass:"a_block"},[i("h1",{on:{click:function(i){return t.toCheck(e.id)}}},["closed"===e.status?i("el-tag",{staticClass:"label"},[t._v("未发布")]):t._e(),"shared"===e.status?i("el-tag",{staticClass:"label",attrs:{type:"success"}},[t._v("已发布")]):t._e(),i("span",{staticStyle:{display:"inline-block",width:"3px"}}),i("a",[t._v(t._s(e.title))])],1),i("div",{staticStyle:{float:"right !important"}},[i("v-icon",{staticStyle:{"vertical-align":"center"},attrs:{small:""}},[t._v("mdi-file-document-multiple-outline")]),t._v(" "+t._s(e.answer_num)+" ")],1),i("div",{staticClass:"intro"},[t._v(t._s(e.content))]),i("div",{staticClass:"footer"},[i("div",{staticClass:"op cur_def"},[i("ul",["closed"===e.status?i("li",{on:{click:function(i){return t.Start(e)}}},[i("v-icon",[t._v("mdi-motion-play-outline")]),t._v(" 发布")],1):t._e(),"shared"===e.status?i("li",{on:{click:function(i){return t.Close(e.id)}}},[i("v-icon",[t._v("mdi-stop-circle-outline")]),t._v(" 停止")],1):t._e(),i("li",{on:{click:function(i){return t.toEdit(e)}}},[i("v-icon",[t._v("mdi-square-edit-outline")]),t._v(" 编辑")],1),i("li",{on:{click:function(i){return t.showSharePage(e)}}},[i("v-icon",[t._v("mdi-share-variant-outline")]),t._v(" 分享")],1),i("li",{on:{click:function(i){return t.toChart(e)}}},[i("v-icon",[t._v("mdi-list-status")]),t._v(" 统计")],1),i("li",{on:{click:function(i){return t.Delete(e.id,e.status)}}},[i("v-icon",[t._v("mdi-delete-variant")]),t._v(" 删除")],1)]),i("div",{staticClass:"created"},[t._v(" "+t._s(t.formatted_time(e.create_date))+" ")])])]),i("div",{staticClass:"clear_both"})])})),0!==t.pageLength?i("div",{staticClass:"text-center"},[i("v-app",[i("v-container",[i("v-row",{staticStyle:{"justify-content":"center"},attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"8"}},[i("v-container",{staticClass:"max-width"},[i("v-pagination",{attrs:{length:t.pageLength,"total-visible":t.pageVisible},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)],1)],1):t._e(),i("el-dialog",{staticClass:"share_window",attrs:{title:"分享问卷",visible:t.is_show,"close-on-click-modal":!0,"append-to-body":""},on:{"update:visible":function(e){t.is_show=e},opened:t.makeQrcode}},[i("el-form",{ref:"form",attrs:{model:t.shareInfo,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷链接"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{attrs:{readonly:""},model:{value:t.shareInfo.url,callback:function(e){t.$set(t.shareInfo,"url",e)},expression:"shareInfo.url"}})],1),i("el-col",{attrs:{span:8}},[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shareInfo.url,expression:"shareInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.copyError,expression:"copyError",arg:"error"}],staticStyle:{"margin-left":"5px"}},[t._v("复制")]),i("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.openShareUrl}},[t._v("打开")])],1)],1)],1),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"二维码"}},[i("canvas",{staticStyle:{width:"150px",height:"150px","margin-left":"35%"},attrs:{id:"canvas"}})])],1)],1)],2)])])},fi=[],hi={inject:["reload"],components:{QRCode:at.a},data:function(){return{search:null,info:[],page:1,itemPerpage:4,pageLength:0,pageVisible:7,is_show:!1,shareInfo:{url:""}}},methods:{back:function(){this.$router.push({path:"/index"})},test:function(){var t="//",e="/测试",i="/ceshi",n=b["Base64"].encode("moyu"+t+"wenjuan"),o=b["Base64"].encode("moyu"+e+"wenjuan"),s=b["Base64"].encode("moyu"+i+"wenjuan");console.log(n),console.log(o),console.log(s),n=b["Base64"].decode(n),o=b["Base64"].decode(o),s=b["Base64"].decode(s),console.log(n.substring(4,n.length-7)),console.log(o.substring(4,o.length-7)),console.log(s.substring(4,s.length-7))},formatted_time:function(t){var e=new Date(t);return e.toLocaleDateString()+" "+e.toLocaleTimeString()},toEdit:function(t){if(0===t.answer_num){var e=b["Base64"].encode("moyu"+t.id+"wenjuan");this.$router.push({path:"/edit/"+e})}else{var i=this;this.$confirm("请选择清空所有答卷或者复制这份问卷","此问卷已存在答卷",{confirmButtonText:"清空答卷",cancelButtonText:"复制问卷",type:"warning"}).then((function(){_.a.put("/api/questionnaire/delete-all-answer/",{id:t.id},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){i.reload(),i.$notify.success({title:"芜湖",message:"已清空答卷"})})).catch((function(t){i.$notify.error({title:"出错啦",message:"清空失败"})}))})).catch((function(){_.a.post("/api/questionnaire/copy/",{id:t.id}).then((function(t){i.reload(),i.$notify.success({title:"芜湖",message:"复制成功"})})).catch((function(t){i.$notify.error({title:"出错啦",message:"复制失败"})}))}))}},toChart:function(t){if(0===t.answer_num)this.$notify.warning({title:"此问卷暂无答卷",message:"请先回收问卷"});else{var e=b["Base64"].encode("moyu"+t.id+"wenjuan"),i=window.location.origin+"/charts/"+e;window.open(i)}},showSharePage:function(t){if("shared"===t.status){this.is_show=!0;var e=b["Base64"].encode("moyu"+t.id+"wenjuan"),i=window.location.origin+"/fill/"+e;this.shareInfo.url=i}else this.$notify.warning({title:"问卷关闭",message:"请先发布问卷"})},makeQrcode:function(){var t=document.getElementById("canvas");at.a.toCanvas(t,this.shareInfo.url)},copySuccess:function(){this.$message({type:"success",message:"已复制链接到剪切板"})},copyError:function(){this.$message({type:"error",message:"复制失败"})},openShareUrl:function(){window.open(this.shareInfo.url)},toCheck:function(t){var e=b["Base64"].encode("moyu"+t+"wenjuan"),i=window.location.origin+"/check/"+e;window.open(i)},handleCommand:function(t){"b"===t&&this.showSharePage()},Start:function(t){var e=this;_.a.put("/api/questionnaire/"+t.id+"/status/",{status:"shared"}).then((function(i){e.$notify.success({title:"问卷成功发布!",message:"您可以进行分享"}),t.status="shared",e.showSharePage(t)})).catch((function(t){e.$notify.error({title:"出错啦",message:"发布问卷失败"})}))},Close:function(t){var e=this;_.a.put("/api/questionnaire/"+t+"/status/",{status:"closed"}).then((function(t){e.$notify.success({title:"问卷已关闭!",message:""}),e.reload()})).catch((function(t){e.$notify.error({title:"出错啦",message:"关闭问卷失败"})}))},Delete:function(t,e){if("shared"===e)this.$notify.warning({title:"桥豆麻袋",message:"请先关闭问卷"});else{var i=this;this.$confirm("您确定要删除该问卷吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){_.a.put("/api/questionnaire/"+t+"/status/",{status:"deleted"}).then((function(t){i.$notify.success({title:"问卷成功删除!",message:"您可以到回收站中恢复问卷"}),i.reload()})).catch((function(t){i.$notify.error({title:"出错啦",message:"删除问卷失败"})}))}))}}},mounted:function(){var t=this;console.log(t.$route.query.type),t.$route.query.type?t.search=JSON.parse(t.$route.query.type):w().then((function(e){if(e[0]){var i=t.$route.params.text;i=b["Base64"].decode(i),i=i.substring(3,i.length-4),console.log(i),_.a.put("/api/questionnaire/search/",{keyword:i},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){console.log(e.data),t.info=e.data,t.pageLength=parseInt((t.info.length+t.itemPerpage-1)/t.itemPerpage)})).catch((function(e){t.$notify.error({title:"好像发生了什么错误"})}))}else t.$notify.error({title:"请先登录！"})}))}},_i=hi,gi=(i("3729"),i("6b00"),Object(u["a"])(_i,mi,fi,!1,null,"552b2b9e",null)),vi=gi.exports;ut()(gi,{VApp:dt["a"],VBtn:Et["a"],VCol:pt["a"],VContainer:mt["a"],VIcon:ft["a"],VPagination:ht["a"],VRow:_t["a"]});var yi=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},wi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"questionnaire"},[i("h1",{staticClass:"notFound"},[t._v("404")]),i("div",{staticClass:"content"}),i("div",{staticClass:"line"}),i("h1",{staticClass:"content"},[t._v("找不到页面")])])])}],bi={name:"Thank",components:{},data:function(){return{}},mounted:function(){},methods:{click:function(){this.$router.push({path:"/index"})}}},xi=bi,qi=(i("a285"),i("2627"),Object(u["a"])(xi,yi,wi,!1,null,"6220328a",null)),Si=qi.exports,ki=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"questionnaire"},["vote"===t.info.type?i("div",[i("h1",{staticClass:"title"},[t._v(" "+t._s(t.htmlTitle)+"投票结果:")]),t._l(t.info.question_list,(function(e,n){return i("div",{key:n,staticStyle:{"margin-top":"30px","padding-left":"10px"}},["single-choice"!==e.type&&"multiple-choice"!==e.type||!e.is_show_result?t._e():i("div",[i("div",{staticStyle:{"padding-left":"30px","margin-bottom":"15px"}},[i("h3",[t._v(t._s(n+1+". "+e.title))])]),t._l(e.option_list,(function(e){return i("div",{key:e.id,staticStyle:{"margin-top":"4px"}},[i("div",{staticStyle:{float:"left","padding-left":"55px","min-width":"550px","max-width":"630px",color:"darkblue"}},[i("span",[t._v(t._s(e.title))])]),i("div",{staticStyle:{"margin-left":"400px"}},[i("span",{staticStyle:{color:"red"}},[t._v(t._s(e.answer_num)+"票("+t._s(e.percent_string)+")")])])])}))],2)])}))],2):t._e(),"vote"!==t.info.type?i("h1",{staticClass:"title"},[t._v("感谢填写!")]):t._e(),i("div",{staticClass:"content"},[t._v(" 问卷到此结束，感谢您的参与！")]),i("div",{staticClass:"line"}),i("el-button",{attrs:{type:"primary"},on:{click:t.click}},[t._v("确定")])],1)])},$i=[],Ci={name:"Thank",components:{},data:function(){return{info:"",flag:!0}},mounted:function(){var t=this,e=t.$route.params.text;e=b["Base64"].decode(e),e=e.substring(4,e.length-7),_.a.get("/api/questionnaire/"+parseInt(e)).then((function(e){t.info=e.data,t.htmlTitle=e.data.title})).catch((function(e){t.$notify.error({title:"好像发生了什么错误",message:e.message})}))},methods:{click:function(){this.$router.push({path:"/"})}}},Fi=Ci,Ii=(i("2941"),i("f128"),Object(u["a"])(Fi,ki,$i,!1,null,"9b256eb8",null)),Bi=Ii.exports,Oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-app",[i("v-carousel",{attrs:{cycle:"",height:"400","hide-delimiter-background":"","show-arrows-on-hover":""}},t._l(t.items,(function(e,n){return i("v-carousel-item",{key:n,staticClass:"fill-height",attrs:{src:e.src}},[i("v-row",{attrs:{justify:"center"}},[i("h2",[t._v(t._s(e.title))])]),i("v-row",{attrs:{justify:"center"}},[i("h3",[t._v(t._s(e.subtitle))])]),i("v-row",{attrs:{justify:"center"}},[i("img",{attrs:{src:e.img}})])],1)})),1),i("h1",{staticClass:"title"},[t._v(" 🦈🐬🐳🐋🐟🐠🐡 ")]),i("p",{staticClass:"subContent",staticStyle:{"max-width":"568px"}},[i("strong",[t._v("摸鱼问卷平台")]),t._v(" 拥有简洁轻量的界面，问卷发布快捷方便，无需人工处理问卷数据，大大节省调研成本。 目前向所有用户免费开放，志在做一款用户喜爱的在线问卷调查服务平台✊ ")]),i("v-container",{staticStyle:{"margin-bottom":"40px"}},[i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"auto"}},[i("v-btn",{attrs:{elevation:"4","min-width":t.btnWidth,color:"primary",depressed:"","x-large":""},on:{click:function(e){return t.$router.push({path:"/index"})}}},[i("v-icon",{attrs:{left:""}},[t._v(" mdi-speedometer ")]),t._v(" 开始使用吧 ")],1)],1),i("v-col",{attrs:{cols:"auto"}},[i("v-btn",{attrs:{elevation:"4","min-width":t.btnWidth,color:"primary",href:"https://zhuanlan.zhihu.com/p/338360442",target:"_blank",outlined:"","x-large":""}},[i("v-icon",{attrs:{left:""}},[t._v(" mdi-fish ")]),t._v(" 为什么选择摸鱼 ")],1)],1),i("v-col",{attrs:{cols:"auto"}},[i("v-btn",{attrs:{elevation:"4","min-width":t.btnWidth,color:"#212121",dark:"",depressed:"",href:"https://github.com",rel:"noopener",target:"_blank","x-large":""}},[i("v-icon",{attrs:{left:""}},[t._v(" mdi-github ")]),t._v(" GitHub ")],1)],1)],1)],1),i("v-divider",{staticStyle:{width:"50%",margin:"0 auto"}}),i("p",{staticClass:"subContent",staticStyle:{"max-width":"568px","margin-top":"40px"}},[t._v(" 项目团队精心设计和打造多种不同类型的问卷以适应不同场合需求。 做到创建发布收集一条龙 — 查看👀相应的类型介绍👇，以便更好地做出选择。 ")]),i("div",{staticClass:"all_block"},[i("div",{staticClass:"block",staticStyle:{width:"100% !important"}},[i("img",{staticClass:"img",attrs:{src:"https://www.wjx.cn/images/newimg/pic-2/survey@2x.png",width:"200px",height:"200px"}}),i("div",{staticStyle:{"margin-left":"10%",display:"inline-block"}},[i("p",{staticClass:"sub",staticStyle:{"font-size":"2rem","font-weight":"400"}},[t._v(" 调查问卷"),i("br")]),i("p",{staticClass:"sub"},[t._v("最基础的问卷类型，包含单选、多选、填空及评分题型。简约好用是我们的初衷，能够满足大部分问卷的需求")])])])]),i("div",{staticClass:"all_block",staticStyle:{"background-color":"#fdfbfb"}},[i("div",{staticClass:"block",staticStyle:{"border-right":"1px solid #eff2f6"}},[i("img",{staticClass:"img",attrs:{src:"https://www.wjx.cn/images/newimg/pic-2/vote@2x.png",width:"200px",height:"200px"}}),i("div",{staticStyle:{"margin-left":"20%",display:"inline-block"}},[i("p",{staticClass:"sub",staticStyle:{"font-size":"2rem","font-weight":"400"}},[t._v(" 投票问卷"),i("br")]),i("p",{staticClass:"sub"},[t._v("无需人工计票，实时更新和展示选项对应的票数和结果")])])]),i("div",{staticClass:"block"},[i("img",{staticClass:"img",attrs:{src:"https://www.wjx.cn/images/newimg/pic-2/form@2x.png",width:"200px",height:"200px"}}),i("div",{staticStyle:{"margin-left":"20%",display:"inline-block"}},[i("p",{staticClass:"sub",staticStyle:{"font-size":"2rem","font-weight":"400"}},[t._v(" 报名问卷"),i("br")]),i("p",{staticClass:"sub"},[t._v("对问卷和问题选项进行限额，踊跃报名活动，机会先到先得 ")])])])]),i("div",{staticClass:"all_block"},[i("div",{staticClass:"block",staticStyle:{"border-right":"1px solid #eff2f6"}},[i("img",{staticClass:"img",attrs:{src:"https://www.wjx.cn/images/newimg/pic-2/exam@2x.png",width:"200px",height:"200px"}}),i("div",{staticStyle:{"margin-left":"20%",display:"inline-block"}},[i("p",{staticClass:"sub",staticStyle:{"font-size":"2rem","font-weight":"400"}},[t._v(" 考试问卷"),i("br")]),i("p",{staticClass:"sub"},[t._v("“考试开始，请考生开始答题”，系统自动评分，答案解析一键生成")])])]),i("div",{staticClass:"block"},[i("img",{staticClass:"img",attrs:{src:"https://www.wjx.cn/images/newimg/pic-2/360-evaluate@2x.png",width:"200px",height:"200px"}}),i("div",{staticStyle:{"margin-left":"20%",display:"inline-block"}},[i("p",{staticClass:"sub",staticStyle:{"font-size":"2rem","font-weight":"400"}},[t._v(" 健康打卡"),i("br")]),i("p",{staticClass:"sub"},[t._v("疫情防控不可懈怠，健康你我从按时打卡做起")])])])]),i("v-footer",{attrs:{padless:""}},[i("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[t._v(" "+t._s((new Date).getFullYear())+" — "),i("strong",[t._v("Group No.19")]),t._v(" FISHING QUESTIONNAIRE ")])],1)],1)],1)},Di=[],Ti={name:"Welcome",data:function(){return{show:!1,expand:!1,btnWidth:228,items:[{src:"https://z3.ax1x.com/2021/06/17/2juuz6.jpg",title:"简约好用的问卷系统",subtitle:"简约好用，轻松开启在线调试",img:"https://wj.qq.com/image/index_slider_p1.png?v=@version"},{src:"https://z3.ax1x.com/2021/06/17/2ju6Fs.jpg",title:"数据实时统计在线分析",subtitle:"回收数据实时在线统计，图表化展示，清晰直观",img:"https://wj.qq.com/image/index_slider_p2.png?v=@version"}]}}},zi=Ti,Ei=(i("9cf1c"),i("5e66")),ji=i("3e35"),Ai=i("ce7e"),Li=i("553a"),Ni=Object(u["a"])(zi,Oi,Di,!1,null,"13ded388",null),Vi=Ni.exports;ut()(Ni,{VApp:dt["a"],VBtn:Et["a"],VCarousel:Ei["a"],VCarouselItem:ji["a"],VCol:pt["a"],VContainer:mt["a"],VDivider:Ai["a"],VFooter:Li["a"],VIcon:ft["a"],VRow:_t["a"]});var Qi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-main"},[i("div",{staticClass:"questionnaire",attrs:{direction:"vertical"}},[i("div",[i("v-app",{staticStyle:{width:"10%",float:"right"}},[i("v-btn",{staticClass:"white-space",attrs:{color:"primary",depressed:"",elevation:"2"},on:{click:function(e){return t.back()}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-left")]),t._v(" 返回")],1)],1),i("h2",{staticClass:"title",staticStyle:{"min-width":"800px"}},[t._v("创建问卷")]),i("v-app",[i("v-container",{staticStyle:{margin:"40px auto"}},[i("v-row",{attrs:{justify:"center"}},[t._l(t.type,(function(e,n){return[i("v-col",{key:n,attrs:{cols:"auto"}},[i("v-card",{staticClass:"mx-auto",attrs:{"min-width":"200px"}},[i("v-img",{staticClass:"img",attrs:{src:e.src,"max-height":"120px","max-width":"120px"}}),i("v-card-title",[t._v(" "+t._s(e.title)+" ")]),i("v-card-subtitle",[t._v(" "+t._s(e.subtitle)+" ")]),i("v-card-actions",[i("v-btn",{attrs:{color:"#3F87DA",text:""},on:{click:function(i){return t.Create(e)}}},[t._v(" create ")]),i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:function(t){e.show=!e.show}}},[i("v-icon",[t._v(t._s(e.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),i("v-expand-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}]},[i("v-divider"),i("v-card-text",[t._v(" "+t._s(e.content)+" ")])],1)])],1)],1)]}))],2)],1)],1)],1)])])},Ri=[],Pi={inject:["reload"],data:function(){return{type:[{src:"https://www.wjx.cn/images/newimg/pic-2/survey@2x.png",title:"普通问卷",subtitle:"点击 CREATE 创建",type:"normal",show:!1,content:"最基础的问卷类型，包含单选、多选、填空及评分题型。简约好用是我们的初衷，能够满足大部分问卷的需求"},{src:"https://www.wjx.cn/images/newimg/pic-2/vote@2x.png",title:"投票问卷",subtitle:"点击 CREATE 创建",type:"vote",show:!1,content:"无需人工计票，实时更新和展示选项对应的票数和结果"},{src:"https://www.wjx.cn/images/newimg/pic-2/form@2x.png",title:"报名问卷",subtitle:"点击 CREATE 创建",type:"signup",show:!1,content:"对问卷和问题选项进行限额，踊跃报名活动，机会先到先得"},{src:"https://www.wjx.cn/images/newimg/pic-2/exam@2x.png",title:"考试问卷",subtitle:"点击 CREATE 创建",type:"exam",show:!1,content:"“考试开始，请考生开始答题”，系统自动评分，答案解析一键生成\n\n"},{src:"https://www.wjx.cn/images/newimg/pic-2/360-evaluate@2x.png",title:"健康打卡",subtitle:"点击 CREATE 创建",type:"epidemic-check-in",show:!1,content:"疫情防控不可懈怠，健康你我从按时打卡做起"}]}},methods:{back:function(){this.$router.push({path:"/index"})},Create:function(t){var e=this;w().then((function(i){i[0]?_.a.post("api/questionnaire/",{title:t.title+"标题",content:t.title+"描述",type:t.type},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){var i=b["Base64"].encode("moyu"+t.data.id+"wenjuan");e.$router.push({path:"/edit/"+i})})).catch((function(t){e.$notify.error({title:"出错啦",message:"创建问卷失败"})})):e.$notify.error({title:"创建问卷失败",message:"请先登录！"})}))}},mounted:function(){}},Mi=Pi,Ui=(i("6509"),i("70ea"),i("b0af")),Hi=i("99d9"),Gi=i("0789"),Ki=i("adda"),Ji=i("2fa4"),Wi=Object(u["a"])(Mi,Qi,Ri,!1,null,"5b193754",null),Zi=Wi.exports;ut()(Wi,{VApp:dt["a"],VBtn:Et["a"],VCard:Ui["a"],VCardActions:Hi["a"],VCardSubtitle:Hi["b"],VCardText:Hi["c"],VCardTitle:Hi["d"],VCol:pt["a"],VContainer:mt["a"],VDivider:Ai["a"],VExpandTransition:Gi["a"],VIcon:ft["a"],VImg:Ki["a"],VRow:_t["a"],VSpacer:Ji["a"]});var Yi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",{staticClass:"main"},[i("el-container",[i("a-affix",{staticStyle:{width:"23%"},attrs:{"offset-top":4}},[i("el-aside",{staticStyle:{height:"fit-content"}},[i("el-container",{staticClass:"class"},[i("div",{staticStyle:{"margin-left":"0px"},on:{click:t.check}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-document-checked"})]),i("h4",[t._v("预览问卷")])],1),i("div",{staticStyle:{"margin-left":"50px"},on:{click:t.Finish}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-finished"})]),i("h4",[t._v("完成编辑")])],1)]),i("el-menu",{staticClass:"aside-mid"},[i("div",{staticClass:"aside-top"},[i("span",[t._v(" 题型选择 ")])]),t._l(t.menuList,(function(e){return i("el-submenu",{key:e.type,attrs:{index:e.type}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.name))])]),t._l(e.children,(function(e){return i("el-menu-item",{key:e.type,attrs:{index:e.type},on:{click:function(i){return t.addQuestion(e.type)}}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.name))])])],2)}))],2)}))],2),i("el-menu",{staticClass:"aside-mid"},[i("div",{staticClass:"aside-top"},[i("span",[t._v(" 问卷设置 ")])]),i("div",{staticClass:"time_control",staticStyle:{"margin-top":"20px"}},[i("span",{staticStyle:{"padding-left":"15px"}},[t._v("时间控制")]),i("el-switch",{staticStyle:{float:"right","padding-right":"20px"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.delete_time_control},model:{value:t.control_time,callback:function(e){t.control_time=e},expression:"control_time"}}),t.control_time?i("div",[i("div",[i("div",{staticStyle:{"padding-left":"8px"}},[i("el-checkbox",{model:{value:t.info.is_start_time,callback:function(e){t.$set(t.info,"is_start_time",e)},expression:"info.is_start_time"}},[t._v("开始时间")])],1),i("div",{staticStyle:{"padding-left":"20px"}},[t.info.is_start_time?i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.info.start_time,callback:function(e){t.$set(t.info,"start_time",e)},expression:"info.start_time"}}):t._e()],1)]),i("div",[i("div",{staticStyle:{"padding-left":"8px"}},[i("el-checkbox",{model:{value:t.info.is_end_time,callback:function(e){t.$set(t.info,"is_end_time",e)},expression:"info.is_end_time"}},[t._v("结束时间")])],1),i("div",{staticStyle:{"padding-left":"20px"}},[t.info.is_end_time?i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.info.end_time,callback:function(e){t.$set(t.info,"end_time",e)},expression:"info.end_time"}}):t._e()],1)]),i("div",{staticStyle:{"padding-left":"190px","margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save_time_control}},[t._v(" 保存更改 ")])],1)]):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"padding-left":"15px","margin-top":"30px"}},[t._v("是否显示题号")]),i("el-switch",{staticStyle:{float:"right","padding-right":"20px"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.is_show_num},model:{value:t.info.is_show_question_num,callback:function(e){t.$set(t.info,"is_show_question_num",e)},expression:"info.is_show_question_num"}})],1)])],1)],1),i("el-main",{staticClass:"questionnaire",staticStyle:{height:"fit-content"}},[i("div",{staticClass:"question-title",attrs:{contenteditable:"true"}},[i("h2",[t._v(t._s(t.info.title))])]),i("div",{staticClass:"intro",attrs:{contenteditable:"true"},on:{input:function(e){t.info.content=e.target.innerText},blur:function(e){return t.editTitle(t.info)}}},[t._v(" "+t._s(t.info.content))]),i("el-container",{staticStyle:{display:"inline"}},[i("el-collapse",{staticClass:"question-container",on:{change:function(e){return t.editTitle(t.info)}},model:{value:t.info.isShow,callback:function(e){t.$set(t.info,"isShow",e)},expression:"info.isShow"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("span",[t._v(" 编辑标题和简介 ")])]),i("title-content-dialog",{ref:"title-content-dialog"})],2)],1)],1),i("draggable",{attrs:{list:t.info.question_list,animation:"500","chosen-class":"chosen",disabled:t.disabled},on:{start:t.onStart,end:t.onEnd}},[i("transition-group",t._l(t.info.question_list,(function(e,n){return i("div",{key:e.id?e.id:e.key,staticClass:"card"},[i("div",{staticStyle:{padding:"20px"}},[i("div",{staticClass:"op"},[i("ul",{on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave}},[i("li",{on:{click:function(i){return t.cardDelete(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-delete-variant")]),t._v(" 删除")],1),i("li",{on:{click:function(i){return t.cardCopy(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-content-copy")]),t._v(" 复制")],1),i("li",{on:{click:function(i){return t.cardDown(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down-circle-outline")]),t._v(" 下移")],1),i("li",{on:{click:function(i){return t.cardUp(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up-circle-outline")]),t._v(" 上移")],1)])]),"single-choice"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[单选题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-radio-group",{model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}},t._l(e.option_list,(function(n,o){return i("el-radio",{key:n.id?n.id:n.key,attrs:{label:o,disabled:e.is_scoring},nativeOn:{click:function(e){return t.debugShow(n)}}},[t._v(" "+t._s(n.title)+" "),e.is_scoring&&o==e.answer?i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("[正确答案]")]):t._e()])})),1)]:t._e(),"multiple-choice"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[多选题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),t._l(e.option_list,(function(n,o){return i("div",{key:o},[i("el-checkbox",{attrs:{label:o,disabled:e.is_scoring},model:{value:n.is_answer_choice,callback:function(e){t.$set(n,"is_answer_choice",e)},expression:"subItem.is_answer_choice"}},[t._v(" "+t._s(n.title)+" "),e.is_scoring&&n.is_answer_choice?i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("[正确答案]")]):t._e()])],1)}))]:t._e(),"completion"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[填空题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-input",{staticClass:"single-completion-input",attrs:{autosize:!0,type:"textarea",clearable:!0,resize:"none",disabled:e.is_scoring},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}}),e.is_scoring?i("div",{staticStyle:{color:"#F56C6C","margin-top":"20px"}},[t._v("正确答案: "+t._s(e.option_list[0].content))]):t._e()]:t._e(),"position"==e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[定位题]")]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("br"),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e(),i("span",{staticStyle:{"margin-right":"20px"}},[t._v(" 当前定位: ")]),i("el-button",{attrs:{icon:t.positioning?"el-icon-loading":t.none},on:{click:t.getLocation}},[t.location?i("span",[t._v(t._s(t.location["省份"]+t.location["城市"]))]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.location&&!t.positioning,expression:"!location && !positioning"}]},[t._v("点击获取位置")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.positioning,expression:"positioning"}]},[t._v(" 等待获取中 "),i("span",{staticClass:"red"},[t._v(t._s(t.countDown))]),t._v(" 秒 ")])])],1)]:t._e(),"scoring"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[评分题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-slider",{staticClass:"scoring-input",attrs:{step:1,max:e.option_list.length-1},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}})]:t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.is_scoring,expression:"item.is_scoring"}],staticStyle:{"margin-top":"20px",color:"#F56C6C"}},[t._v("本题分值: "+t._s(e.question_score))])],2),i("el-container",{staticStyle:{display:"inline"}},[i("div",{staticClass:"question-container"},[i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}]},["single-choice"===e.type?i("single-choice-add-card",{ref:"single-choice"+n,refInFor:!0}):t._e(),"multiple-choice"===e.type?i("multiple-choice-add-card",{ref:"multiple-choice"+n,refInFor:!0}):t._e(),"completion"===e.type?i("single-completion-add-card",{ref:"completion"+n,refInFor:!0}):t._e(),"scoring"===e.type?i("scoring-add-card",{ref:"scoring"+n,refInFor:!0}):t._e(),"position"==e.type?i("position-add-card",{ref:"position"+n,refInFor:!0}):t._e()],1)])],1)]),i("el-divider"),i("el-button",{staticClass:"edit-button",attrs:{icon:1==e.isShow?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(i){return t.editQuestion(e,n)}},nativeOn:{mouseenter:function(e){return t.mouseEnter(e)},mouseleave:function(e){return t.mouseLeave(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isShow,expression:"item.isShow == true"}]},[t._v("完成编辑")]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isShow,expression:"item.isShow == false"}]},[t._v("进入编辑")])])],1)})),0)],1),i("div",{staticClass:"not_found",staticStyle:{"line-height":"100px"}},[t._v(" 快去侧边栏选择题型创建新的问题o(*￣▽￣*)ブ "),i("i",{staticClass:"el-icon-cold-drink"})]),i("el-button",{staticClass:"main-footer",attrs:{type:"danger"},on:{click:t.Finish}},[t._v("完成编辑")])],1)],1)],1),i("el-backtop")],1)},Xi=[];n["default"].component(Pe.a.name,Pe.a);var tn={components:{PositionAddCard:Je,SingleChoiceAddCard:ne,Wave:he,MultipleChoiceAddCard:ce,SingleCompletionAddCard:be,MultipleCompletionAddCard:Ce,ScoringAddCard:Te,draggable:Ee.a,TitleContentDialog:Qe},data:function(){return{myID:null,isEdit:!1,editItem:"",BMap:null,geolocation:null,positioning:!1,positioningInterval:null,countDown:30,location:null,disabled:!0,menuList:[{name:"选择题",type:"choice",children:[{name:"单选题",type:"single-choice"},{name:"多选题",type:"multiple-choice"}]},{name:"填空题",type:"completion",children:[{name:"单项填空",type:"completion"}]},{name:"评分题",type:"scoring",children:[{name:"评分题",type:"scoring"}]}],userLogin:localStorage.getItem("username.myblog"),info:null,answer:[],control_time:"",show_num:""}},methods:{resetPositioning:function(){this.positioning=!1,this.location=null,this.countDown=30,clearInterval(this.positioningInterval)},getLocation:function(){var t=this,e=this;if(e.geolocation=new e.BMap.Geolocation,e.geolocation){e.geolocation.enableSDKLocation(),this.positioning=!0,this.positioningInterval=setInterval((function(){0===t.countDown?(t.countDown=30,clearInterval(t.positioningInterval)):t.countDown--}),1e3);var i={enableHighAccuracy:!0,timeout:30,maximumAge:0};e.geolocation.getCurrentPosition((function(t){e.resetPositioning();var i=e.geolocation.getStatus(),n="由于未知错误而无法检索设备的位置",o="error";switch(i){case 0:if(o="success",n="获取地理位置定位请求成功",t){var s=0,a=0,r="未知",l="未知";t.point&&(s=t.point.lat,a=t.point.lng),t.address&&(r=t.address.province,l=t.address.city),e.location={"省份":r,"城市":l,"经度":s,"纬度":a}}else n="由于未知错误而无法检索设备的位置";break;case 2:n="由于未知错误而无法检索设备的位置";break;case 4:case 5:n="位置服务请求非法";break;case 6:n="应用程序没有使用位置服务的权限";break;case 7:n="网络不可用或者无法连接到获取位置信息的卫星";break;case 8:n="无法在指定的最大超时间隔内检索位置信息";break;default:n="由于未知错误而无法检索设备的位置";break}e.$notify[o]({key:NotificationKey,message:"提示",description:n})}),i)}else e.$notify.error({key:NotificationKey,message:"提示",description:"您的浏览器不支持地理位置服务"})},delete_time_control:function(){var t=this;!1===this.control_time&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_start_time:!1,is_end_time:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"已关闭时间控制！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置时间失败"})}))},save_time_control:function(){new Date;var t=this;if(!1===this.info.is_start_time&&!1===this.info.is_end_time)this.$notify.warning({title:"设置失败",message:"请至少选择一项时间限制！"});else if(this.info.is_start_time&&null===this.info.start_time)this.$notify.warning({title:"设置失败",message:"请设置开始时间！"});else if(this.info.is_end_time&&null===this.info.end_time)this.$notify.warning({title:"设置失败",message:"请设置结束时间！"});else{var e=1;this.info.is_start_time&&this.info.is_end_time&&Date.parse(this.info.start_time)>Date.parse(this.info.end_time)&&(e=0),1===e?_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_start_time:this.info.is_start_time,start_time:this.info.start_time,is_end_time:this.info.is_end_time,end_time:this.info.end_time},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"设置时间控制成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置时间失败"})})):this.$notify.warning({title:"设置失败",message:"结束时间不能早于开始时间，请检查并修改！"})}},is_show_num:function(){var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_show_question_num:this.info.is_show_question_num},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},check:function(){var t=b["Base64"].encode("moyu"+this.$route.params.id+"wenjuan"),e=window.location.origin+"/check/"+t;window.open(e)},Finish:function(){0===this.info.question_list.length?this.$notify.warning({title:"请至少创建一个问题哦"}):(this.$router.push({path:"/index"}),this.$notify.success({title:"问卷编辑完成",message:"快去发布吧"}))},addQuestion:function(t){var e=this;if(this.isEdit)return this.$notify.error({title:"请完成当前题目的编辑!"}),void this.$nextTick((function(t){window.scrollTo({behavior:"smooth",top:e.editItem.$el.offsetTop-300})}));this.info.question_list.push({key:Date.now(),option_list:[{title:"",content:"",ordering:1,is_answer_choice:!0,key:Date.now()}],title:"",content:"",type:t,questionnaire:this.myID,is_must_answer:!1,is_show_result:!1,isShow:!1,is_scoring:!1,question_score:5});var i=this.info.question_list.length-1;this.$nextTick((function(t){e.editQuestion(e.info.question_list[i],i),e.$nextTick((function(t){var e=document.getElementById("app");window.scrollTo({behavior:"smooth",top:e.offsetHeight})}))}))},editQuestion:function(t,e){var i=this,n=t.type,o=this.$refs[n+e][0];return this.editItem&&this.editItem!=o?(this.$notify.error("请完成之前题目编辑"),void this.$nextTick((function(t){window.scrollTo({behavior:"smooth",top:i.editItem.$el.offsetTop-300})}))):this.isEdit&&!t.isShow?(this.$notify.error("请完成之前题目编辑"),void this.$nextTick((function(t){var e=document.getElementById("app");window.scrollTo({behavior:"smooth",top:e.offsetHeight})}))):(o.editQuestion(this.info.question_list[e]),o.editSuccess&&(t.isShow=!t.isShow,this.$forceUpdate()),void(t.isShow?(this.disabled=!0,this.isEdit=!0,this.editItem=o):(this.disabled=!1,this.isEdit=!1,this.editItem="")))},cardUp:function(t,e){if(this.isEdit)return this.$notify.error("请完成当前编辑");if(0===t)return this.$notify.error("已经到顶了啊");var i=this;console.log(t),_.a.patch("/api/question/"+e.id+"/",{ordering:t},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){var n=i.info.question_list[t];i.info.question_list[t]=i.info.question_list[t-1],i.info.question_list[t-1]=n,i.$forceUpdate()})).catch((function(t){i.$notify.error({title:"出错啦",message:"更换顺序失败"})}))},cardDown:function(t,e){if(this.isEdit)return this.$notify.error("请完成当前编辑");if(t===this.info.question_list.length-1)return this.$notify.error("不能继续往下了");var i=this;console.log(t),_.a.patch("/api/question/"+e.id+"/",{ordering:t+2},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){var n=i.info.question_list[t];i.info.question_list[t]=i.info.question_list[t+1],i.info.question_list[t+1]=n,i.$forceUpdate()})).catch((function(t){i.$notify.error({title:"出错啦",message:"更换顺序失败"})}))},cardDelete:function(t,e){if(!e.hasOwnProperty("id"))return this.info.question_list.splice(t,1),this.isEdit=!1,void(this.editItem="");var i=this;_.a.delete("/api/question/"+e.id+"/",{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){i.info.question_list.splice(t,1)})).catch((function(t){i.$notify.error({title:"出错啦",message:"删除失败"})}))},cardCopy:function(t,e){if(this.isEdit)return this.$notify.error("请完成当前编辑");var i=this;_.a.post("/api/question/copy/",{id:e.id},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){i.info.question_list.splice(t+1,0,JSON.parse(JSON.stringify(i.info.question_list[t])))})).catch((function(t){i.$notify.error({title:"出错啦",message:"复制失败"})}))},editTitle:function(t){this.$refs["title-content-dialog"].edit(t)},onStart:function(){this.drag=!0,console.log("start"),console.log(this.info.question_list)},onEnd:function(t){if(this.drag=!1,t.oldIndex!=t.newIndex){for(var e=0;e<this.info.question_list.length;e++){var i=this.info.question_list[e];i.isShow&&(this.$refs[i.type+e][0].questionForm=i)}var n=this.info.question_list[t.newIndex].id,o=this;_.a.patch("/api/question/"+n+"/",{ordering:t.newIndex+1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){o.$notify.success({title:"交换成功"})})).catch((function(t){o.$notify.error({title:"出错啦",message:"更换顺序失败"})}))}},mouseEnter:function(){this.disabled=!0},mouseLeave:function(){this.isEdit||(this.disabled=!1)},mouseChange:function(){this.isEdit?this.disabled=!0:this.disabled=!1},debugShow:function(t){console.log("item",t)}},mounted:function(){var t=this;window.initBaiduMapScript=function(){t.BMap=window.BMap},Dt("initBaiduMapScript");var e=this;w().then((function(t){if(t[0]){var i=e.$route.params.text;i=b["Base64"].decode(i),i=i.substring(4,i.length-7),_.a.get("/api/questionnaire/"+parseInt(i),{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){e.info=t.data,e.myID=e.info.id,e.control_time=t.data.is_end_time||t.data.is_start_time,e.info.isShow=[],console.log(e.info),""+e.info.author.username!==""+e.userLogin&&(e.$router.push({path:"/index"}),e.$notify.error({title:"您无权编辑此问卷"})),e.menuList.push({name:"其他功能",type:"function",children:[{name:"定位",type:"position"}]}),e.info.type;var i,n=Object(Ot["a"])(e.info.question_list);try{for(n.s();!(i=n.n()).done;){var o=i.value;"completion"==o.type?o.answer="":o.answer=[]}}catch(c){n.e(c)}finally{n.f()}var s,a=Object(Ot["a"])(e.info.question_list);try{for(a.s();!(s=a.n()).done;){var r=s.value;r["isShow"]=!1;for(var l=0;l<r.option_list.length;l++)r.is_scoring?"single-choice"==r.type&&r.option_list[l].is_answer_choice&&(r.answer=l):r.option_list[l].is_answer_choice=!1}}catch(c){a.e(c)}finally{a.f()}})).catch((function(t){e.$notify.error({title:"好像发生了什么错误",message:""})}))}else e.$notify.error({title:"请先登录！",message:""})}))}},en=tn,nn=(i("d073"),i("4c5c"),Object(u["a"])(en,Yi,Xi,!1,null,"22c074eb",null));nn.exports;ut()(nn,{VIcon:ft["a"]});var on=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-container",{staticClass:"main"},[i("el-container",[i("a-affix",{staticStyle:{width:"23%"},attrs:{"offset-top":4}},[i("el-aside",{staticStyle:{height:"fit-content"}},[i("el-container",{staticClass:"class"},[i("div",{staticStyle:{"margin-left":"0px"},on:{click:t.check}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-document-checked"})]),i("h4",[t._v("预览问卷")])],1),i("div",{staticStyle:{"margin-left":"50px"},on:{click:t.Finish}},[i("el-button",{staticClass:"button",attrs:{circle:""}},[i("i",{staticClass:"el-icon-finished"})]),i("h4",[t._v("完成编辑")])],1)]),i("el-menu",{staticClass:"aside-mid"},[i("div",{staticClass:"aside-top"},[i("span",[t._v(" 题型选择 ")])]),t._l(t.menuList,(function(e){return i("el-submenu",{key:e.type,attrs:{index:e.type}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.name))])]),t._l(e.children,(function(e){return i("el-menu-item",{key:e.type,attrs:{index:e.type},on:{click:function(i){return t.addQuestion(e.type)}}},[i("template",{slot:"title"},[i("span",[t._v(t._s(e.name))])])],2)}))],2)}))],2),i("el-menu",{staticClass:"aside-mid",staticStyle:{padding:"20px 25px",overflow:"auto","max-height":"400px"}},[i("div",{staticClass:"aside-top"},[i("span",[t._v(" 问卷设置 ")])]),i("div",{staticClass:"time_control",staticStyle:{"margin-top":"20px"}},[i("span",[t._v("设定答卷起止时间")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.delete_time_control},model:{value:t.control_time,callback:function(e){t.control_time=e},expression:"control_time"}}),t.control_time?i("div",{staticStyle:{"padding-left":"15px"}},[i("div",[i("div",[i("el-checkbox",{model:{value:t.info.is_start_time,callback:function(e){t.$set(t.info,"is_start_time",e)},expression:"info.is_start_time"}},[t._v("开始时间")])],1),i("div",{staticStyle:{"padding-left":"20px"}},[t.info.is_start_time?i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:t.info.start_time,callback:function(e){t.$set(t.info,"start_time",e)},expression:"info.start_time"}}):t._e()],1)]),i("div",[i("div",[i("el-checkbox",{model:{value:t.info.is_end_time,callback:function(e){t.$set(t.info,"is_end_time",e)},expression:"info.is_end_time"}},[t._v("结束时间")])],1),i("div",{staticStyle:{"padding-left":"20px"}},[t.info.is_end_time?i("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:t.info.end_time,callback:function(e){t.$set(t.info,"end_time",e)},expression:"info.end_time"}}):t._e()],1)]),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.save_time_control}},[t._v(" 保存更改 ")])],1)]):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("问卷显示问题编号")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#409eff","inactive-color":"#dcdfe6"},on:{change:t.is_show_num},model:{value:t.info.is_show_question_num,callback:function(e){t.$set(t.info,"is_show_question_num",e)},expression:"info.is_show_question_num"}})],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("设定答卷密码")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.set_islocked},model:{value:t.info.is_locked,callback:function(e){t.$set(t.info,"is_locked",e)},expression:"info.is_locked"}}),t.info.is_locked?i("div",{staticStyle:{"margin-top":"15px","padding-left":"15px"}},[i("span",{staticStyle:{"font-size":"15px"}},[t._v("设置密码:")]),i("el-input",{staticStyle:{"min-width":"180px","max-width":"180px","margin-left":"10px"},attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.set_password(e)}},model:{value:t.info.password,callback:function(e){t.$set(t.info,"password",e)},expression:"info.password"}}),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.set_password}},[t._v(" 保存更改 ")])],1)],1):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("设定答卷限额")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.set_is_limit_answer},model:{value:t.info.is_limit_answer,callback:function(e){t.$set(t.info,"is_limit_answer",e)},expression:"info.is_limit_answer"}}),t.info.is_limit_answer?i("div",{staticStyle:{"margin-top":"15px","padding-left":"15px"}},[i("span",{staticStyle:{"font-size":"15px"}},[t._v("设置限额数量:")]),i("el-input",{staticStyle:{"min-width":"180px","max-width":"180px","margin-left":"10px"},attrs:{placeholder:"请输入限额数量"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.set_limit_answer_number(e)}},model:{value:t.info.limit_answer_number,callback:function(e){t.$set(t.info,"limit_answer_number",e)},expression:"info.limit_answer_number"}}),i("div",{staticStyle:{"margin-top":"15px"}},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.set_limit_answer_number}},[t._v(" 保存更改 ")])],1)],1):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("答题需要登陆验证")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949",disabled:t.info.is_only_answer_once},on:{change:t.is_login_required},model:{value:t.info.is_required_login,callback:function(e){t.$set(t.info,"is_required_login",e)},expression:"info.is_required_login"}}),t.info.is_only_answer_once?i("div",{staticStyle:{"margin-top":"15px","padding-left":"15px"}},[i("span",{staticStyle:{color:"#a1a1a1","font-size":"15px"}},[t._v("设置限答后，必须打开登录验证")])]):t._e()],1),i("div",{staticStyle:{"margin-top":"15px"}},[i("span",{staticStyle:{"margin-top":"30px"}},[t._v("每个用户仅答一次")]),i("el-switch",{staticStyle:{float:"right"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.is_answer_once},model:{value:t.info.is_only_answer_once,callback:function(e){t.$set(t.info,"is_only_answer_once",e)},expression:"info.is_only_answer_once"}})],1)])],1)],1),i("el-main",{staticClass:"questionnaire",staticStyle:{height:"fit-content"}},[i("div",{staticClass:"question-title",attrs:{contenteditable:"true"}},[i("h2",[t._v(t._s(t.info.title))])]),i("div",{staticClass:"intro",attrs:{contenteditable:"true"},on:{input:function(e){t.info.content=e.target.innerText},blur:function(e){return t.editTitle(t.info)}}},[t._v(" "+t._s(t.info.content))]),i("el-container",{staticStyle:{display:"inline"}},[i("el-collapse",{staticClass:"question-container",on:{change:function(e){return t.editTitle(t.info)}},model:{value:t.info.isShow,callback:function(e){t.$set(t.info,"isShow",e)},expression:"info.isShow"}},[i("el-collapse-item",[i("template",{slot:"title"},[i("span",{staticStyle:{"margin-left":"85%"}},[t._v(" 编辑标题和简介 ")])]),i("title-content-dialog",{ref:"title-content-dialog"})],2)],1)],1),i("draggable",{attrs:{list:t.info.question_list,animation:"500","chosen-class":"chosen",disabled:t.disabled},on:{start:t.onStart,end:t.onEnd}},[i("transition-group",t._l(t.info.question_list,(function(e,n){return i("div",{key:e.id?e.id:e.key,staticClass:"card"},[i("div",{staticStyle:{padding:"20px"}},[i("div",{staticClass:"op"},[i("ul",{on:{mouseenter:t.mouseEnter,mouseleave:t.mouseLeave}},[i("li",{on:{click:function(i){return t.cardDelete(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-delete-variant")]),t._v(" 删除")],1),i("li",{on:{click:function(i){return t.cardCopy(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-content-copy")]),t._v(" 复制")],1),i("li",{on:{click:function(i){return t.cardDown(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-down-circle-outline")]),t._v(" 下移")],1),i("li",{on:{click:function(i){return t.cardUp(n,e)}}},[i("v-icon",{attrs:{small:""}},[t._v("mdi-arrow-up-circle-outline")]),t._v(" 上移")],1)])]),"single-choice"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[单选题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-radio-group",{model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}},t._l(e.option_list,(function(n,o){return i("el-radio",{key:n.id?n.id:n.key,attrs:{label:o,disabled:e.is_scoring},nativeOn:{click:function(e){return t.debugShow(n)}}},[t._v(" "+t._s(n.title)+" "),e.is_scoring&&o===e.answer?i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("[正确答案]")]):t._e()])})),1)]:t._e(),"multiple-choice"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[多选题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),t._l(e.option_list,(function(n,o){return i("div",{key:o},[i("el-checkbox",{attrs:{label:o,disabled:e.is_scoring},model:{value:n.is_answer_choice,callback:function(e){t.$set(n,"is_answer_choice",e)},expression:"subItem.is_answer_choice"}},[t._v(" "+t._s(n.title)+" "),e.is_scoring&&n.is_answer_choice?i("span",{staticStyle:{color:"#F56C6C","margin-left":"20px"}},[t._v("[正确答案]")]):t._e()])],1)}))]:t._e(),"completion"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[填空题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-input",{staticClass:"single-completion-input",attrs:{autosize:!0,type:"textarea",clearable:!0,resize:"none",disabled:e.is_scoring},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}}),e.is_scoring?i("div",{staticStyle:{color:"#F56C6C","margin-top":"20px"}},[t._v("正确答案: "+t._s(e.option_list[0].content))]):t._e()]:t._e(),"position"==e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[定位题]")]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("br"),i("el-button",{staticStyle:{"margin-left":"17px",width:"25%"},attrs:{icon:t.positioning?"el-icon-loading":t.none},on:{click:t.getLocation}},[t.location?i("span",[t._v(t._s(t.location["省份"]+" "+t.location["城市"]))]):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.location&&!t.positioning,expression:"!location && !positioning"}]},[t._v("点击获取位置")]),i("span",{directives:[{name:"show",rawName:"v-show",value:t.positioning,expression:"positioning"}]},[t._v(" 等待获取中 "),i("span",{staticClass:"red"},[t._v(t._s(t.countDown))]),t._v(" 秒 ")])])],1)]:t._e(),"scoring"===e.type?[i("div",[t.info.is_show_question_num?i("span",[t._v(t._s(n+1)+". ")]):t._e(),i("span",{staticStyle:{"margin-top":"20px"}},[t._v(" "+t._s(e.title)+" ")]),i("span",{staticStyle:{color:"lightgrey"}},[t._v("[评分题]")]),e.is_must_answer?i("span",{staticStyle:{color:"#F56C6C"}},[t._v("* ")]):t._e()]),i("div",{staticStyle:{color:"dimgray","font-size":"14px","padding-left":"17px","margin-top":"15px"}},[t._v(" "+t._s(e.content)+" ")]),i("el-rate",{staticClass:"scoring-input",attrs:{max:e.option_list.length-1,"show-score":""},model:{value:e.answer,callback:function(i){t.$set(e,"answer",i)},expression:"item.answer"}})]:t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.is_scoring,expression:"item.is_scoring"}],staticStyle:{"margin-top":"20px",color:"#F56C6C"}},[t._v("本题分值: "+t._s(e.question_score))])],2),i("el-container",{staticStyle:{display:"inline"}},[i("div",{staticClass:"question-container"},[i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}]},["single-choice"===e.type?i("single-choice-add-card",{ref:"single-choice"+n,refInFor:!0,attrs:{type:t.info.type}}):t._e(),"multiple-choice"===e.type?i("multiple-choice-add-card",{ref:"multiple-choice"+n,refInFor:!0}):t._e(),"completion"===e.type?i("single-completion-add-card",{ref:"completion"+n,refInFor:!0}):t._e(),"scoring"===e.type?i("scoring-add-card",{ref:"scoring"+n,refInFor:!0}):t._e(),"position"===e.type?i("position-add-card",{ref:"position"+n,refInFor:!0}):t._e()],1)])],1)]),i("el-divider"),i("el-button",{staticClass:"edit-button",attrs:{icon:!0===e.isShow?"el-icon-arrow-up":"el-icon-arrow-down"},on:{click:function(i){return t.editQuestion(e,n)}},nativeOn:{mouseenter:function(e){return t.mouseEnter(e)},mouseleave:function(e){return t.mouseLeave(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.isShow,expression:"item.isShow === true"}]},[t._v("完成编辑")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.isShow,expression:"item.isShow === false"}]},[t._v("进入编辑")])])],1)})),0)],1),i("div",{staticClass:"not_found",staticStyle:{"line-height":"100px"}},[t._v(" 快去侧边栏选择题型创建新的问题o(*￣▽￣*)ブ "),i("i",{staticClass:"el-icon-cold-drink"})]),i("el-button",{staticClass:"main-footer",attrs:{type:"danger"},on:{click:t.Finish}},[t._v("完成编辑")])],1)],1)],1),i("el-backtop")],1)},sn=[];n["default"].component(Pe.a.name,Pe.a);var an={components:{PositionAddCard:Je,SingleChoiceAddCard:ne,Wave:he,MultipleChoiceAddCard:ce,SingleCompletionAddCard:be,MultipleCompletionAddCard:Ce,ScoringAddCard:Te,draggable:Ee.a,TitleContentDialog:Qe},data:function(){return{isEdit:!1,editItem:"",BMap:null,geolocation:null,positioning:!1,positioningInterval:null,countDown:30,location:null,disabled:!0,menuList:[{name:"选择题",type:"choice",children:[{name:"单选题",type:"single-choice"},{name:"多选题",type:"multiple-choice"}]},{name:"填空题",type:"completion",children:[{name:"单项填空",type:"completion"}]},{name:"评分题",type:"scoring",children:[{name:"评分题",type:"scoring"}]}],userLogin:localStorage.getItem("username.myblog"),info:null,answer:[],control_time:"",show_num:""}},methods:{set_limit_answer_number:function(){var t=this,e=/^[0-9]*$/,i=new RegExp(e),n=!1;if(console.log(this.info.limit_answer_number),i.test(this.info.limit_answer_number)){var o=parseInt(this.info.limit_answer_number);o>=1&&(n=!0),console.log(o)}!1===n?t.$notify.error({title:"限额必须为正整数！"}):_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_limit_answer:!0,limit_answer_number:parseInt(this.info.limit_answer_number)},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"设置成功",message:"设置限额成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置限额失败！"})}))},set_password:function(){var t=this;""===this.info.password?t.$notify.error({title:"密码不能为空！",message:"请输入密码！"}):_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_locked:!0,password:this.info.password},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"设置成功",message:"设置密码成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置密码失败！"})}))},set_is_limit_answer:function(){var t=this;!1===this.info.is_limit_answer&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_limit_answer:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"问卷限额已取消！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"问卷限额取消失败！"})}))},set_islocked:function(){var t=this;!1===this.info.is_locked&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_locked:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"问卷已解锁！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"解锁问卷失败"})}))},resetPositioning:function(){this.positioning=!1,this.location=null,this.countDown=30,clearInterval(this.positioningInterval)},getLocation:function(){var t=this,e=this;if(e.geolocation=new e.BMap.Geolocation,e.geolocation){e.geolocation.enableSDKLocation(),this.positioning=!0,this.positioningInterval=setInterval((function(){0===t.countDown?(t.countDown=30,clearInterval(t.positioningInterval)):t.countDown--}),1e3);var i={enableHighAccuracy:!0,timeout:30,maximumAge:0};e.geolocation.getCurrentPosition((function(t){e.resetPositioning();var i=e.geolocation.getStatus(),n="由于未知错误而无法检索设备的位置",o="error";switch(i){case 0:if(o="success",n="获取地理位置定位请求成功",t){var s=0,a=0,r="未知",l="未知";t.point&&(s=t.point.lat,a=t.point.lng),t.address&&(r=t.address.province,l=t.address.city),e.location={"省份":r,"城市":l,"经度":s,"纬度":a}}else n="由于未知错误而无法检索设备的位置";break;case 2:n="由于未知错误而无法检索设备的位置";break;case 4:case 5:n="位置服务请求非法";break;case 6:n="应用程序没有使用位置服务的权限";break;case 7:n="网络不可用或者无法连接到获取位置信息的卫星";break;case 8:n="无法在指定的最大超时间隔内检索位置信息";break;default:n="由于未知错误而无法检索设备的位置";break}e.$notify[o]({key:NotificationKey,message:"提示",description:n})}),i)}else e.$notify.error({key:NotificationKey,message:"提示",description:"您的浏览器不支持地理位置服务"})},delete_time_control:function(){var t=this;!1===this.control_time&&_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_start_time:!1,is_end_time:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"已关闭时间控制！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置时间失败"})}))},save_time_control:function(){new Date;var t=this;if(!1===this.info.is_start_time&&!1===this.info.is_end_time)this.$notify.warning({title:"设置失败",message:"请至少选择一项时间限制！"});else if(this.info.is_start_time&&null===this.info.start_time)this.$notify.warning({title:"设置失败",message:"请设置开始时间！"});else if(this.info.is_end_time&&null===this.info.end_time)this.$notify.warning({title:"设置失败",message:"请设置结束时间！"});else{var e=1;this.info.is_start_time&&this.info.is_end_time&&Date.parse(this.info.start_time)>Date.parse(this.info.end_time)&&(e=0),1===e?_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_start_time:this.info.is_start_time,start_time:this.info.start_time,is_end_time:this.info.is_end_time,end_time:this.info.end_time},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"编辑成功",message:"设置时间控制成功！"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置时间失败"})})):this.$notify.warning({title:"设置失败",message:"结束时间不能早于开始时间，请检查并修改！"})}},is_show_num:function(){var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_show_question_num:this.info.is_show_question_num},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},is_login_required:function(){var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_required_login:this.info.is_required_login},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"好耶",message:"设置成功"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},is_answer_once:function(){this.info.is_only_answer_once&&!this.info.is_required_login&&(this.info.is_required_login=!0);var t=this;_.a.patch("/api/questionnaire/"+t.info.id+"/",{is_only_answer_once:this.info.is_only_answer_once,is_required_login:this.info.is_required_login},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){t.$notify.success({title:"好耶",message:"设置成功"})})).catch((function(e){t.$notify.error({title:"出错啦",message:"设置失败"})}))},check:function(){var t=b["Base64"].encode("moyu"+this.$route.params.id+"wenjuan"),e=window.location.origin+"/check/"+t;window.open(e)},Finish:function(){0===this.info.question_list.length?this.$notify.warning({title:"请至少创建一个问题哦"}):(this.$router.push({path:"/index"}),this.$notify.success({title:"问卷编辑完成",message:"快去发布吧"}))},addQuestion:function(t){var e=this;if(this.isEdit)return this.$notify.error({title:"请完成当前题目的编辑!"}),void this.$nextTick((function(t){window.scrollTo({behavior:"smooth",top:e.editItem.$el.offsetTop-300})}));this.info.question_list.push({key:Date.now(),option_list:[{title:"",content:"",ordering:1,is_answer_choice:!0,key:Date.now()}],title:"",content:"",type:t,questionnaire:this.$route.params.id,is_must_answer:!1,is_show_result:!1,isShow:!1,is_scoring:!1,question_score:5});var i=this.info.question_list.length-1;this.$nextTick((function(t){e.editQuestion(e.info.question_list[i],i),e.$nextTick((function(t){var e=document.getElementById("app");window.scrollTo({behavior:"smooth",top:e.offsetHeight})}))}))},editQuestion:function(t,e){var i=this,n=t.type,o=this.$refs[n+e][0];return this.editItem&&this.editItem!=o?(this.$notify.error("请完成之前题目编辑"),void this.$nextTick((function(t){window.scrollTo({behavior:"smooth",top:i.editItem.$el.offsetTop-300})}))):this.isEdit&&!t.isShow?(this.$notify.error("请完成之前题目编辑"),void this.$nextTick((function(t){var e=document.getElementById("app");window.scrollTo({behavior:"smooth",top:e.offsetHeight})}))):(o.editQuestion(this.info.question_list[e]),o.editSuccess&&(t.isShow=!t.isShow,this.$forceUpdate()),void(t.isShow?(this.disabled=!0,this.isEdit=!0,this.editItem=o):(this.disabled=!1,this.isEdit=!1,this.editItem="")))},cardUp:function(t,e){if(this.isEdit)return this.$notify.error("请完成当前编辑");if(0===t)return this.$notify.error("已经到顶了啊");var i=this;console.log(t),_.a.patch("/api/question/"+e.id+"/",{ordering:t},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){var n=i.info.question_list[t];i.info.question_list[t]=i.info.question_list[t-1],i.info.question_list[t-1]=n,i.$forceUpdate()})).catch((function(t){i.$notify.error({title:"出错啦",message:"更换顺序失败"})}))},cardDown:function(t,e){if(this.isEdit)return this.$notify.error("请完成当前编辑");if(t===this.info.question_list.length-1)return this.$notify.error("不能继续往下了");var i=this;console.log(t),_.a.patch("/api/question/"+e.id+"/",{ordering:t+2},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){var n=i.info.question_list[t];i.info.question_list[t]=i.info.question_list[t+1],i.info.question_list[t+1]=n,i.$forceUpdate()})).catch((function(t){i.$notify.error({title:"出错啦",message:"更换顺序失败"})}))},cardDelete:function(t,e){if(!e.hasOwnProperty("id"))return this.info.question_list.splice(t,1),this.isEdit=!1,void(this.editItem="");var i=this;_.a.delete("/api/question/"+e.id+"/",{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){i.info.question_list.splice(t,1)})).catch((function(t){i.$notify.error({title:"出错啦",message:"删除失败"})}))},cardCopy:function(t,e){if(this.isEdit)return this.$notify.error("请完成当前编辑");var i=this;_.a.post("/api/question/copy/",{id:e.id},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(e){i.info.question_list.splice(t+1,0,JSON.parse(JSON.stringify(i.info.question_list[t])))})).catch((function(t){i.$notify.error({title:"出错啦",message:"复制失败"})}))},editTitle:function(t){this.info.isShow=!this.info.isShow,this.$refs["title-content-dialog"].edit(t)},onStart:function(){this.drag=!0,console.log("start"),console.log(this.info.question_list)},onEnd:function(t){if(this.drag=!1,t.oldIndex!=t.newIndex){for(var e=0;e<this.info.question_list.length;e++){var i=this.info.question_list[e];i.isShow&&(this.$refs[i.type+e][0].questionForm=i)}var n=this.info.question_list[t.newIndex].id,o=this;_.a.patch("/api/question/"+n+"/",{ordering:t.newIndex+1},{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){o.$notify.success({title:"交换成功"})})).catch((function(t){o.$notify.error({title:"出错啦",message:"更换顺序失败"})}))}},mouseEnter:function(){this.disabled=!0},mouseLeave:function(){this.isEdit||(this.disabled=!1)},mouseChange:function(){this.isEdit?this.disabled=!0:this.disabled=!1},debugShow:function(t){console.log("item",t)}},mounted:function(){var t=this;window.initBaiduMapScript=function(){t.BMap=window.BMap},Dt("initBaiduMapScript");var e=this;w().then((function(t){t[0]?_.a.get("/api/questionnaire/"+e.$route.params.id,{headers:{Authorization:"Bearer "+localStorage.getItem("access.myblog")}}).then((function(t){e.info=t.data,e.control_time=t.data.is_end_time||t.data.is_start_time,e.info.isShow=[],console.log(e.info),""+e.info.author.username!==""+e.userLogin&&(e.$router.push({path:"/index"}),e.$notify.error({title:"您无权编辑此问卷"})),1==e.info.is_limit_answer&&(console.log(11111),console.log(e.info.limit_answer_number)),e.menuList.push({name:"其他功能",type:"function",children:[{name:"定位",type:"position"}]}),e.info.type;var i,n=Object(Ot["a"])(e.info.question_list);try{for(n.s();!(i=n.n()).done;){var o=i.value;"completion"==o.type?o.answer="":o.answer=[]}}catch(c){n.e(c)}finally{n.f()}var s,a=Object(Ot["a"])(e.info.question_list);try{for(a.s();!(s=a.n()).done;){var r=s.value;r["isShow"]=!1;for(var l=0;l<r.option_list.length;l++)r.is_scoring?"single-choice"==r.type&&r.option_list[l].is_answer_choice&&(r.answer=l):r.option_list[l].is_answer_choice=!1}}catch(c){a.e(c)}finally{a.f()}})).catch((function(t){e.$notify.error({title:"好像发生了什么错误",message:""})})):e.$notify.error({title:"请先登录！",message:""})}))}},rn=an,ln=(i("128d"),i("c437"),Object(u["a"])(rn,on,sn,!1,null,"267f256f",null));ln.exports;ut()(ln,{VIcon:ft["a"]}),n["default"].use(B["a"]);var cn=[{path:"/",name:"Welcome",component:Vi,meta:{title:"欢迎使用摸鱼问卷"}},{path:"/login",name:"Login",component:R,meta:{title:"登录"}},{path:"/register",name:"Register",component:tt,meta:{title:"注册"}},{path:"/index",name:"Index",component:Ft,children:[{path:"",name:"Questionnaire",component:vt,meta:{title:"全部问卷"}},{path:"/questionnaires",name:"Questionnaire",component:vt,meta:{title:"全部问卷"}},{path:"/recycle",name:"RecycleBin",component:St,meta:{title:"回收站"}}]},{path:"/create",name:"TypeChoose",component:Zi,meta:{title:"创建问卷"}},{path:"/check/:text",name:"check",component:Rt,meta:{title:"问卷预览"}},{path:"/fill/:text",name:"fill",component:Kt,meta:{title:"问卷填写"}},{path:"/edit/:text",name:"Questionnairs",component:si,meta:{title:"问卷编辑"}},{path:"/charts/:text",name:"Charts",component:pi,meta:{title:"结果统计"}},{path:"/thank/:text",name:"Thank",component:Bi,meta:{title:"填写完成"}},{path:"/notfound",name:"NotFound",component:Si,meta:{title:"找不到页面"}},{path:"/search/:text",name:"SearchResult",component:vi,meta:{title:"搜索结果"}},{path:"/about",name:"About",component:function(){return i.e("about").then(i.bind(null,"f820"))}}],un=new B["a"]({mode:"history",base:"/",routes:cn}),dn=un,pn=i("2f62");n["default"].use(pn["a"]);var mn=new pn["a"].Store({state:{isLogin:!1,flag:!1,url:""},mutations:{flag_true:function(t){t.flag=!0},flag_false:function(t){t.flag=!1},toUrl:function(t,e){t.url=e}},actions:{},modules:{}}),fn=i("5c96"),hn=i.n(fn),_n=(i("0fae"),i("f309"));n["default"].use(_n["a"]);var gn=new _n["a"]({}),vn=i("7071"),yn=i("ed3b"),wn=i("4ae6"),bn=i.n(wn),xn=i("c0e9"),qn=i.n(xn),Sn=i("8baf"),kn={install:function(t,e){t.prototype.getPdf=function(){var t=this.htmlTitle;qn()(document.querySelector("#pdfDom"),{allowTaint:!0}).then((function(e){var i=e.width,n=e.height,o=i/592.28*841.89,s=n,a=0,r=595.28,l=592.28/i*n,c=e.toDataURL("image/jpeg",1),u=new Sn["a"]("","pt","a4");if(s<o)u.addImage(c,"JPEG",0,0,r,l);else while(s>0)u.addImage(c,"JPEG",0,a,r,l),s-=o,a-=841.89,s>0&&u.addPage();u.save(t+".pdf")}))}}},$n=i("bd0c"),Cn=i.n($n),Fn=i("1157"),In=i.n(Fn);n["default"].use(Cn.a,{ak:"cTsGIgzbOe4eeNykwqYy6m0lVHvWTtnF"});var Bn=i("313e");i("e762").Base64;n["default"].config.productionTip=!1,n["default"].use(hn.a),n["default"].use(bn.a),n["default"].use(kn),n["default"].use(vn["a"]),n["default"].use(yn["a"]),n["default"].prototype.$echarts=Bn,n["default"].prototype.$jq=In.a,dn.beforeEach((function(t,e,i){0===t.matched.length&&i("/notfound"),i()})),dn.beforeEach((function(t,e,i){t.meta.title&&(document.title=t.meta.title),i()})),new n["default"]({router:dn,store:mn,vuetify:gn,render:function(t){return t(I)}}).$mount("#app")},5743:function(t,e,i){"use strict";i("cc27")},"5ad3":function(t,e,i){},"5f87":function(t,e,i){"use strict";i("fca3")},"5fbe":function(t,e,i){t.exports=i.p+"img/logo2.2525784c.png"},"5fd3":function(t,e,i){},"630e":function(t,e,i){},6509:function(t,e,i){"use strict";i("e3f8")},"6b00":function(t,e,i){"use strict";i("b3e4")},"6eec":function(t,e,i){"use strict";i("bc9b")},"70ea":function(t,e,i){"use strict";i("c0e2")},"7da1":function(t,e,i){},"85ec":function(t,e,i){},8906:function(t,e,i){},"8a64":function(t,e,i){},"8c32":function(t,e,i){},"8c47":function(t,e,i){},"9cf1":function(t,e,i){},"9cf1c":function(t,e,i){"use strict";i("ccce")},a037:function(t,e,i){},a285:function(t,e,i){"use strict";i("af60")},a50e:function(t,e,i){"use strict";i("b7c0")},a6de:function(t,e,i){},ab04:function(t,e,i){"use strict";i("bbfa")},ab11:function(t,e,i){},af60:function(t,e,i){},afb8:function(t,e,i){"use strict";i("c029")},b23f:function(t,e,i){},b3e4:function(t,e,i){},b67a:function(t,e,i){},b7c0:function(t,e,i){},b85e:function(t,e,i){"use strict";i("4ec6")},bab9:function(t,e,i){},bbfa:function(t,e,i){},bc9b:function(t,e,i){},bc9d:function(t,e,i){"use strict";i("b67a")},c029:function(t,e,i){},c0e2:function(t,e,i){},c437:function(t,e,i){"use strict";i("8c47")},c48b:function(t,e,i){"use strict";i("a037")},c9d3:function(t,e,i){},cbdb:function(t,e,i){},cc27:function(t,e,i){},ccce:function(t,e,i){},cf33:function(t,e,i){},d073:function(t,e,i){"use strict";i("f9c2")},d0ef:function(t,e,i){},db03:function(t,e,i){"use strict";i("3cb1")},ddcc:function(t,e,i){},e3f8:function(t,e,i){},e408:function(t,e,i){"use strict";i("47ad")},e830:function(t,e,i){"use strict";i("b23f")},e8c8:function(t,e,i){"use strict";i("ddcc")},ec0c:function(t,e,i){"use strict";i("cf33")},ecaa:function(t,e,i){"use strict";i("efb2")},ed39:function(t,e,i){"use strict";i("3fc4")},efb2:function(t,e,i){},f128:function(t,e,i){"use strict";i("8c32")},f46d:function(t,e,i){"use strict";i("3e28")},f59f:function(t,e,i){"use strict";i("ab11")},f9c2:function(t,e,i){},fca3:function(t,e,i){}});
//# sourceMappingURL=app.9030e6a1.js.map